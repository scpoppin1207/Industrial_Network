/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: https://github.com/daybrush/moveable/blob/master/packages/moveable
version: 0.29.9
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).Moveable=n()}(this,function(){"use strict";var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function e(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var o=function(){return(o=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function i(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.map(function(t){return t.split(" ").map(function(t){return t?""+n+t:""}).join(" ")}).join(" ")}function x(n,e){return function(t){t&&(n[e]=t)}}function s(n,e,r){return function(t){t&&(n[e][r]=t)}}function u(e,r){return function(t){var n=t.prototype;e.forEach(function(t){r(n,t)})}}var M=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var e=this.keys,r=this.values,i=e.indexOf(t),i=-1===i?e.length:i;e[i]=t,r[i]=n},t}(),R=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),D="function"==typeof Map,c=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var C=function(){function t(t,n,e,r,i,o,a,s){this.prevList=t,this.list=n,this.added=e,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){t=this.changedBeforeAdded,e=this.fixed,i=[],o=[],t.forEach(function(t){var n=t[0],t=t[1],e=new c;i[n]=e,o[t]=e}),i.forEach(function(t,n){t.connect(i[n-1])});var e,i,o,t=t.filter(function(t,n){return!e[n]}).map(function(t,n){var e=t[0],t=t[1];if(e===t)return[0,0];var e=i[e],t=o[t-1],r=e.getIndex();return e.disconnect(),t?e.connect(t,t.next):e.connect(void 0,i[0]),[r,e.getIndex()]}),a=this.changed,s=[];this.cacheOrdered=t.filter(function(t,n){var e=t[0],t=t[1],n=a[n],r=n[0],n=n[1];if(e!==t)return s.push([r,n]),!0}),this.cachePureChanged=s},t}();function l(t,n,e){var r=D?Map:e?R:M,e=e||function(t){return t},i=[],o=[],a=[],s=t.map(e),e=n.map(e),u=new r,c=new r,l=[],f=[],p={},d=[],h=0,g=0;return s.forEach(function(t,n){u.set(t,n)}),e.forEach(function(t,n){c.set(t,n)}),s.forEach(function(t,n){t=c.get(t);void 0===t?(++g,o.push(n)):p[t]=g}),e.forEach(function(t,n){t=u.get(t);void 0===t?(i.push(n),++h):(a.push([t,n]),g=p[n]||0,l.push([t-g,n-h]),f.push(n===t),t!==n&&d.push([t,n]))}),o.reverse(),new C(t,n,i,o,d,a,l,f)}var t=function(){function t(t,n){void 0===t&&(t=[]),this.findKeyCallback=n,this.list=[].slice.call(t)}return t.prototype.update=function(t){var t=[].slice.call(t),n=l(this.list,t,this.findKeyCallback);return this.list=t,n},t}(),n="function",f="object",p="string",d="undefined",G=typeof window!==d,L=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],A=1e-7,V={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return t/100*(n=void 0===n?window.innerWidth:n)},vh:function(t,n){return t/100*(n=void 0===n?window.innerHeight:n)},vmax:function(t,n){return t/100*(n=void 0===n?Math.max(window.innerWidth,window.innerHeight):n)},vmin:function(t,n){return t/100*(n=void 0===n?Math.min(window.innerWidth,window.innerHeight):n)}};function U(t,n,e,r){return(t*r+n*e)/(e+r)}function $(t){return typeof t===d}function ot(t){return t&&typeof t===f}function at(t){return Array.isArray(t)}function st(t){return typeof t===p}function ut(t){return"number"==typeof t}function ct(t){return typeof t===n}function lt(t,n,e,r,i){if(ft(t,n,e))return e;for(var o,a=t,s=n,u=r,c=i,l=e+1;l<u;++l){var f=function(t){var n,e,r=s[t].trim();return r!==a.close||ft(a,s,t)?(n=t,-1===(n=(e=bt(c,function(t){return t.open===r}))?lt(e,s,t,u,c):n)?(o=t,"break"):void(o=t=n)):{value:t}}(l);if(l=o,"object"==typeof f)return f.value;if("break"===f)break}return-1}function ft(t,n,e){if(!t.ignore)return null;n=n.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(n)}function pt(t,n){var n=st(n)?{separator:n}:n,e=n.separator,o=void 0===e?",":e,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,e=n.isSeparateOpenClose,u=void 0===e?s:e,e=n.openCloseCharacters,c=void 0===e?L:e,n=c.map(function(t){var n=t.open,t=t.close;return n===t?n:n+"|"+t}).join("|"),e=new RegExp("(\\s*"+o+"\\s*|"+n+"|\\s+)","g"),l=t.split(e).filter(Boolean),f=l.length,p=[],d=[];function h(){return d.length&&(p.push(d.join("")),d=[])}for(var g,r=0;r<f;++r){var i=function(t){var n=l[t].trim(),e=t,r=bt(c,function(t){return t.open===n}),i=bt(c,function(t){return t.close===n});if(r){if(-1!==(e=lt(r,l,t,f,c))&&u)return h()&&a?(g=t,"break"):(p.push(l.slice(t,e+1).join("")),t=e,a?(g=t,"break"):(g=t,"continue"))}else{if(i&&!ft(i,l,t))throw new Error("invalid format: "+i.close);if(r=n,!((""!==(i=o)&&" "!=i||""!==r&&" "!=r)&&r!==i||s))return h(),a?(g=t,"break"):(g=t,"continue")}d.push(l.slice(t,(e=-1===e?f-1:e)+1).join("")),g=t=e}(r),r=g;if("break"===i)break}return d.length&&p.push(d.join("")),p}function S(t){return pt(t,"")}function dt(t){return pt(t,",")}function ht(t){t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function gt(t){t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!t)return{prefix:"",unit:"",value:NaN};var n=t[1],e=t[2];return{prefix:n,unit:t[3],value:parseFloat(e)}}function vt(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,n,e){return""+n+r+e.toLowerCase()})}function mt(){return Date.now?Date.now():(new Date).getTime()}function h(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}function bt(t,n,e){n=h(t,n);return-1<n?t[n]:e}var xt=function(){var e=mt(),t=G&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(t){var n=mt();return window.setTimeout(function(){t(n-e)},1e3/60)}}(),Et=function(){var t=G&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function St(t){if(Object.keys)return Object.keys(t);var n,e=[];for(n in e)e.push(n);return e}function Z(t,n){var t=gt(t),e=t.value,t=t.unit;if(ot(n)){var r=n[t];if(r){if(ct(r))return r(e);if(V[t])return V[t](e,r)}}else if("%"===t)return e*n/100;return V[t]?V[t](e):e}function yt(t,e,r,n){return void 0===n&&(n=t[0]/t[1]),[[N(e[0],A),N(e[0]/n,A)],[N(e[1]*n,A),N(e[1],A)]].filter(function(t){return t.every(function(t,n){return r?t<=e[n]:t>=e[n]})})[0]||t}function Mt(t,r,i,n){if(!n)return t.map(function(t,n){return e=r[n],n=i[n],Math.max(e,Math.min(t,n));var e});var e=t[0],o=t[1],n=!0===n?e/o:n,a=yt(t,r,!1,n),s=a[0],a=a[1],t=yt(t,i,!0,n),n=t[0],t=t[1];return e<s||o<a?(e=s,o=a):(n<e||t<o)&&(e=n,o=t),[e,o]}function Rt(t){for(var n=t.length,e=0,r=n-1;0<=r;--r)e+=t[r];return n?e/n:0}function F(t,n){var e=n[0]-t[0],n=n[1]-t[1],t=Math.atan2(n,e);return 0<=t?t:t+2*Math.PI}function Dt(t){e=t;var e,n=[0,1].map(function(n){return Rt(e.map(function(t){return t[n]}))}),r=F(n,t[0]),n=F(n,t[1]);return r<n&&n-r<Math.PI||n<r&&n-r<-Math.PI?1:-1}function g(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function N(t,n){return n?Math.round(t/n)*n:t}function Ct(e,r){e.forEach(function(t,n){e[n]=N(e[n],r)})}function a(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function wt(t,n){t.classList?t.classList.add(n):t.className+=" "+n}function Ot(t,n){t.classList?t.classList.remove(n):(n=new RegExp("(\\s|^)"+n+"(\\s|$)"),t.className=t.className.replace(n," "))}function Pt(t,n,e,r){t.addEventListener(n,e,r)}function v(t,n,e,r){t.removeEventListener(n,e,r)}var Bt=function(t,n){return(Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function zt(t,n){function e(){this.constructor=t}Bt(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var Gt=function(){return(Gt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Tt(t,n){var e={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]]);return e}function _t(t,n){if(t===n)return!1;for(var e in t)if(!(e in n))return!0;for(var e in n)if(t[e]!==n[e])return!0;return!1}function At(e,r){var i=Object.keys(e),n=Object.keys(r),t=l(i,n,function(t){return t}),o={},a={},s={};return t.added.forEach(function(t){t=n[t];o[t]=r[t]}),t.removed.forEach(function(t){t=i[t];a[t]=e[t]}),t.maintained.forEach(function(t){var t=t[0],t=i[t],n=[e[t],r[t]];e[t]!==r[t]&&(s[t]=n)}),{added:o,removed:a,changed:s}}function It(t){t.forEach(function(t){t()})}function kt(t){var n=0;return t.map(function(t){return null==t?"$compat"+ ++n:""+t})}function Ft(t,n,e,r){return st(t)||ut(t)?new qt("text_"+t,n,e,r,null,{}):new("string"==typeof t.type?Xt:t.type.prototype.render?$t:Vt)(t.type,n,e,r,t.ref,t.props)}function Nt(t){var n=t.className,t=Tt(t,["className"]);return null!=n&&(t.class=n),delete t.style,delete t.children,t}function Wt(t,n){if(!n)return t;for(var e in n)$(t[e])&&(t[e]=n[e]);return t}function m(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var n=n||{},i=n.key,o=n.ref,n=Tt(n,["key","ref"]);return{type:t,key:i,ref:o,props:Gt(Gt({},n),{children:function n(t){var e=[];return t.forEach(function(t){e=e.concat(at(t)?n(t):t)}),e}(e).filter(function(t){return null!=t&&!1!==t})})}}var Yt=function(){function t(t,n,e,r,i,o){void 0===o&&(o={}),this.type=t,this.key=n,this.index=e,this.container=r,this.ref=i,this.props=o,this._providers=[]}var n=t.prototype;return n._should=function(t,n){return!0},n._update=function(t,n,e,r){if(this.base&&!st(n)&&!r&&!this._should(n.props,e))return!1;this.original=n,this._setState(e);r=this.props;return st(n)||(this.props=n.props,this.ref=n.ref),this._render(t,this.base?r:{},e),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},t}();function jt(t){var n,e={},r={};for(n in t)0===n.indexOf("on")?r[n.replace("on","").toLowerCase()]=t[n]:e[n]=t[n];return{attributes:e,events:r}}var qt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}zt(n,t);var e=n.prototype;return e._render=function(t){var n=this,e=!this.base;return e&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){e?n._mounted():n._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(Yt),Xt=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.events={},t._isSVG=!1,t}zt(t,n);var e=t.prototype;return e.addEventListener=function(t,n){var e=this.events;e[t]=function(t){t.nativeEvent=t,n(t)},this.base.addEventListener(t,e[t])},e.removeEventListener=function(t){var n=this.events;this.base.removeEventListener(t,n[t]),delete n[t]},e._should=function(t){return _t(this.props,t)},e._render=function(t,n){var e,r=this,i=!this.base,o=(i&&(o=this._hasSVG(),this._isSVG=o,(s=this.props.portalContainer)||(a=this.type,s=o?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)),this.base=s),Qt(this,this._providers,this.props.children,t,null),this.base),a=jt(n),s=a.attributes,a=a.events,u=jt(this.props),c=u.attributes,u=u.events,s=Nt(s),c=Nt(c),l=o,f=(s=At(s,c)).added,c=s.removed,p=s.changed;for(e in f)l.setAttribute(e,f[e]);for(e in p)l.setAttribute(e,p[e][1]);for(e in c)l.removeAttribute(e);var d,c=a,h=this,g=(c=At(c,a=u)).added,a=c.removed,v=c.changed;for(d in a)h.removeEventListener(d);for(d in g)h.addEventListener(d,g[d]);for(d in v)h.removeEventListener(d),h.addEventListener(d,v[d][1]);for(d in a)h.removeEventListener(d);var m,u=n.style||{},c=this.props.style||{},n=o,b=n.style,x=(n=At(u,c)).added,u=n.removed,E=n.changed;for(m in x){var S=vt(m,"-");b.setProperty?b.setProperty(S,x[m]):b[S]=x[m]}for(m in E){S=vt(m,"-");b.setProperty?b.setProperty(S,E[m][1]):b[S]=E[m][1]}for(m in u){S=vt(m,"-");b.removeProperty?b.removeProperty(S):b[S]=""}return t.push(function(){i?r._mounted():r._updated()}),!0},e._unmount=function(){var t,n=this.events,e=this.base;for(t in n)e.removeEventListener(t,n[t]);this._providers.forEach(function(t){t._unmount()}),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},e._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=Ht(this.container);return t&&"ownerSVGElement"in t},t}(Yt);function Ht(t){if(!t)return null;var n=t.base;return n instanceof Node?n:Ht(t.container)}function Lt(t){if(!t)return null;if(t instanceof Node)return t;t=t.$_provider._providers;return t.length?Lt(t[0].base):null}var Vt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}zt(n,t);var e=n.prototype;return e._render=function(t){var n=this.type(this.props);return Qt(this,this._providers,n?[n]:[],t),!0},e._unmount=function(){this._providers.forEach(function(t){t._unmount()})},n}(Yt),Ut=function(e){function t(t){var n=e.call(this,"container","container",0,null)||this;return n.base=t,n}zt(t,e);var n=t.prototype;return n._render=function(){return!0},n._unmount=function(){},t}(Yt),$t=function(a){function t(t,n,e,r,i,o){return a.call(this,t,n,e,r,i,Wt(o=void 0===o?{}:o,t.defaultProps))||this}zt(t,a);var n=t.prototype;return n._should=function(t,n){return this.base.shouldComponentUpdate(Wt(t,this.type.defaultProps),n||this.base.state)},n._render=function(t,n,e){var r=this,i=(this.props=Wt(this.props,this.type.defaultProps),!this.base),o=(i?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props,this.base),a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),Qt(this,this._providers,s?[s]:[],t,e,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(n,a))})},n._setState=function(t){var n=this.base;n&&t&&(n.state=t)},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},t}(Yt),Yt=function(){function t(t){this.props=t=void 0===t?{}:t,this.state={},this.$_timer=0,this.$_state={}}var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!0},n.render=function(){return null},n.setState=function(t,n,e){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Gt(Gt({},this.$_state),t),e?this.$_setState(n,e):this.$_timer=setTimeout(function(){r.$_timer=0,r.$_setState(n,e)})},n.forceUpdate=function(t){this.setState({},t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,n){},n.componentWillUnmount=function(){},n.$_setState=function(t,n){var e=[],r=this.$_provider;Qt(r.container,[r],[r.original],e,Gt(Gt({},this.state),this.$_state),n)&&(t&&e.push(t),It(e))},t}(),Zt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return zt(n,t),n.prototype.shouldComponentUpdate=function(t,n){return _t(this.props,t)||_t(this.state,n)},n}(Yt),Kt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}zt(n,t);var e=n.prototype;return e.componentDidMount=function(){var t=this.props,n=t.element,t=t.container;this._portalProvider=new Ut(t),tn(n,t,this._portalProvider)},e.componentDidUpdate=function(){var t=this.props;tn(t.element,t.container,this._portalProvider)},e.componentWillUnmount=function(){tn(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(Zt);function Jt(r,i,o){var a=o.map(function(t){return st(t)?null:t.key}),t=l(kt(i.map(function(t){return t.key})),kt(a),function(t){return t}),n=(t.removed.forEach(function(t){i.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var n=t[0],t=t[1],n=i.splice(n,1)[0],n=(i.splice(t,0,n),Lt(n.base)),t=Lt(i[t+1]&&i[t+1].base);n&&n.parentNode.insertBefore(n,t)}),t.added.forEach(function(t){i.splice(t,0,Ft(o[t],a[t],t,r))}),t.maintained.filter(function(t){t[0];var t=t[1],n=o[t],e=i[t];return(st(n)?"text_"+n:n.type)!==e.type?(e._unmount(),i.splice(t,1,Ft(n,a[t],t,r)),!0):(e.index=t,!1)}));return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.added,n.map(function(t){return t[0],t[1]}))}function Qt(e,r,i,o,a,s){var t=Jt(e,r,i),n=r.filter(function(t,n){return t._update(o,i[n],a,s)}),u=Ht(e);return u&&t.reverse().forEach(function(t){var t=r[t],n=Lt(t.base);n&&u!==n&&!n.parentNode&&(t=function(t,n){for(var e=t._providers,r=e.length,i=n.index+1;i<r;++i){var o=Lt(e[i].base);if(o)return o}return null}(e,t),u.insertBefore(n,t))}),0<n.length}function tn(t,n,e){var r,i,o=!!(e=void 0===e?n.__REACT_COMPAT__:e);e=e||new Ut(n),t=t?[t]:[],i=[],Qt(e,e._providers,t,i,r),It(i),o||(n.__REACT_COMPAT__=e)}function nn(t,n,e){var r=n.__REACT_COMPAT__;t&&!r&&(n.innerHTML=""),tn(t,n,r),e&&e()}var en="simple-1.1.0";function rn(t,n){for(var e=t.length,r=0;r<e;++r)if(n(t[r],r))return!0;return!1}function on(t,n){for(var e=t.length,r=0;r<e;++r)if(n(t[r],r))return t[r];return null}function an(t){if(void 0===t){if("undefined"==typeof navigator||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function sn(t,n){try{return new RegExp(t,"g").exec(n)}catch(t){return null}}function un(t){return t.replace(/_/g,".")}function cn(t,e){var r=null,i="-1";return rn(t,function(t){var n=sn("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);if(n&&!t.brand)return r=t,i=n[3]||"-1",t.versionAlias?i=t.versionAlias:t.versionTest&&(n=t.versionTest.toLowerCase(),i=((n=sn("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e))?n[3]:"")||i),i=un(i),1}),{preset:r,version:i}}function ln(t,e){var r={brand:"",version:"-1"};return rn(t,function(t){var n=fn(e,t);return n&&(r.brand=t.id,r.version=t.versionAlias||n.version,"-1"!==r.version)}),r}function fn(t,n){return on(t,function(t){t=t.brand;return sn(""+n.test,t.toLowerCase())})}var pn=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],dn=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],hn=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],gn=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],vn=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function mn(t){return!!cn(gn,t).preset}function bn(t){return void 0===t&&function(){var t;if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData)return(t=(t=navigator.userAgentData).brands||t.uaList)&&t.length}()?(i=((c=navigator.userAgentData).uaList||c.brands).slice(),o=r&&r.fullVersionList,a=c.mobile||!1,s=i[0],u=(r&&r.platform||c.platform||navigator.platform).toLowerCase(),c={name:s.brand,version:s.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ln(gn,i).brand||mn(an())},s={name:"unknown",version:"-1",majorVersion:-1},c.webkit=!c.chromium&&rn(hn,function(t){return fn(i,t)}),l=ln(dn,i),c.chromium=!!l.brand,c.chromiumVersion=l.version,c.chromium||(l=ln(hn,i),c.webkit=!!l.brand,c.webkitVersion=l.version),l=on(vn,function(t){return new RegExp(""+t.test,"g").exec(u)}),s.name=l?l.id:"",r&&(s.version=r.platformVersion),o&&o.length?(l=ln(pn,o),c.name=l.brand||c.name,c.version=l.version||c.version):(o=ln(pn,i),c.name=o.brand||c.name,c.version=o.brand&&r?r.uaFullVersion:o.version),c.webkit&&(s.name=a?"ios":"mac"),"ios"===s.name&&c.webview&&(c.version="-1"),s.version=un(s.version),c.version=un(c.version),s.majorVersion=parseInt(s.version,10),c.majorVersion=parseInt(c.version,10),{browser:c,os:s,isMobile:a,isHints:!0}):(l=an(l=t),r=!!/mobi/g.exec(l),o={name:"unknown",version:"-1",majorVersion:-1,webview:mn(l),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},c={name:"unknown",version:"-1",majorVersion:-1},a=(s=cn(pn,l)).preset,s=s.version,n=(t=cn(vn,l)).preset,t=t.version,e=cn(dn,l),o.chromium=!!e.preset,o.chromiumVersion=e.version,o.chromium||(e=cn(hn,l),o.webkit=!!e.preset,o.webkitVersion=e.version),n&&(c.name=n.id,c.version=t,c.majorVersion=parseInt(t,10)),a&&(o.name=a.id,o.version=s,o.webview&&"ios"===c.name&&"safari"!==o.name&&(o.webview=!1)),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!1});var n,e,r,i,o,a,s,u,c,l}function xn(t,n,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<e;++i)r[i*e+n-1]=0,r[(n-1)*e+i]=0;return r[(n-1)*(e+1)]=1,r}function y(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=t.slice(),r=I(n),i=0;i<n;++i){var o=n*i+i;if(!N(e[o],A))for(var a=i+1;a<n;++a)if(e[n*i+a]){v=g=h=d=p=f=l=c=u=s=void 0;for(var s=e,u=r,c=i,l=a,f=n,p=0;p<f;++p){var d=c+p*f,h=l+p*f,g=s[d],v=u[d];s[d]=s[h],s[h]=g,u[d]=u[h],u[h]=v}break}if(!N(e[o],A))return[];M=y=S=E=x=b=m=void 0;for(var m=e,b=r,x=i,E=n,S=e[o],y=0;y<E;++y){var M=x+y*E;m[M]/=S,b[M]/=S}for(a=0;a<n;++a){var R=a,D=e[a+i*n];if(N(D,A)&&i!==a){_=T=G=z=B=P=O=w=C=void 0;for(var C=e,w=r,O=R,P=i,B=n,z=-D,G=0;G<B;++G){var T=O+G*B,_=P+G*B;C[T]+=C[_]*z,w[T]+=w[_]*z}}}}return r}function En(t,n){for(var e=[],r=t[(n=void 0===n?Math.sqrt(t.length):n)*n-1],i=0;i<n-1;++i)e[i]=t[n*(n-1)+i]/r;return e[n-1]=0,e}function Sn(t,n){for(var e=I(n),r=0;r<n-1;++r)e[n*(n-1)+r]=t[r]||0;return e}function yn(t,n){for(var e=t.slice(),r=t.length;r<n-1;++r)e[r]=0;return e[n-1]=1,e}function P(t,n,e){if((n=void 0===n?Math.sqrt(t.length):n)===e)return t;for(var r=I(e),i=Math.min(n,e),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*e+a]=t[o*n+a];r[(o+1)*e-1]=t[(o+1)*n-1],r[(e-1)*e+o]=t[(n-1)*n+o]}return r[e*e-1]=t[n*n-1],r}function Mn(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var r=I(n);return t.forEach(function(t){r=K(r,t,n)}),r}function K(t,n,e){void 0===e&&(e=Math.sqrt(t.length));var r=[],i=t.length/e,o=n.length/i;if(!i)return n;if(!o)return t;for(var a=0;a<e;++a)for(var s=0;s<o;++s)for(var u=r[s*e+a]=0;u<i;++u)r[s*e+a]+=t[u*e+a]*n[s*i+u];return r}function J(t,n){for(var e=Math.min(t.length,n.length),r=t.slice(),i=0;i<e;++i)r[i]=r[i]+n[i];return r}function T(t,n){for(var e=Math.min(t.length,n.length),r=t.slice(),i=0;i<e;++i)r[i]=r[i]-n[i];return r}function Rn(t,n){return(n=void 0===n?6===t.length:n)?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Dn(t,n){return(n=void 0===n?9===t.length:n)?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function E(t,n,e){var t=K(t,n,e=void 0===e?n.length:e),r=t[e-1];return t.map(function(t){return t/r})}function Cn(t,n){return K(t,[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1],4)}function wn(t,n){return K(t,[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1],4)}function On(t,n){return K(t,Tn(n,4))}function Pn(t,n){var e=n[0],r=n[1],n=n[2];return K(t,[void 0===e?1:e,0,0,0,0,void 0===r?1:r,0,0,0,0,void 0===n?1:n,0,0,0,0,1],4)}function Bn(t,n){return E(Tn(n,3),yn(t,3))}function zn(t,n){var e=n[0],r=n[1],n=n[2];return K(t,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===e?0:e,void 0===r?0:r,void 0===n?0:n,1],4)}function Gn(t,n){return K(t,n,4)}function Tn(t,n){var e=Math.cos(t),t=Math.sin(t),r=I(n);return r[0]=e,r[1]=t,r[n]=-t,r[n+1]=e,r}function I(t){for(var n=t*t,e=[],r=0;r<n;++r)e[r]=r%(t+1)?0:1;return e}function _n(t,n){for(var e=I(n),r=Math.min(t.length,n-1),i=0;i<r;++i)e[(n+1)*i]=t[i];return e}function An(t,n){for(var e=I(n),r=Math.min(t.length,n-1),i=0;i<r;++i)e[n*(n-1)+i]=t[i];return e}function In(t,n,e,r,i,o,a,s){var u=t[0],t=t[1],c=n[0],n=n[1],l=e[0],e=e[1],f=r[0],r=r[1],p=i[0],i=i[1],d=o[0],o=o[1],h=a[0],a=a[1],g=s[0],s=s[1],u=y([u,0,c,0,l,0,f,0,t,0,n,0,e,0,r,0,1,0,1,0,1,0,1,0,0,u,0,c,0,l,0,f,0,t,0,n,0,e,0,r,0,1,0,1,0,1,0,1,-p*u,-i*u,-d*c,-o*c,-h*l,-a*l,-g*f,-s*f,-p*t,-i*t,-d*n,-o*n,-h*e,-a*e,-g*r,-s*r],8);if(!u.length)return[];c=K(u,[p,i,d,o,h,a,g,s],8);return c[8]=1,P(function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=[],r=0;r<n;++r)for(var i=0;i<n;++i)e[i*n+r]=t[n*r+i];return e}(c),3,4)}function kn(t){return Nn(Wn(t))}function Fn(t,n){t=E(t,[n[0],n[1]||0,n[2]||0,1],4),n=t[3]||1;return[t[0]/n,t[1]/n,t[2]/n]}function Nn(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var n=t.matrixFunction,t=t.functionValue;n&&(e=n(e,t))}),e}function Wn(t){return(at(t)?t:S(t)).map(function(t){var n,e,r,t=ht(t),i=t.prefix,t=t.value,o=null,a=i,s="";return"translate"===i||"translateX"===i||"translate3d"===i?(o=zn,s=[(r=dt(t).map(function(t){return parseFloat(t)}))[0],void 0===(n=r[1])?0:n,void 0===(n=r[2])?0:n]):"translateY"===i?(o=zn,s=[0,parseFloat(t),0]):"translateZ"===i?(o=zn,s=[0,0,parseFloat(t)]):"scale"===i||"scale3d"===i?(o=Pn,s=[e=(r=dt(t).map(function(t){return parseFloat(t)}))[0],void 0===(n=r[1])?e:n,void 0===(n=r[2])?1:n]):"scaleX"===i?(o=Pn,s=[e=parseFloat(t),1,1]):"scaleY"===i?(o=Pn,s=[1,parseFloat(t),1]):"scaleZ"===i?(o=Pn,s=[1,1,parseFloat(t)]):"rotate"===i||"rotateZ"===i||"rotateX"===i||"rotateY"===i?(n=(r=gt(t)).unit,e=r.value,"rotate"===i||"rotateZ"===i?(a="rotateZ",o=On):"rotateX"===i?o=Cn:"rotateY"===i&&(o=wn),s="rad"===n?e:e*Math.PI/180):"matrix3d"===i?(o=Gn,s=dt(t).map(function(t){return parseFloat(t)})):"matrix"===i?(o=Gn,s=[(r=dt(t).map(function(t){return parseFloat(t)}))[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,r[4],r[5],0,1]):a="",{name:i,functionName:a,value:t,matrixFunction:o,functionValue:s}})}var Yn=function(t,n){return(Yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var jn,qn="function"==typeof Map?void 0:(jn=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++jn)}),Xn=function(n){function t(){this.constructor=e}var e,r;function i(t){return n.call(this,t=void 0===t?[]:t,qn)||this}return Yn(e=i,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),i}(t);function Hn(t,n){return l(t,n,qn)}function Ln(e){return e.length<3?0:Math.abs(function(t){for(var n=0,e=t.length-1;0<=e;--e)n+=t[e];return n}(e.map(function(t,n){n=e[n+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function Vn(t,n){var e=n.width,r=n.height,i=n.left,o=n.top,n=Un(t),a=n.minX,s=n.minY,u=n.maxX,n=n.maxY,c=e/(u-a),l=r/(n-s);return t.map(function(t){return[i+(t[0]-a)*c,o+(t[1]-s)*l]})}function Un(t){var n=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]});return{minX:Math.min.apply(Math,n),minY:Math.min.apply(Math,t),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,t)}}function $n(t,n,e){var i=t[0],o=t[1],t=Un(n),r=t.minX,a=t.minY,s=t.maxX,t=t.maxY,u=[[r,o],[s,o]],c=[[i,a],[i,t]],l=Zn(u[0],u[1]),f=Zn(c[0],c[1]),r=Qn(n),p=[],d=[];return r.forEach(function(t){var n=Zn(t[0],t[1]),e=Jn(Kn(l,n),[u,t]),r=Jn(Kn(f,n),[c,t]);1===e.length&&t[0][1]===o||p.push.apply(p,e),1===r.length&&t[0][0]===i||d.push.apply(d,r),n[0]||p.push.apply(p,e),n[1]||d.push.apply(d,r)}),!e&&(-1<h(p,function(t){return t[0]===i})||-1<h(d,function(t){return t[1]===o}))||!!(p.filter(function(t){return t[0]>i}).length%2&&d.filter(function(t){return t[1]>o}).length%2)}function Zn(t,n){var e=t[0],t=t[1],r=n[0],n=n[1];return e===r&&t===n?[0,0,0]:e===r?[1,0,-e]:t===n?[0,1,-t]:[1,r=(r-e)/(t-n),-e-r*t]}function Kn(t,n){var e,r,i=t[0],o=t[1],t=t[2],a=n[0],s=n[1],n=n[2],u=0===i&&0===a,c=0===o&&0===s;return u&&c?[]:u?(u=-t/o)!=-n/s?[]:[[-1/0,u],[1/0,u]]:c?(u=-t/i)!=-n/a?[]:[[u,-1/0],[u,1/0]]:0===i?[[e=-(s*(r=-t/o)+n)/a,r]]:0===a?[[e=-(o*(r=-n/s)+t)/i,r]]:0===o?[[e=-t/i,r=-(a*e+n)/s]]:0===s?[[e=-n/a,r=-(i*e+t)/o]]:[[e=(o*n-s*t)/(s*i-o*a),r=-(i*e+t)/o]]}function Jn(t,n){var e=n.map(function(n){return[0,1].map(function(t){return[Math.min(n[0][t],n[1][t]),Math.max(n[0][t],n[1][t])]})});if(2===t.length){var r,i,n=t[0],o=n[0],n=n[1];if(o===t[1][0])return i=Math.max.apply(Math,e.map(function(t){return t[1][0]})),(r=Math.min.apply(Math,e.map(function(t){return t[1][1]})))<i?[]:[[o,i],[o,r]];if(n===t[1][1])return i=Math.max.apply(Math,e.map(function(t){return t[0][0]})),(o=Math.min.apply(Math,e.map(function(t){return t[0][1]})))<i?[]:[[i,n],[o,n]]}return t.filter(function(n){return e.every(function(t){return t[0][0]<=n[0]&&n[0]<=t[0][1]&&t[1][0]<=n[1]&&n[1]<=t[1][1]})})}function Qn(e){return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(e.slice(1),[e[0]]).map(function(t,n){return[e[n],t]})}function te(t,n){var i,a,s,u,c,l,e;return n=n,i=(t=t).slice(),a=n.slice(),-1===Dt(i)&&i.reverse(),-1===Dt(a)&&a.reverse(),s=Qn(i),u=Qn(a),t=s.map(function(t){return Zn(t[0],t[1])}),c=u.map(function(t){return Zn(t[0],t[1])}),l=[],t.forEach(function(e,r){var i=s[r],o=[];c.forEach(function(t,n){t=Jn(Kn(e,t),[i,u[n]]);o.push.apply(o,t.map(function(t){return{index1:r,index2:n,pos:t}}))}),o.sort(function(t,n){return g(i[0],t.pos)-g(i[0],n.pos)}),l.push.apply(l,o),$n(i[1],a)&&l.push({index1:r,index2:-1,pos:i[1]})}),u.forEach(function(t,e){var r,n;$n(t[1],i)&&(r=!1,-1===(n=h(l,function(t){if(t.index2!==e)return!!r;r=!0}))&&(r=!1,n=h(l,function(t){var n=t.index1,t=t.index2;if(-1!==n||t+1!==e)return!!r;r=!0})),-1===n?l.push({index1:-1,index2:e,pos:t[1]}):l.splice(n,0,{index1:-1,index2:e,pos:t[1]}))}),n=l.map(function(t){return t.pos}),e={},Ln(n.filter(function(t){t=t[0]+"x"+t[1];return!e[t]&&(e[t]=!0)}))}var ne=function(){return(ne=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var ee=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(ot(t))for(var e in t)this.on(e,t[e]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(ot(t))for(var e in t)this.off(e);else{var r,i;n?(r=this._events[t])&&-1<(i=h(r,function(t){return t.listener===n}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},n.once=function(n,t){var e=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(t){e._addEvent(n,t,{once:!0})})},n.emit=function(n,e){var r=this,t=(void 0===e&&(e={}),this._events[n]);if(!n||!t)return!0;var i=!1;return e.eventType=n,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(e),t.once&&r.off(n,t.listener)}),!i},n.trigger=function(t,n){return this.emit(t,n=void 0===n?{}:n)},n._addEvent=function(t,n,e){var r=this._events;r[t]=r[t]||[],r[t].push(ne({listener:n},e))},t}(),re=function(t,n){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var ie=function(){return(ie=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function oe(t){t=t.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}var ae=function(n){function t(){this.constructor=e}var e;function r(){var t=null!==n&&n.apply(this,arguments)||this;return t._startRect=null,t._startPos=[],t._prevTime=0,t._timer=0,t._prevScrollPos=[0,0],t._isWait=!1,t}re(e=r,i=n),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t);var i=r.prototype;return i.dragStart=function(t,n){var e=n.container,r=0,i=0,o=0,a=0;a=e===document.body?(o=window.innerWidth,window.innerHeight):(r=(e=e.getBoundingClientRect()).top,i=e.left,o=e.width,e.height),this._startPos=[t.clientX,t.clientY],this._startRect={top:r,left:i,width:o,height:a},this._prevScrollPos=this._getScrollPosition([0,0],n)},i.drag=function(t,n){var e=t.clientX,r=t.clientY,i=n.threshold,i=void 0===i?0:i,o=this._startRect,a=this._startPos,s=[0,0];return o.top>r-i?(a[1]>o.top||r<a[1])&&(s[1]=-1):o.top+o.height<r+i&&(a[1]<o.top+o.height||r>a[1])&&(s[1]=1),o.left>e-i?(a[0]>o.left||e<a[0])&&(s[0]=-1):o.left+o.width<e+i&&(a[0]<o.left+o.width||e>a[0])&&(s[0]=1),clearTimeout(this._timer),!(!s[0]&&!s[1])&&this._continueDrag(ie(ie({},n),{direction:s,inputEvent:t,isDrag:!0}))},i.checkScroll=function(t){var n=this;if(this._isWait)return!1;var e=t.prevScrollPos,e=void 0===e?this._prevScrollPos:e,r=t.direction,i=t.throttleTime,i=void 0===i?0:i,o=t.inputEvent,a=t.isDrag,s=this._getScrollPosition(r||[0,0],t),u=s[0]-e[0],e=s[1]-e[1],r=r||[u?Math.abs(u)/u:0,e?Math.abs(e)/e:0];return this._prevScrollPos=s,!(!u&&!e)&&(this.trigger("move",{offsetX:r[0]?u:0,offsetY:r[1]?e:0,inputEvent:o}),i&&a&&(this._timer=window.setTimeout(function(){n._continueDrag(t)},i)),!0)},i.dragEnd=function(){clearTimeout(this._timer)},i._getScrollPosition=function(t,n){var e=n.container,n=n.getScrollPosition;return(void 0===n?oe:n)({container:e,direction:t})},i._continueDrag=function(t){var n=this,e=t.container,r=t.direction,i=t.throttleTime,o=t.useScroll,a=t.isDrag,s=t.inputEvent;if(!a||!this._isWait){var u=mt(),i=Math.max(i+this._prevTime-u,0);if(0<i)return this._timer=window.setTimeout(function(){n._continueDrag(t)},i),!1;this._prevTime=u;i=this._getScrollPosition(r,t);return this._prevScrollPos=i,a&&(this._isWait=!0),this.trigger("scroll",{container:e,direction:r,inputEvent:s}),this._isWait=!1,o||this.checkScroll(ie(ie({},t),{prevScrollPos:i,direction:r,inputEvent:s}))}},r}(ee),se=function(t,n){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var b=function(){return(b=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function ue(t){return 180*(n=[t[0].clientX,t[0].clientY],t=[t[1].clientX,t[1].clientY],e=t[0]-n[0],t=t[1]-n[1],(0<=(n=Math.atan2(t,e))?n:n+2*Math.PI)/Math.PI);var n,e}function ce(t){if(!t)return[];if(t.touches){for(var n=t.touches,e=Math.min(n.length,2),r=[],i=0;i<e;++i)r.push(pe(n[i]));return r}return[pe(t)]}function le(t,n,e){var r=e.length,t=de(t,r),i=t.clientX,o=t.clientY,a=t.originalClientX,t=t.originalClientY,n=de(n,r),s=n.clientX,n=n.clientY,e=de(e,r);return{clientX:a,clientY:t,deltaX:i-s,deltaY:o-n,distX:i-e.clientX,distY:o-e.clientY}}function fe(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function pe(t){return{clientX:t.clientX,clientY:t.clientY}}function de(t,n){void 0===n&&(n=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<n;++r){var i=t[r];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return n?{clientX:e.clientX/n,clientY:e.clientY/n,originalClientX:e.originalClientX/n,originalClientY:e.originalClientY/n}:e}var he=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.getAngle=function(t){return ue(t=void 0===t?this.prevClients:t)},n.getRotation=function(t){return ue(t=void 0===t?this.prevClients:t)-ue(this.startClients)},n.getPosition=function(t,n){var e=le((t=void 0===t?this.prevClients:t)||this.prevClients,this.prevClients,this.startClients),r=e.deltaX,i=e.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,e},n.getPositions=function(e){void 0===e&&(e=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,n){return le([e[n]],[r[n]],[t])})},n.getMovement=function(t){var n=this.movement;if(!t)return n;var t=de(t,this.length),e=de(this.prevClients,this.length),r=t.clientX-e.clientX,t=t.clientY-e.clientY;return Math.sqrt(r*r+t*t)+n},n.getDistance=function(t){return fe(t=void 0===t?this.prevClients:t)},n.getScale=function(t){return fe(t=void 0===t?this.prevClients:t)/fe(this.startClients)},n.move=function(n,e){this.startClients.forEach(function(t){t.clientX-=n,t.clientY-=e})},t}(),ge=["textarea","input"],ve=function(o){function t(){this.constructor=n}var n;function e(t,n){void 0===n&&(n={});var e,d=o.call(this)||this,t=(d.options={},d.flag=!1,d.pinchFlag=!1,d.datas={},d.isDrag=!1,d.isPinch=!1,d.isMouse=!1,d.isTouch=!1,d.clientStores=[],d.targets=[],d.prevTime=0,d.doubleFlag=!1,d._dragFlag=!1,d.onDragStart=function(t,n){if(void 0===n&&(n=!0),d.flag||!1!==t.cancelable){var e=d.options,r=e.container,i=e.pinchOutside,o=e.preventRightClick,a=e.preventDefault,e=e.checkInput,s=d.isTouch,u=!d.flag;if(u){var c=document.activeElement,l=t.target,f=l.tagName.toLowerCase(),f=-1<ge.indexOf(f),p=l.isContentEditable;if(f||p){if(e||c===l)return!1;if(c&&p&&c.isContentEditable&&c.contains(l))return!1}else(a||"touchstart"===t.type)&&c&&(f=c.tagName,(c.isContentEditable||-1<ge.indexOf(f))&&c.blur());if(d.clientStores=[new he(ce(t))],d.flag=!0,d.isDrag=!1,d._dragFlag=!0,d.datas={},o&&(3===t.which||2===t.button))return d.initDrag(),!1;d.doubleFlag=mt()-d.prevTime<200,!1===d.emit("dragStart",b(b({datas:d.datas,inputEvent:t,isTrusted:n,isDouble:d.doubleFlag},d.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){d._dragFlag=!1}}))&&d.initDrag(),d.flag&&a&&t.preventDefault()}if(!d.flag)return!1;e=0;u&&s&&i&&(e=setTimeout(function(){Pt(r,"touchstart",d.onDragStart,{passive:!1})})),!u&&s&&i&&v(r,"touchstart",d.onDragStart),d.flag&&((p=t).touches&&2<=p.touches.length)&&(clearTimeout(e),u&&t.touches.length!==t.changedTouches.length||d.pinchFlag||d.onPinchStart(t))}},d.onDrag=function(t,n){if(d.flag){var e=ce(t),r=d.moveClients(e,t,!1);if(d._dragFlag){if(d.pinchFlag||r.deltaX||r.deltaY)if(!1===d.emit("drag",b(b({},r),{isScroll:!!n,inputEvent:t})))return void d.stop();d.pinchFlag&&d.onPinch(t,e)}d.getCurrentStore().getPosition(e,!0)}},d.onDragEnd=function(t){var n,e,r;d.flag&&(e=(n=d.options).pinchOutside,n=n.container,d.isTouch&&e&&v(n,"touchstart",d.onDragStart),d.pinchFlag&&d.onPinchEnd(t),0!==(e=null!=t&&t.touches?ce(t):[]).length&&d.options.keepDragging?d._addStore(new he(e)):d.flag=!1,n=d._getPosition(),e=mt(),r=!d.isDrag&&d.doubleFlag,d.prevTime=d.isDrag||r?0:e,d.flag||(d.emit("dragEnd",b({datas:d.datas,isDouble:r,isDrag:d.isDrag,isClick:!d.isDrag,inputEvent:t},n)),d.clientStores=[]))},d.onBlur=function(){d.onDragEnd()},[].concat(t)),n=(d.options=b({checkInput:!1,container:1<t.length?window:t[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n),d.options),r=n.container,i=n.events,n=n.checkWindowBlur;return d.isTouch=-1<i.indexOf("touch"),d.isMouse=-1<i.indexOf("mouse"),d.targets=t,d.isMouse&&(t.forEach(function(t){Pt(t,"mousedown",d.onDragStart)}),Pt(r,"mousemove",d.onDrag),Pt(r,"mouseup",d.onDragEnd),Pt(r,"contextmenu",d.onDragEnd)),n&&Pt(window,"blur",d.onBlur),d.isTouch&&(e={passive:!1},t.forEach(function(t){Pt(t,"touchstart",d.onDragStart,e)}),Pt(r,"touchmove",d.onDrag,e),Pt(r,"touchend",d.onDragEnd,e),Pt(r,"touchcancel",d.onDragEnd,e)),d}se(n=e,r=o),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var r=e.prototype;return r.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},r.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,n){return t+n.movement},0)},r.isDragging=function(){return this.isDrag},r.isFlag=function(){return this.flag},r.isPinchFlag=function(){return this.pinchFlag},r.isDoubleFlag=function(){return this.doubleFlag},r.isPinching=function(){return this.isPinch},r.scrollBy=function(t,n,e,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,n),r&&this.onDrag(e,!0))},r.move=function(t,n){var e=t[0],r=t[1],t=this.getCurrentStore().prevClients;return this.moveClients(t.map(function(t){var n=t.clientX,t=t.clientY;return{clientX:n+e,clientY:t+r,originalClientX:n,originalClientY:t}}),n,!0)},r.triggerDragStart=function(t){this.onDragStart(t,!1)},r.setEventDatas=function(t){var n,e=this.datas;for(n in t)e[n]=t[n];return this},r.getCurrentEvent=function(t){return b(b({datas:this.datas},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},r.getEventDatas=function(){return this.datas},r.unset=function(){var n=this,t=this.targets,e=this.options.container;this.off(),v(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){v(t,"mousedown",n.onDragStart)}),v(e,"mousemove",this.onDrag),v(e,"mouseup",this.onDragEnd),v(e,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){v(t,"touchstart",n.onDragStart)}),v(e,"touchstart",this.onDragStart),v(e,"touchmove",this.onDrag),v(e,"touchend",this.onDragEnd),v(e,"touchcancel",this.onDragEnd))},r.onPinchStart=function(t){var n=this.options.pinchThreshold;this.isDrag&&this.getMovement()>n||(n=new he(ce(t)),this.pinchFlag=!0,this._addStore(n),!1===this.emit("pinchStart",b(b({datas:this.datas,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition()),{inputEvent:t}))&&(this.pinchFlag=!1))},r.onPinch=function(t,n){var e;!this.flag||!this.pinchFlag||n.length<2||(e=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",b(b({datas:this.datas,movement:this.getMovement(n),angle:e.getAngle(n),rotation:e.getRotation(n),touches:e.getPositions(n),scale:e.getScale(n),distance:e.getDistance(n)},e.getPosition(n)),{inputEvent:t})))},r.onPinchEnd=function(t){var n,e;this.pinchFlag&&(n=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,e=this.getCurrentStore(),this.emit("pinchEnd",b(b({datas:this.datas,isPinch:n,touches:e.getPositions()},e.getPosition()),{inputEvent:t})))},r.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},r.getCurrentStore=function(){return this.clientStores[0]},r.moveClients=function(t,n,e){e=this._getPosition(t,e);return(e.deltaX||e.deltaY)&&(this.isDrag=!0),b(b({datas:this.datas},e),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},r._addStore=function(t){this.clientStores.splice(0,0,t)},r._getPosition=function(t,n){var t=this.getCurrentStore().getPosition(t,n),n=this.clientStores.slice(1).reduce(function(t,n){n=n.getPosition();return t.distX+=n.distX,t.distY+=n.distY,t},t),e=n.distX,n=n.distY;return b(b({},t),{distX:e,distY:n})},e}(ee);var me=function(t){for(var n=5381,e=t.length;e;)n=33*n^t.charCodeAt(--e);return n>>>0};function be(t,n,e,r){var i,o=document.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),e.nonce&&o.setAttribute("nonce",e.nonce),o.innerHTML=(i=t,t=n,e.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,n){n=n.trim();return(n?dt(n):[""]).map(function(t){t=t.trim();return 0===t.indexOf("@")?t:-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+i):t?"."+i+" "+t:"."+i}).join(", ")+" {"})),(r||document.head||document.body).appendChild(o),o}function xe(o){var a,s="rCS"+me(o).toString(36),u=0;return{className:s,inject:function(t,n){void 0===n&&(n={});var e,r=function(t){if(t&&t.getRootNode){t=t.getRootNode();if(11===t.nodeType)return t}}(t),i=0===u;return(r||i)&&(e=be(s,o,n,r)),i&&(a=e),r||++u,{destroy:function(){r?(t.removeChild(e),e=null):(0<u&&--u,0===u&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var Ee=function(t,n){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function Se(t,n){function e(){this.constructor=t}Ee(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var ye=function(){return(ye=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var Me=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}Se(t,n);var e=t.prototype;return e.render=function(){var t=this.props,n=t.className,n=void 0===n?"":n,e=(t.cspNonce,t.portalContainer),t=function(t,n){var e={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]]);return e}(t,["className","cspNonce","portalContainer"]),r=this.injector.className,i=this.tag,o={};return-1<en.indexOf("simple")&&e&&(o={portalContainer:e}),m(i,ye({ref:x(this,"element"),"data-styled-id":r,className:n+" "+r},o,t))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},t}(Yt);function Re(e,t){var r=xe(t);return function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=r,t.tag=e,t}return Se(t,n),t}(Me)}var De=function(t,n){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)};function Ce(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}De(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var w=function(){return(w=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Q(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||((r=r||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}function we(t,n){var e;return w({events:{},props:((e={})[t]=Boolean,e),name:t},n)}var Oe=bn().browser.webkit,Pe=Oe&&(t="undefined"==typeof window?{userAgent:""}:window.navigator,!!(t=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase()))&&parseFloat(t[1])<605),Be="moveable-",ze="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'.concat(t,'"] {\n\t').concat((e=t=t,n='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*(n=1),'px" height="').concat(32*n,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>'),e=45*Math.round(t/45)%180,t="ns-resize",135==e?t="nwse-resize":45==e?t="nesw-resize":90==e&&(t="ew-resize"),"cursor:".concat(t,";cursor: url('").concat(n,"') 16 16, ").concat(t,";")),"\n}\n");var n,e}).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(Pe?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),Ge=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Te=1e-4,_e=1e-7,Ae=Math.pow(10,10),Ie=-Ae,ke=["n","w","s","e","nw","ne","sw","se"],Fe={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Ne={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},We=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate"];function Ye(t,n,e,r,i){var e=n.gesto.move(e,t.inputEvent),o=e.originalDatas||e.datas,o=o.draggable||(o.draggable={});return w(w({},i?Qi(n,e):e),{isPinch:!!r,parentEvent:!0,datas:o,originalDatas:t.originalDatas})}var je=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var e=n.originalDatas;return(this.datas=e).draggable||(e.draggable={}),w(w({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var e,r;return this.isFlag?(e=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],e=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=e,clientY:this.prevY=r,inputEvent:n,isDrag:this.isDrag,distX:e-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function qe(t,e,r){var n=r.originalDatas,n=(n.groupable=n.groupable||{},n.groupable),i=(n.childDatas=n.childDatas||[],n.childDatas);return t.moveables.map(function(t,n){return i[n]=i[n]||{},i[n][e]=i[n][e]||{},w(w({},r),{datas:i[n][e],originalDatas:i[n]})})}function Xe(t,o,a,s,n,u){var c=!!a.match(/Start$/g),l=!!a.match(/End$/g),f=n.isPinch,p=n.datas,n=qe(t,o.name,n),d=t.moveables,t=n.map(function(t,n){var e=d[n],r=e.state,i=t;if(c)i=(new je).dragStart(s,t);else{if(r.gesto||(r.gesto=p.childGestos[n]),!r.gesto)return;i=Ye(t,r,s,f,u)}n=o[a](e,w(w({},i),{parentFlag:!0}));return l&&(r.gesto=null),n});return c&&(p.childGestos=d.map(function(t){return t.state.gesto})),t}function He(t,i,o,n,a,s){void 0===a&&(a=function(t,n){return n});var u=!!o.match(/End$/g),n=qe(t,i.name,n),c=t.moveables;return n.map(function(t,n){var e=c[n],r=a(e,t),r=i[o](e,w(w({},r),{parentFlag:!0}));return r&&s&&s(e,t,r,n),u&&(e.state.gesto=null),r})}function Le(t,n,r,i){void 0===i&&(i="");var e=t.state,o=e.renderPoses,a=e.rotation,e=e.direction,t=t.props,s=t.renderDirections,n=void 0===s?n:s,u=t.zoom,c={};if(!n)return[];var l=0<e?1:-1,s=!0===n?ke:n,f=a/Math.PI*180;return s.forEach(function(t){c[t]=!0}),s.map(function(t){var n=Fe[t];if(!n||!c[t])return null;var e=(N(f,15)+l*Ne[t]+720)%180;return r.createElement("div",{className:k("control","direction",t,i),"data-rotation":e,"data-direction":t,key:"direction-".concat(t),style:ki.apply(void 0,Q([a,u],n.map(function(t){return o[t]}),!1))})})}function Ve(t,n,e,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=F(e,r),c=n?N(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(o),className:k.apply(void 0,Q(["line","direction",n],a,!1)),"data-rotation":c,"data-line-index":o,"data-direction":n,style:Ii(e,r,i,u)})}function Ue(t,n){return Le(t,ke,n)}function $e(t,n){return Le(t,["nw","ne","sw","se"],n)}function Ze(t,n,e,r,i,o){var a=t.state.is3d?4:3,t=Y(t.state.rootMatrix,i,a),i=J([o.left,o.top],t);n.startAbsoluteOrigin=i,n.prevDeg=F(i,[e,r])/Math.PI*180,n.defaultDeg=n.prevDeg,n.prevSnapDeg=0,n.loop=0}function Ke(t,n,e){var r=e.defaultDeg,i=e.prevDeg,o=i%360,i=Math.floor(i/360),o=(o<0&&(o+=360),t<o&&270<o&&t<90?++i:o<t&&o<90&&270<t&&--i,n*(360*i+t-r));return e.prevDeg=r+o,o}function Je(t,n,e,r){return Ke(F(r.startAbsoluteOrigin,[t,n])/Math.PI*180,e,r)}function Qe(t,n,e,r,i,o){var a=t.props.throttleRotate,a=void 0===a?0:a,s=e.prevSnapDeg,o=(o&&(r=function(t,n,e,r){if(!or(t,"rotatable"))return r;var i=n.pos1,o=n.pos2,a=n.pos3,n=n.pos4,s=r*Math.PI/180,i=[i,o,a,n].map(function(t){return T(t,e)}),o=i.map(function(t){return Bn(t,s)}),a=Q(Q([],function(t,s,n,e,r){if(!t.props.bounds)return[];var u=r*Math.PI/180,r=Or(t),t=r.left,i=r.top,o=r.right,r=r.bottom,t=t-e[0],o=o-e[0],i=i-e[1],r=r-e[1],c={left:t,top:i,right:o,bottom:r};if(!Br(n,c,0))return[];var l=[];return[[t,0],[o,0],[i,1],[r,1]].forEach(function(t){var o=t[0],a=t[1];n.forEach(function(t){var e,n,r,i=F([0,0],t);l.push.apply(l,(n=o,r=a,t=_i(e=t),[t=Math.sqrt(t*t-n*n)||0,-t].sort(function(t,n){return Math.abs(t-e[r?0:1])-Math.abs(n-e[r?0:1])}).map(function(t){return F([0,0],r?[t,n]:[n,t])}).map(function(t){return u+t-i}).filter(function(t){return!Br(s,c,t)}).map(function(t){return N(180*t/Math.PI,_e)})))})}),l}(t,i,o,e,r),!0),function(t,n,e,r,i){var t=t.props.innerBounds,o=i*Math.PI/180;if(!t)return[];var i=t.left,a=t.top,s=t.width,t=t.height,u=i-r[0],i=i+s-r[0],s=a-r[1],a=a+t-r[1],c=[[u,s],[i,s],[u,a],[i,a]],l=W(e,[0,0]);if(!Cr(e,c,l,0))return[];var f=[],p=c.map(function(t){return[_i(t),F([0,0],t)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(t){var e=F([0,0],function(t){var n=t[0],t=t[1],e=t[0]-n[0],t=t[1]-n[1];if(!e)return[n[0],0];if(!t)return[0,n[1]];t/=e,e=-t*n[0]+n[1];return[-e/(t+1/t),e/(t*t+1)]}(t)),r=function(t){var n=t[0],t=t[1],e=t[0]-n[0],t=t[1]-n[1];if(!e)return Math.abs(n[0]);if(!t)return Math.abs(n[1]);t/=e;return Math.abs((-t*n[0]+n[1])/Math.sqrt(Math.pow(t,2)+1))}(t);f.push.apply(f,p.filter(function(t){t=t[0];return t&&r<=t}).map(function(t){var n=t[0],t=t[1],n=Math.acos(n?r/n:0);return[o+(t+n)-e,o+(t-n)-e]}).reduce(function(t,n){return t.push.apply(t,n),t},[]).filter(function(t){return!Cr(n,c,l,t)}).map(function(t){return N(180*t/Math.PI,_e)}))}),f}(t,i,o,e,r),!0);return a.sort(function(t,n){return Math.abs(t-r)-Math.abs(n-r)}),a.length?a[0]:r}(t,n,e.origin,r)),N(i+r,a)),t=o-i;return[(e.prevSnapDeg=t)-s,r,o]}function tr(t,n){if(n.isRequest)return"rotatable"===n.requestAble;var e=n.inputEvent.target;if(a(e,k("rotation-control")))return!0;n=t.props.rotationTarget;return!!n&&ao(n,!0).some(function(t){return!!t&&(e===t||e.contains(t))})}var t={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,n){var e=t.props,r=e.rotatable,i=e.rotationPosition,o=e.zoom,e=e.renderDirections,a=t.state,s=a.renderPoses,a=a.direction;if(!r)return null;r=function(t,n,e){var r,i,o=n[0],a=n[1],s=n[2],n=n[3];if("none"!==t)return t=(t||"top").split("-"),r=t[0],t=t[1],i=[o,a],"left"===r?i=[s,o]:"right"===r?i=[a,n]:"bottom"===r&&(i=[n,s]),o=[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2],a=Ni(i,e),t&&(n="bottom"===r||"left"===r,o=i[(s="top"===t||"left"===t)&&!n||!s&&n?0:1]),[o,a]}(i,s,a),i=[];return r&&(s=r[0],a=r[1],i.push(n.createElement("div",{key:"rotation",className:k("rotation"),style:{transform:"translate(-50%) translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(a,"rad)")}},n.createElement("div",{className:k("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),n.createElement("div",{className:k("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))),e&&i.push.apply(i,Le(t,[],n)),i},dragControlCondition:tr,dragControlStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,c=t.state,l=c.target,f=c.left,p=c.top,d=c.origin,h=c.beforeOrigin,g=c.direction,v=c.beforeDirection,m=c.targetTransform,c=c.moveableClientRect;if(!u&&!l)return!1;l=t.getRect(),e.rect=l,e.transform=m,e.left=f,e.top=p,e.fixedPosition=gi(t,hi(t)),u||s||a?(e.beforeInfo={origin:l.beforeOrigin,prevDeg:m=o||0,defaultDeg:m,prevSnapDeg:0},e.afterInfo=w(w({},e.beforeInfo),{origin:l.origin}),e.absoluteInfo=w(w({},e.beforeInfo),{origin:l.origin,startValue:m})):(e.beforeInfo={origin:l.beforeOrigin},e.afterInfo={origin:l.origin},e.absoluteInfo={origin:l.origin,startValue:l.rotation},Ze(t,e.beforeInfo,r,i,h,c),Ze(t,e.afterInfo,r,i,d,c),Ze(t,e.absoluteInfo,r,i,d,c)),e.direction=g,e.beforeDirection=v,e.startValue=0,e.datas={},ui(n,"rotate"),f=tt(t,n,w(w({set:function(t){e.startValue=t*Math.PI/180}},si(n)),{dragStart:_.dragStart(t,(new je).dragStart([0,0],n))})),p=nt(t,"onRotateStart",f);return e.isRotate=!1!==p,t.state.snapRenderInfo={request:n.isRequest},!!e.isRotate&&f},dragControl:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.groupDelta,c=e.beforeDirection,l=e.beforeInfo,f=e.afterInfo,p=e.absoluteInfo,d=e.isRotate,h=e.startValue,g=e.rect;if(d){Qr(n,"rotate");var v,m,b,x,d=c*Ti(n.datas.beforeTransform,[50,50],100,100).direction,E=t.props.parentMoveable,S=180/Math.PI*h,h=p.startValue,y=!1;if(!a&&"parentDist"in n?(v=n.parentDist,x=b=m=v):s||a?(m=Ke(o,c,l),b=Ke(o,d,f),x=Ke(o,d,p)):(m=Je(r,i,c,l),b=Je(r,i,d,f),x=Je(r,i,d,p),y=!0),nt(t,"onBeforeRotate",tt(t,n,{beforeRotation:S+m,rotation:S+b,absoluteRotation:h+x,setRotation:function(t){x=m=b=t-S}},!0)),a=(v=Qe(t,g,l,m,S,y))[0],m=v[1],o=v[2],r=(c=Qe(t,g,f,b,S,y))[0],b=c[1],i=c[2],l=(d=Qe(t,g,p,x,h,y))[0],x=d[1],v=d[2],l||r||a||E)return f=ti(e,"rotate(".concat(i,"deg)"),"rotate(".concat(b,"deg)")),c=b,g=e.fixedPosition,p=e,h=hi(t),d=T(J(u||[0,0],y=di(t,"rotate(".concat(c,"deg)"),h,g,p)),e.prevInverseDist||[0,0]),e.prevInverseDist=y,e.requestValue=null,E=tt(t,n,w({delta:r,dist:b,rotate:i,rotation:i,beforeDist:m,beforeDelta:a,beforeRotate:o,beforeRotation:o,absoluteDist:x,absoluteDelta:l,absoluteRotate:v,absoluteRotation:v,isPinch:!!s},pi(t,f,d,s,n))),nt(t,"onRotate",E),E}},dragControlAfter:function(t,n){n.datas.requestValue},dragControlEnd:function(t,n){var e=n.datas;if(e.isRotate)return e.isRotate=!1,e=Vi(t,n,{}),nt(t,"onRotateEnd",e),e},dragGroupControlCondition:tr,dragGroupControlStart:function(t,n){var e=n.datas,r=t.state,i=r.left,o=r.top,a=r.beforeOrigin,r=this.dragControlStart(t,n);if(!r)return!1;r.set(e.beforeDirection*t.rotation);n=He(t,this,"dragControlStart",n,function(t,n){var t=t.state,e=t.left,r=t.top,t=t.beforeOrigin,e=J(T([e,r],[i,o]),T(t,a));return n.datas.groupClient=e,w(w({},n),{parentRotate:0})}),t=nt(t,"onRotateGroupStart",w(w({},r),{targets:t.props.targets,events:n}));return e.isRotate=!1!==t,!!e.isRotate&&r},dragGroupControl:function(n,e){var t=e.datas;if(t.isRotate){Ui(n,"onBeforeRotate",function(t){nt(n,"onBeforeRotateGroup",tt(n,e,w(w({},t),{targets:n.props.targets}),!0))});var a,s,u,r=this.dragControl(n,e);if(r)return a=t.beforeDirection,s=r.beforeDist,u=r.beforeDelta/180*Math.PI,t=He(n,this,"dragControl",e,function(t,n){var e=n.datas.groupClient,r=e[0],e=e[1],i=Bn([r,e],u*a),o=i[0],i=i[1],r=[o-r,i-e];return n.datas.groupClient=[o,i],w(w({},n),{parentRotate:s,groupDelta:r})}),n.rotation=a*r.beforeRotation,t=w({targets:n.props.targets,events:t,set:function(t){n.rotation=t},setGroupRotation:function(t){n.rotation=t}},r),nt(n,"onRotateGroup",t),t}},dragGroupControlEnd:function(t,n){var e,r=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),e=He(t,this,"dragControlEnd",n),nt(t,"onRotateGroupEnd",Vi(t,n,{targets:t.props.targets,events:e})),r},request:function(t){var n={},e=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaRotate"in t?e+=t.deltaRotate:"rotate"in t&&(e=t.rotate-r),{datas:n,parentDist:e}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},nr=["left","right","center"],er=["top","bottom","middle"],rr={start:"left",end:"right",center:"center"},ir={start:"top",end:"bottom",center:"middle"};function or(t,n){var e=t.props,r=e.snappable,i=e.bounds,o=e.innerBounds,a=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,e=e.snapGridHeight,t=t.state,c=t.guidelines,t=t.enableSnap;return r&&t&&!(n&&!0!==r&&r.indexOf(n)<0)&&!!(u||e||i||o||c&&c.length||a&&a.length||s&&s.length)}function ar(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function sr(t,n){var e=function(t,n){var e,r=ar(t),i={};for(e in r)e in n&&r[e]&&(i[e]=n[e]);return i}(t,n),t=er.filter(function(t){return t in e}),n=nr.filter(function(t){return t in e});return{horizontal:t.map(function(t){return e[t]}),vertical:n.map(function(t){return e[t]})}}function ur(t,n,e,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0);var s=[],u=(a=void 0===a?{left:0,top:0,right:0,bottom:0}:a).left,c=a.top,l=a.bottom,f=e+a.right-u,p=r+l-c;return t&&t.forEach(function(t){s.push({type:"horizontal",pos:[u,N(t-o+c,.1)],size:f})}),n&&n.forEach(function(t){s.push({type:"vertical",pos:[N(t-i+u,.1),c],size:p})}),s}function cr(t,n){if(!n.length)return[];var t=t.state,e=t.containerClientRect,r=t.targetClientRect,i=r.top,r=r.left,o=t.rootMatrix,a=t.is3d?4:3,e=(c=Y(c=o,[(e=e).clientLeft,e.clientTop],a),[e.left+c[0],e.top+c[1]]),s=e[0],u=e[1],c=Un(Hi(t)),e=T([c.minX,c.minY],Ji(o,[r-s,i-u],a)).map(function(t){return t=t,Math.round(t%1==-.5?t-1:t)}),l=e[0],f=e[1];return n.map(function(t){var n=t.element.getBoundingClientRect(),e=n.left-s,r=n.top-u,i=r+n.height,n=e+n.width,e=Ji(o,[e,r],a),r=e[0],e=e[1],n=Ji(o,[n,i],a),i=n[0],n=n[1];return w(w({},t),{rect:{left:r+l,right:i+l,top:e+f,bottom:n+f,center:(r+i)/2+l,middle:(e+n)/2+f}})})}function lr(t){var n,e,r,o,v,u,m,i=t.state,a=i.snapOffset,i=i.containerClientRect,s=i.overflow,c=i.scrollHeight,l=i.scrollWidth,f=i.clientHeight,p=i.clientWidth,d=i.clientLeft,i=i.clientTop,h=t.props,g=h.snapGap,g=void 0===g||g,b=h.verticalGuidelines,x=h.horizontalGuidelines,E=h.snapThreshold,E=void 0===E?5:E,S=h.snapGridWidth,S=void 0===S?0:S,h=h.snapGridHeight,h=void 0===h?0:h,y=Q([],function(t){var n=t.state,e=t.props.elementGuidelines;if(!(e=void 0===e?[]:e).length)return n.elementRects=[],[];var r=(n.elementRects||[]).filter(function(t){return!t.refresh}),i=e.map(function(t){return ot(t)&&"element"in t?t:{element:oo(t,!0)}}).filter(function(t){return t.element}),o=(e=Hn(r.map(function(t){return t.element}),i.map(function(t){return t.element}))).maintained,a=e.added,s=[],g=(o.forEach(function(t){var n=t[0],t=t[1];s[t]=r[n]}),cr(t,a.map(function(t){return i[t]})).map(function(t,n){s[a[n]]=t}),n.elementRects=s,ar(t.props.elementSnapDirections)),v=[];return s.forEach(function(n){var e=n.element,t=n.top,t=void 0===t?g.top:t,r=n.left,r=void 0===r?g.left:r,i=n.right,i=void 0===i?g.right:i,o=n.bottom,o=void 0===o?g.bottom:o,a=n.center,a=void 0===a?g.center:a,s=n.middle,s=void 0===s?g.middle:s,u=n.className,c=n.rect,t=sr({top:t,right:i,left:r,bottom:o,center:a,middle:s},c),i=t.horizontal,r=t.vertical,l=c.top,f=c.left,p=c.right-f,d=c.bottom-l,h=[p,d];r.forEach(function(t){v.push({type:"vertical",element:e,pos:[N(t,.1),l],size:d,sizes:h,className:u,elementRect:n})}),i.forEach(function(t){v.push({type:"horizontal",element:e,pos:[f,N(t,.1)],size:p,sizes:h,className:u,elementRect:n})})}),v}(t),!0);return g&&(n=(g=zi(Hi(t.state))).top,e=g.left,r=g.bottom,g=g.right,y.push.apply(y,(o={top:n,left:e,bottom:r,right:g,center:(e+g)/2,middle:(n+r)/2},v=E,u=t.state.elementRects,m=[],[["vertical",rr,ir],["horizontal",ir,rr]].forEach(function(t){var f=t[0],p=t[1],a=t[2],d=o[p.start],h=o[p.end],g=o[p.center],e=o[a.start],r=o[a.end];function i(t){t=t.rect;return t[p.end]<d+v?d-t[p.end]:h-v<t[p.start]?t[p.start]-h:-1}var n=u.filter(function(t){var n=t.rect;return!(n[a.start]>r||n[a.end]<e)&&0<i(t)}).sort(function(t,n){return i(t)-i(n)}),s=[];n.forEach(function(o){n.forEach(function(t){var n,e,r,i;o!==t&&(r=o.rect,n=t.rect,e=r[a.start],r=r[a.end],i=n[a.start],n[a.end]<e||r<i||s.push([o,t]))})}),s.forEach(function(t){var n=t[0],t=t[1],e=n.rect,r=t.rect,i=e[p.start],e=e[p.end],o=r[p.start],r=r[p.end],a=0,s=0,u=!1,c=!1,l=!1;if(e<=d&&h<=o){if(c=!0,s=e+(a=(o-e-(h-d))/2)+(h-d)/2,Math.abs(s-g)>v)return}else if(e<o&&r<d+v){if(u=!0,s=r+(a=o-e),Math.abs(s-d)>v)return}else{if(!(e<o&&h-v<i))return;if(l=!0,s=i-(a=o-e),Math.abs(s-h)>v)return}a&&m.push({type:f,pos:"vertical"===f?[s,0]:[0,s],element:t.element,size:0,className:t.className,isStart:u,isCenter:c,isEnd:l,gap:a,hide:!0,gapRects:[n,t]})})}),m))),y.push.apply(y,function(t,n,e,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(n)for(var s=0;s<=r;s+=n)a.push({type:"horizontal",pos:[0,N(s-o,.1)],size:e,hide:!0});if(t)for(s=0;s<=e;s+=t)a.push({type:"vertical",pos:[N(s-i,.1),0],size:r,hide:!0});return a}(S,h,s?l:p,s?c:f,d,i)),y.push.apply(y,ur(x||!1,b||!1,s?l:p,s?c:f,d,i,a)),y}function fr(t,n,e,r){r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.length-1,r=0;r<e;++r){var i=t[r];if(!$(i))return i}return t[e]}(r,t.props.snapThreshold,5);return pr(t.state.guidelines,n,e,r)}function pr(t,n,e,r){return{vertical:gr(t,"vertical",n,r),horizontal:gr(t,"horizontal",e,r)}}function dr(t,n,e){n=sr(t.props.snapDirections,n);return fr(t,n.vertical,n.horizontal,e)}function hr(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=t.posInfos[0],e=t.guidelineInfos[0],r=e.offset,i=e.dist,e=e.guideline;return{isSnap:n,offset:r,dist:i,pos:t.pos,guideline:e}}function gr(r,i,t,o){if(!r||!r.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,t=t.map(function(e,t){var n=r.map(function(t){var n=t.pos,n=e-n[a];return{offset:n,dist:Math.abs(n),guideline:t}}).filter(function(t){var n=t.guideline,t=t.dist;return!(n.type!==i||o<t)}).sort(function(t,n){return t.dist-n.dist});return{pos:e,index:t,guidelineInfos:n}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist}),n=0<t.length;return{isSnap:n,index:n?t[0].index:-1,posInfos:t}}function vr(t,n){var e=Math.abs(t.offset),r=Math.abs(n.offset);return t.isBound&&n.isBound?r-e:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?r-e:t.isSnap?-1:n.isSnap||e<_e?1:r<_e?-1:e-r}function mr(t,a){return t.slice().sort(function(t,n){var e=t.sign[a],r=n.sign[a],i=t.offset[a],o=n.offset[a];return e?r?vr({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function br(t,n){var e=Rt([n[0][0],n[1][0]]),n=Rt([n[0][1],n[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function xr(t,n){var e,r=n[0],n=n[1],i=n[0]-r[0],n=n[1]-r[1];return Math.abs(i)<_e&&(i=0),Math.abs(n)<_e&&(n=0),n=i?(e=n?n/i*(t[0]-r[0])+r[1]:r[1],t[1]):(e=r[0],t[0]),e-n}function Er(t,n,e,r){return void 0===r&&(r=_e),t.every(function(t){t=xr(t,n);return t<=0===e||Math.abs(t)<=r})}function Sr(t,n,e,r,i){return void 0===i&&(i=0),r&&n-i<=t||!r&&t<=e+i?{isBound:!0,offset:r?n-t:e-t}:{isBound:!1,offset:0}}function yr(t,n,e,r,i,o){var a,s,u=n[0],n=n[1],t=t[0],c=e[0],e=e[1],l=eo(e[1]-c[1]),f=n,p=u,u=-u/n;return eo(e[0]-c[0])?l||o&&!f?{isBound:!1,offset:0}:p?Sr((c[1]-t[1])/u+t[0],c[0],e[0],r,i):(a=c[1]-t[1],{isBound:s=Math.abs(a)<=(i||0),offset:s?a:0}):o&&!p?{isBound:!1,offset:0}:f?Sr(u*(c[0]-t[0])+t[1],c[1],e[1],r,i):(a=c[0]-t[0],{isBound:s=Math.abs(a)<=(i||0),offset:s?a:0})}function Mr(a,t,s){return t.map(function(t){var n=function(t,n){var e=n.line,r=n.centerSign,i=n.verticalSign,o=n.horizontalSign,n=n.lineConstants;if(!(t=t.props.innerBounds))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=t.left,s=t.top,u=t.width,t=t.height,c=[[a,s],[a,s+t]],l=[[a,s],[a+u,s]],f=[[a+u,s],[a+u,s+t]],p=[[a,s+t],[a+u,s+t]];return Er([[a,s],[a+u,s],[a,s+t],[a+u,s+t]],e,r)?{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]}:(a=yr(e,n,l,i),u=yr(e,n,p,i),s=yr(e,n,c,o),t=yr(e,n,f,o),r=a.isBound&&u.isBound,l=a.isBound||u.isBound,p=s.isBound&&t.isBound,i=s.isBound||t.isBound,c=Ki(a.offset,u.offset),e=Ki(s.offset,t.offset),f=!(n=[0,0]),{isAllBound:Math.abs(e)<Math.abs(c)?(n=[c,0],f=l,r):(n=[0,e],f=i,p),isVerticalBound:l,isHorizontalBound:i,isBound:f,offset:n})}(a,t),e=n.isBound,r=n.offset,i=n.isVerticalBound,n=n.isHorizontalBound,o=t.multiple,t=ri({datas:s,distX:r[0],distY:r[1]}).map(function(t,n){return t*(o[n]?2/o[n]:0)});return{sign:o,isBound:e,isVerticalBound:i,isHorizontalBound:n,isSnap:!1,offset:t}})}function Rr(t,n,e){var r,i,o,a,s,u,t=Mr(t,Dr(t,n,[0,0],!1).map(function(t){return w(w({},t),{multiple:t.multiple.map(function(t){return 2*Math.abs(t)})})}),e),n=mr(t,0),t=mr(t,1),c=0,l=0,f=n.isVerticalBound||t.isVerticalBound,p=n.isHorizontalBound||t.isHorizontalBound;return(f||p)&&(e={datas:e,distX:-n.offset[0],distY:-t.offset[1]},n=e.datas,t=e.distX,e=e.distY,i=n.beforeMatrix,o=n.matrix,a=n.is3d,s=n.startDragBeforeDist,u=n.startDragDist,n=n.absoluteOrigin,a=a?4:3,c=(i=T(E(r?i:o,J(r?s:u,[t,e]),a),n))[0],l=i[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:p,offset:l}}}function Dr(t,l,n,e){var r,i,t=t.state,f=Bi(t.allMatrix,100,100,t.is3d?4:3),p=W(f,[0,0]);return t=e,e=[],r=(n=n)[0],i=n[1],r&&i?e.push([[0,2*i],n,[-r,i]],[[2*r,0],n,[r,-i]]):r?(e.push([[2*r,0],[r,1],[r,-1]]),t&&e.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(e.push([[0,2*i],[1,i],[-1,i]]),t&&e.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e.map(function(t){var n,e,r=t[0],i=t[1],t=t[2],o=[W(f,i),W(f,t)],a=(u=(a=o)[0],s=(a=a[1])[0]-u[0],a=a[1]-u[1],Math.abs(s)<A&&(s=0),Math.abs(a)<A&&(a=0),e=n=c=0,e=s?a?(c=-a/s)*u[0]-u[n=1]:-u[n=1]:(c=-1,u[0]),[c,n,e].map(function(t){return N(t,A)})),s=br(p,o),u=s.vertical,c=s.horizontal;return{multiple:r,centerSign:xr(p,o)<=0,verticalSign:u,horizontalSign:c,lineConstants:a,line:[W(l,i),W(l,t)]}})}function Cr(t,e,r,n){t=n?t.map(function(t){return Bn(t,n)}):t;return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].some(function(t){var n=xr(r,t)<=0;return!Er(e,t,n)})}function wr(t,n,e){var t=t||{},r=t.position,i=t.left,o=t.top,a=t.right,t=t.bottom,r={position:void 0===r?"client":r,left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===t?1/0:t};return{vertical:Pr(r,n,!0),horizontal:Pr(r,e,!1)}}function Or(t,n){var e=t.state,r=e.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,r=r.clientTop,e=e.snapOffset,s=e.left,u=e.top,c=e.right,e=e.bottom,n=n||t.props.bounds||{},t="css"===(n.position||"client"),l=n.left,f=n.top,p=n.right,p=void 0===p?t?-1/0:1/0:p,n=n.bottom,n=void 0===n?t?-1/0:1/0:n;return t&&(p=o+c-s-p,n=i+e-u-n),{left:(void 0===l?-1/0:l)+s-a,right:p+s-a,top:(void 0===f?-1/0:f)+u-r,bottom:n+u-r}}function Pr(t,n,e){var r=t[e?"left":"top"],t=t[e?"right":"bottom"],e=Math.min.apply(Math,n),n=Math.max.apply(Math,n),i=[];return e<r+1&&i.push({isBound:!0,offset:e-r,pos:r}),t-1<n&&i.push({isBound:!0,offset:n-t,pos:t}),i.length||i.push({isBound:!1,offset:0,pos:0}),i.sort(function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)})}function Br(t,n,e){return(e?t.map(function(t){return Bn(t,e)}):t).some(function(t){return t[0]<n.left&&.1<Math.abs(t[0]-n.left)||t[0]>n.right&&.1<Math.abs(t[0]-n.right)||t[1]<n.top&&.1<Math.abs(t[1]-n.top)||t[1]>n.bottom&&.1<Math.abs(t[1]-n.bottom)})}function zr(t,n){return t=w(w({},t),{classNames:Q([k("line","guideline",t.direction)],t.classNames,!0).filter(function(t){return t}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(t){return"".concat(N(t,.1),"px")})}),n=n,e=t.direction,r=t.classNames,i=t.size,o=t.pos,a=t.zoom,t=t.key,s=(e="horizontal"===e)?"Y":"X",n.createElement("div",{key:t,className:r.join(" "),style:((n={})[e?"width":"height"]="".concat(i),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(s,"(-50%) scale").concat(s,"(").concat(a,")"),n)});var e,r,i,o,a,s}function Gr(t,i,n,o,a,s,u,c){var l=t.props.zoom;return n.map(function(t,n){var e=t.type,t=t.pos,r=[0,0];return r[u]=o,r[u?0:1]=-a+t,zr({key:"".concat(i,"TargetGuideline").concat(n),classNames:[k("target","bold",e)],posValue:r,sizeValue:s,zoom:l,direction:i},c)})}function Tr(t,i,n,o,e,a){var t=t.props,s=t.zoom,r=t.isDisplayInnerSnapDigit,u="horizontal"===i?rr:ir,c=e[u.start],l=e[u.end];return n.filter(function(t){var n=t.hide,t=t.elementRect;if(n)return!1;if(r&&t){n=t.rect;if(n[u.start]<=c&&l<=n[u.end])return!1}return!0}).map(function(t,n){var e=t.pos,r=t.size,t=t.element,e=[-o[0]+e[0],-o[1]+e[1]];return zr({key:"".concat(i,"-default-guideline-").concat(n),classNames:t?[k("bold")]:[],direction:i,posValue:e,sizeValue:r,zoom:s},a)})}function _r(t,n,e,r,i,o,a,s){var t=t.props,u=t.snapDigit,u=void 0===u?0:u,c=t.isDisplaySnapDigit,c=void 0===c||c,l=t.snapDistFormat,l=void 0===l?function(t){return t}:l,t=t.zoom,f="horizontal"===n?"X":"Y",p="vertical"===n?"height":"width",i=Math.abs(i),c=c?parseFloat(i.toFixed(u)):0;return s.createElement("div",{key:"".concat(n,"-").concat(e,"-guideline-").concat(r),className:k("guideline-group",n),style:((u={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")})[p]="".concat(i,"px"),u)},zr({direction:n,classNames:[k(e),a],size:"100%",posValue:[0,0],sizeValue:i,zoom:t},s),s.createElement("div",{className:k("size-value","gap"),style:{transform:"translate".concat(f,"(-50%) scale(").concat(t,")")}},0<c?l(c):""))}function Ar(y,n,M,R,D){var e=y.props.isDisplayInnerSnapDigit,C=[];return["vertical","horizontal"].forEach(function(a){var u,c,i,o,s,l,f,p,d,h,g,t=n.filter(function(t){return t.type===a}),v="vertical"===a?1:0,m=v?0:1,t=(t=t,c=e,p="vertical"===(u=a)?1:0,h=R[(d=(f="vertical"===u?0:1)?rr:ir).start],g=R[d.end],o=function(t){return t.pos[f]},s=[],l=[],(i=t).forEach(function(t,n){var n=o(t,n,i),e=l.indexOf(n),r=s[e]||[];-1===e&&(l.push(n),s.push(r)),r.push(t)}),s.map(function(t){var a=[],s=[];return t.forEach(function(t){var n,e,r,i=t.element,o=t.elementRect.rect;o[d.end]<h?a.push(t):g<o[d.start]?s.push(t):o[d.start]<=h&&g<=o[d.end]&&c&&(n=t.pos,e={element:i,rect:w(w({},o),((e={})[d.end]=o[d.start],e))},o={element:i,rect:w(w({},o),((i={})[d.start]=o[d.end],i))},i=[0,0],(r=[0,0])[f]=n[f],r[p]=n[p],i[f]=n[f],i[p]=n[p]+t.size,a.push({type:u,pos:r,size:0,elementRect:e}),s.push({type:u,pos:i,size:0,elementRect:o}))}),a.sort(function(t,n){return n.pos[p]-t.pos[p]}),s.sort(function(t,n){return t.pos[p]-n.pos[p]}),{total:t,start:a,end:s,inner:[]}})),b=v?ir:rr,x=v?rr:ir,E=R[b.start],S=R[b.end];t.forEach(function(t){var n=t.total,e=t.start,r=t.end,t=t.inner,o=M[m]+n[0].pos[m]-R[x.start],i=R;e.forEach(function(t){var n,e=t.elementRect.rect,r=i[b.start]-e[b.end];0<r&&((n=[0,0])[v]=M[v]+i[b.start]-E-r,n[m]=o,C.push(_r(y,a,"dashed",C.length,r,n,t.className,D))),i=e}),i=R,r.forEach(function(t){var n,e=t.elementRect.rect,r=e[b.start]-i[b.end];0<r&&((n=[0,0])[v]=M[v]+i[b.end]-E,n[m]=o,C.push(_r(y,a,"dashed",C.length,r,n,t.className,D))),i=e}),t.forEach(function(t){var n=t.elementRect.rect,e=E-n[b.start],n=n[b.end]-S,r=[0,0],i=[0,0];r[v]=M[v]-e,r[m]=o,i[v]=M[v]+S-E,i[m]=o,C.push(_r(y,a,"dashed",C.length,e,r,t.className,D)),C.push(_r(y,a,"dashed",C.length,n,i,t.className,D))})})}),C}function Ir(t,n,e,r,i){o=t,e=e,r=r,a=(u=n)[0]-o[0],s=u[1]-o[1],Math.abs(a)<A&&(a=0),Math.abs(s)<A&&(s=0);var o=a?s?(s/=a,a=o[1]-s*o[0],r?[e,s*(u[0]+e)+a-u[1]]:[(u[1]+e-a)/s-u[0],e]):r?[e,0]:[0,0]:r?[0,0]:[0,e];if(!o)return{isOutside:!1,offset:[0,0]};var a=g(t,n),s=g(o,t),u=g(o,n),r=a<s||a<u,e=ri({datas:i,distX:o[0],distY:o[1]});return{offset:[e[0],e[1]],isOutside:r}}function kr(t,n){return t.isBound?t.offset:n.isSnap?hr(n).offset:0}function Fr(t,n,e,r,i,o){if(!or(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,c,l=Xi(o.absolutePoses,[n,e]),f=zi(l),p=f.left,d=f.right,h=f.top,f=f.bottom,g={horizontal:l.map(function(t){return t[1]}),vertical:l.map(function(t){return t[0]})},i=Nr(t,i,sr(ar(t.props.snapDirections),{left:p,right:d,top:h,bottom:f,center:(p+d)/2,middle:(h+f)/2}),g),p=i.vertical,d=i.horizontal,h=Rr(t,l,o),f=h.vertical,g=h.horizontal,i=p.isSnap,t=d.isSnap,l=p.isBound||f.isBound,o=d.isBound||g.isBound,h=Ki(p.offset,f.offset),p=Ki(d.offset,g.offset),v=(f=r,d=[l,o],g=[i,t],r=[h,p],s=(h=[n,e])[0],u=h[1],h=d[0],d=d[1],p=g[0],g=g[1],n=r[0],r=r[1],e=-n,c=-r,f&&s&&u?(c=e=0,v=[],h&&d?v.push([0,r],[n,0]):h?v.push([n,0]):d?v.push([0,r]):p&&g?v.push([0,r],[n,0]):p?v.push([n,0]):g&&v.push([0,r]),v.length&&(v.sort(function(t,n){return _i(T([s,u],t))-_i(T([s,u],n))}),(p=v[0])[0]&&Math.abs(s)>A?(e=-p[0],c=u*Math.abs(s+e)/Math.abs(s)-u):p[1]&&Math.abs(u)>A&&(g=u,c=-p[1],e=s*Math.abs(u+c)/Math.abs(g)-s),f&&d&&h&&(Math.abs(e)>A&&Math.abs(e)<Math.abs(n)?(e*=a=Math.abs(n)/Math.abs(e),c*=a):Math.abs(c)>A&&Math.abs(c)<Math.abs(r)?(e*=a=Math.abs(r)/Math.abs(c),c*=a):(e=Ki(-n,e),c=Ki(-r,c))))):(e=s||h?-n:0,c=u||d?-r:0),[e,c]);return[{isBound:l,isSnap:i,offset:v[0]},{isBound:o,isSnap:t,offset:v[1]}]}function Nr(t,n,e,r){var r=wr(Or(t),(r=void 0===r?e:r).vertical,r.horizontal),i=r.horizontal,r=r.vertical,n=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:fr(t,e.vertical,e.horizontal),t=n.horizontal,e=n.vertical,n=kr(i[0],t),o=kr(r[0],e),a=Math.abs(n),s=Math.abs(o);return{horizontal:{isBound:i[0].isBound,isSnap:t.isSnap,snapIndex:t.index,offset:n,dist:a,bounds:i,snap:t},vertical:{isBound:r[0].isBound,isSnap:e.isSnap,snapIndex:e.index,offset:o,dist:s,bounds:r,snap:e}}}function Wr(t,n,e,r,i){var n=wr(n,e,r),o=n.horizontal,n=n.vertical,t=pr(t,e,r,i),e=t.horizontal,r=t.vertical,i=kr(o[0],e),t=kr(n[0],r),a=Math.abs(i),s=Math.abs(t);return{horizontal:{isBound:o[0].isBound,isSnap:e.isSnap,snapIndex:e.index,offset:i,dist:a,bounds:o,snap:e},vertical:{isBound:n[0].isBound,isSnap:r.isSnap,snapIndex:r.index,offset:t,dist:s,bounds:n,snap:r}}}function Yr(M,R,t,D,C,w){return t.map(function(t){var n=t[0],t=t[1],e=W(R,n),r=W(R,t),i=D?(l=C,u=function(t,n,e){var r,i,o=(t=Or(t)).left,a=t.top,s=t.right,t=t.bottom,u=e[0],c=e[1],l=(n=T(e,n))[0],n=n[1],f=(Math.abs(l)<_e&&(l=0),0<(n=Math.abs(n)<_e?0:n)),p=0<l,d={isBound:!1,offset:0,pos:0},h={isBound:!1,offset:0,pos:0};return 0===l&&0===n||(0===l?f?t<c&&(h.pos=t,h.offset=c-t):c<a&&(h.pos=a,h.offset=c-a):0===n?p?s<u&&(d.pos=s,d.offset=u-s):u<o&&(d.pos=o,d.offset=u-o):(n=e[1]-(e=n/l)*u,r=l=0,i=!1,p&&s<=u?(l=e*s+n,r=s,i=!0):!p&&u<=o&&(l=e*o+n,r=o,i=!0),(i=i&&(l<a||t<l)?!1:i)||(f&&t<=c?(r=((l=t)-n)/e,i=!0):!f&&c<=a&&(r=((l=a)-n)/e,i=!0)),i&&(d.isBound=!0,d.pos=r,d.offset=u-r,h.isBound=!0,h.pos=l,h.offset=c-l))),{vertical:d,horizontal:h}}(o=M,c=e,a=r),i=u.horizontal,u=u.vertical,l=l?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,e){var r=e[0],i=e[1],o=n[0],a=n[1],s=(n=T(e,n))[0],u=0<(n=n[1]),c=0<s,s=eo(s),n=eo(n),l={isSnap:!1,offset:0,pos:0},f={isSnap:!1,offset:0,pos:0};if(0===s&&0===n)return{vertical:l,horizontal:f};var p,d=(t=fr(t,s?[r]:[],n?[i]:[])).vertical,t=t.horizontal;d.posInfos.filter(function(t){t=t.pos;return c?o<=t:t<=o}),t.posInfos.filter(function(t){t=t.pos;return u?a<=t:t<=a}),d.isSnap=0<d.posInfos.length,t.isSnap=0<t.posInfos.length;var h=(d=hr(d)).isSnap,d=d.guideline,g=(t=hr(t)).isSnap,t=t.guideline,v=g?t.pos[1]:0,d=h?d.pos[0]:0;return 0===s?g&&(f.isSnap=!0,f.pos=t.pos[1],f.offset=i-f.pos):0===n?h&&(l.isSnap=!0,l.pos=d,l.offset=r-d):(e=e[1]-(t=n/s)*r,s=n=0,p=!1,h?(n=t*(s=d)+e,p=!0):g&&(s=((n=v)-e)/t,p=!0),p&&(l.isSnap=!0,l.pos=s,l.offset=r-s,f.isSnap=!0,f.pos=n,f.offset=i-n)),{vertical:l,horizontal:f}}(o,c,a),o=l.horizontal,c=l.vertical,a=jr(i,o),l=jr(u,c),s=Math.abs(a),f=Math.abs(l),{horizontal:{isBound:i.isBound,isSnap:o.isSnap,offset:a,dist:s},vertical:{isBound:u.isBound,isSnap:c.isSnap,offset:l,dist:f}}):Nr(M,C,{vertical:[r[0]],horizontal:[r[1]]}),o=i.horizontal,a=o.offset,s=o.isBound,u=o.isSnap,c=i.vertical,l=c.offset,f=c.isBound,p=c.isSnap,d=T(t,n);if(!l&&!a)return{isBound:f||s,isSnap:p||u,sign:d,offset:[0,0]};E=i,g=D,h=F(h=e,S=r)/Math.PI*180,y=(S=E.vertical).isBound,v=S.isSnap,S=S.dist,m=(E=E.horizontal).isBound,b=E.isSnap,x=(h=h%180)<3||177<h,h=87<h&&h<93;var h,g,v,m,b,x,E=E.dist<S&&(y||v&&!h&&(!g||!x))?"vertical":!m&&(!b||x||g&&h)?"":"horizontal";if(!E)return{sign:d,isBound:!1,isSnap:!1,offset:[0,0]};var S="vertical"==E,y=[0,0];return y=(y=D||1!==Math.abs(t[0])||1!==Math.abs(t[1])||n[0]===t[0]||n[1]===t[1]?Ir(e,r,-(S?l:a),S,w).offset:ri({datas:w,distX:-l,distY:-a})).map(function(t,n){return t*(d[n]?2/d[n]:0)}),{sign:d,isBound:S?f:s,isSnap:S?p:u,offset:y}})}function jr(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function qr(t){var n,e,r,i,o=t.state;o.guidelines&&o.guidelines.length||(r=t.state.container,i=t.props.snapContainer||r,n=o.containerClientRect,e={left:0,top:0,bottom:0,right:0},r!==i&&(r=oo(i,!0))&&(r=so(o,[(i=ji(r)).left-n.left,i.top-n.top]),i=so(o,[i.right-n.right,i.bottom-n.bottom]),e.left=N(r[0],.1),e.top=N(r[1],.1),e.right=N(i[0],.1),e.bottom=N(i[1],.1)),o.snapOffset=e,o.guidelines=lr(t),o.enableSnap=!0)}function Xr(t,n,e,r,i,o){t=Bi(t,n,e,o?4:3);return Xi(t,T(i,W(t,r)))}function Hr(t,n,e,r,i,o){var a,s,u,c,l=o.fixedDirection,l=(a=e,s=l,c=[],r?(1!==Math.abs(s[0])||1!==Math.abs(s[1])?c.push([s,[-1,-1]],[s,[-1,1]],[s,[1,-1]],[s,[1,1]]):c.push([s,[a[0],-a[1]]],[s,[-a[0],a[1]]]),c.push([s,a])):a[0]&&a[1]||!a[0]&&!a[1]?(u=a[0]?a:[1,1],[1,-1].forEach(function(n){[1,-1].forEach(function(t){t=[n*u[0],t*u[1]];s[0]===t[0]&&s[1]===t[1]||c.push([s,t])})})):a[0]?(1===Math.abs(s[0])?[1]:[1,-1]).forEach(function(t){c.push([[s[0],-1],[t*a[0],-1]],[[s[0],0],[t*a[0],0]],[[s[0],1],[t*a[0],1]])}):a[1]&&(1===Math.abs(s[1])?[1]:[1,-1]).forEach(function(t){c.push([[-1,s[1]],[-1,t*a[1]]],[[0,s[1]],[0,t*a[1]]],[[1,s[1]],[1,t*a[1]]])}),c),e=Dr(t,n,e,r),n=Q(Q([],Yr(t,n,l,r,i,o),!0),Mr(t,e,o),!0),l=mr(n,0),r=mr(n,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:r.isBound,offset:r.offset[1]}}}function Lr(t,n,e,r,i,o,a,s){for(var u,c,l,f,p,d,h,g,v,m,b,x,E,S,y,M,I,R,D,C=Hi(t.state),k=t.props.keepRatio,w=0,O=0,P=0;P<2;++P){var B=Hr(t,n(w,O),i,k,a,s),z=B.width,B=B.height,G=z.isBound,T=B.isBound,_=z.offset,A=B.offset;if(1===P&&(G||(_=0),T||(A=0)),0===P&&a&&!G&&!T)return[0,0];k&&(z=Math.abs(_)*(e?1/e:1),B=Math.abs(A)*(r?1/r:1),(G&&T?z<B:T||!G&&z<B)?_=e*A/r:A=r*_/e),w+=_,O+=A}return i[0]&&i[1]&&(h=t,g=C,v=o,m=s,y=[-(C=i)[0],-C[1]],M=(o=h.state).width,I=o.height,o=h.props.bounds,D=R=1/0,o&&(h=[[C[0],-C[1]],[-C[0],C[1]]],C=o.left,b=void 0===C?-1/0:C,C=o.top,x=void 0===C?-1/0:C,C=o.right,E=void 0===C?1/0:C,C=o.bottom,S=void 0===C?1/0:C,h.forEach(function(t){var n,e,r=t[0]!==y[0],i=t[1]!==y[1],t=W(g,t),o=360*F(v,t)/Math.PI;i&&(n=t.slice(),(Math.abs(o-360)<2||Math.abs(o-180)<2)&&(n[1]=v[1]),e=(i=Ir(v,n,(v[1]<t[1]?S:x)-t[1],!1,m)).offset[1],i=i.isOutside,isNaN(e)||(D=I+(i?1:-1)*Math.abs(e))),r&&(n=t.slice(),(Math.abs(o-90)<2||Math.abs(o-270)<2)&&(n[0]=v[0]),e=(i=Ir(v,n,(v[0]<t[0]?E:b)-t[0],!0,m)).offset[0],r=i.isOutside,isNaN(e)||(R=M+(r?1:-1)*Math.abs(e)))})),C=(o={maxWidth:R,maxHeight:D}).maxWidth,h=o.maxHeight,o=t,u=n(w,O).map(function(t){return t.map(function(t){return N(t,Te)})}),c=e+w,l=r+O,C=C,h=h,p=a,d=s,u=W(u,f=i),p=(o=Nr(o,p,{vertical:[u[0]],horizontal:[u[1]]})).horizontal.offset,w+=_=(p=(u=o.vertical.offset)||p?(d=(o=ri({datas:d,distX:-u,distY:-p}))[0],u=o[1],[Math.min(C||1/0,c+f[0]*d)-c,Math.min(h||1/0,l+f[1]*u)-l]):[0,0])[0],O+=A=p[1]),[w,O]}function Vr(t,o,n,e,a){if(!or(t,"scalable"))return[0,0];var s=a.startOffsetWidth,u=a.startOffsetHeight,c=a.fixedPosition,l=a.fixedDirection,f=a.is3d,t=Lr(t,function(t,n){return Xr((e=a,t=J(o,[t/s,n/u]),n=e.transformOrigin,r=e.offsetMatrix,i=e.is3d,e=e.targetMatrix,ai(r,K(e,_n(t,i=i?4:3),i),n,i)),s,u,l,c,f);var e,r,i},s,u,n,c,e,a);return[t[0]/s,t[1]/u]}function Ur(t){var n=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){t=t.guideline;-1<n.indexOf(t)||n.push(t)})}),n}function $r(t,n,e,r,i,o){o=wr(Or(t,o),n,e),n=o.vertical,e=o.horizontal,n.forEach(function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})}),e.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),o=function(t){if(!(e=t.props.innerBounds))return{vertical:[],horizontal:[]};var n=t.getRect(),a=W(n=[n.pos1,n.pos2,n.pos3,n.pos4],[0,0]),s=e.left,u=e.top,c=e.width,l=e.height,f=[[s,u],[s,u+l]],p=[[s,u],[s+c,u]],d=[[s+c,u],[s+c,u+l]],h=[[s,u+l],[s+c,u+l]],e=Dr(t,n,[0,0],!1),g=[],v=[],m={top:!1,bottom:!1,left:!1,right:!1};return e.forEach(function(t){var n=t.line,t=t.lineConstants,e=br(a,n),r=e.horizontal,e=e.vertical,i=yr(n,t,p,e,1,!0),e=yr(n,t,h,e,1,!0),o=yr(n,t,f,r,1,!0),n=yr(n,t,d,r,1,!0);i.isBound&&!m.top&&(g.push(u),m.top=!0),e.isBound&&!m.bottom&&(g.push(u+l),m.bottom=!0),o.isBound&&!m.left&&(v.push(s),m.left=!0),n.isBound&&!m.right&&(v.push(s+c),m.right=!0)}),{horizontal:g,vertical:v}}(t),n=o.vertical,e=o.horizontal;n.forEach(function(e){0<=h(r,function(t){var n=t.type,t=t.pos;return"bounds"===n&&t===e})||r.push({type:"bounds",pos:e})}),e.forEach(function(e){0<=h(i,function(t){var n=t.type,t=t.pos;return"bounds"===n&&t===e})||i.push({type:"bounds",pos:e})})}var Zr={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,n){var e=t.state,r=e.top,i=e.left,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,c=e.snapRenderInfo;if(!c||!or(t,""))return[];e.guidelines=lr(t);var h,g,v,m,b,x,e=Math.min(o[0],a[0],s[0],u[0]),o=Math.min(o[1],a[1],s[1],u[1]),a=c.externalPoses||[],s=Hi(t.state),l=[],f=[],p=[],d=[],u=[],E=zi(s),S=E.width,y=E.height,M=E.top,R=E.left,D=E.bottom,E=E.right,C={left:R,right:E,top:M,bottom:D,center:(R+E)/2,middle:(M+D)/2},w=0<a.length,a=w?zi(a):{},s=(c.request||(c.direction&&u.push(function(t,n,e){var r=[];if(e[0]&&e[1])r=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(t){return W(n,t)});else if(e[0]||e[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(t){return W(n,t)}):1<(r=oi(n,e)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return fr(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),1)}(t,s,c.direction)),c.snap&&(s=zi(s),c.center&&(s.middle=(s.top+s.bottom)/2,s.center=(s.left+s.right)/2),u.push(dr(t,s,1))),w&&(c.center&&(a.middle=(a.top+a.bottom)/2,a.center=(a.left+a.right)/2),u.push(dr(t,a,1))),u.forEach(function(t){var n=t.vertical.posInfos,t=t.horizontal.posInfos;l.push.apply(l,n.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),f.push.apply(f,t.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),p.push.apply(p,Ur(n)),d.push.apply(d,Ur(t))})),$r(t,[R,E],[M,D],l,f),w&&$r(t,[a.left,a.right],[a.top,a.bottom],l,f,c.externalBounds),Q(Q([],p,!0),d,!0)),u=s.filter(function(t){return t.element&&!t.gapRects}),R=s.filter(function(t){return t.gapRects});return nt(t,"onSnap",{guidelines:s.filter(function(t){return!t.element}),elements:u,gaps:R},!0),Q(Q(Q(Q(Q(Q([],Ar(t,u,[e,o],C,n),!0),(h=t,g=R,v=[e,o],m=C,b=n,x=[],["horizontal","vertical"].forEach(function(n){var t=g.filter(function(t){return t.type===n}),a="vertical"===n?0:1,s=a?0:1,u=a?ir:rr,c=a?rr:ir,l=m[u.start],f=m[u.end],p=m[c.start],d=m[c.end];t.forEach(function(t){var e=t.gap,n=t.gapRects,r=t.className,t=Math.max.apply(Math,Q([p],n.map(function(t){return t.rect[c.start]}),!1)),i=Math.min.apply(Math,Q([d],n.map(function(t){return t.rect[c.end]}),!1)),o=(t+i)/2;t!==i&&o!=(p+d)/2&&n.forEach(function(t){var t=t.rect,n=[v[0],v[1]];if(t[u.end]<l)n[a]+=t[u.end]-l;else{if(!(f<t[u.start]))return;n[a]+=t[u.start]-l-e}n[s]+=o-p,x.push(_r(h,a?"vertical":"horizontal","gap",x.length,e,n,r,b))})})}),x),!0),Tr(t,"horizontal",d,[i,r],C,n),!0),Tr(t,"vertical",p,[i,r],C,n),!0),Gr(t,"horizontal",f,e,r,S,0,n),!0),Gr(t,"vertical",l,o,i,y,1,n),!0)},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},qr(t)},drag:function(t){t.state.guidelines=lr(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,n){return!(!ro(0,n)&&!tr(t,n))||(!n.isRequest&&n.inputEvent?a(n.inputEvent.target,k("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,qr(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,qr(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){t=t.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}},_={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var e=t.props,r=e.throttleDragRotate,e=e.zoom,t=t.state,i=t.dragInfo,t=t.beforeOrigin;if(!r||!i)return[];r=i.dist;if(!r[0]&&!r[1])return[];i=_i(r),r=F(r,[0,0]);return[n.createElement("div",{className:k("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(i,"px"),transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(e,")")}})]},dragStart:function(t,n){var e=n.datas,r=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;i=B(a),e.datas={},e.left=parseFloat(i.left||"")||0,e.top=parseFloat(i.top||"")||0,e.bottom=parseFloat(i.bottom||"")||0,e.right=parseFloat(i.right||"")||0,e.startValue=[0,0],Jr(t,n),ui(n,"translate"),e.absolutePoses=Hi(t.state),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0],a=tt(t,n,w({set:function(t){e.startValue=t}},si(n)));return!1!==(r||nt(t,"onDragStart",a))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,e.isPinch=!1),!!e.isDrag&&a},drag:function(t,n){if(n){Qr(n,"translate");var e=n.datas,r=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.deltaOffset,u=n.distX,c=n.distY,l=e.isDrag,f=e.prevDist,p=e.prevBeforeDist,d=e.startValue;if(l){s&&(u+=s[0],c+=s[1]);var h,l=t.props,g=l.parentMoveable,v=!r&&l.throttleDrag||0,m=!r&&l.throttleDragRotate||0,b=!1,x=0,i=(!r&&0<m&&(u||c)&&(l=N((l=l.startDragRotate||0)+180*F([0,0],[u,c])/Math.PI,m)-l,h=c*Math.abs(Math.cos((l-90)/180*Math.PI)),h=_i([u*Math.abs(Math.cos(l/180*Math.PI)),h]),x=l*Math.PI/180,u=h*Math.cos(x),c=h*Math.sin(x)),o||r||i||m&&!u&&!c||(h=(l=Fr(t,u,c,m,a||s,e))[0],x=l[1],i=h.isSnap,a=h.isBound,s=h.offset,l=x.isSnap,h=x.isBound,b=i||l||a||h,u+=s,c+=x.offset),J(ei({datas:e,distX:u,distY:c}),d)),s=J((a=(l={datas:e,distX:u,distY:c}).datas,h=l.distX,l=l.distY,h=ei({datas:a,distX:h,distY:l}),l=h[0],h=h[1],E(ni(a,Sn([l,h],4)),yn([0,0,0],4),4)),d),x=(m||b||(Ct(s,v),Ct(i,v)),T(i,d)),u=T(s,d),c=T(u,f),a=T(x,p),l=(e.prevDist=u,e.prevBeforeDist=x,e.passDelta=c,e.passDist=u,e.left+x[0]),m=e.top+x[1],b=e.right-x[0],v=e.bottom-x[1],d=ti(e,"translate(".concat(s[0],"px, ").concat(s[1],"px)"),"translate(".concat(u[0],"px, ").concat(u[1],"px)"));if(li(n,d),t.state.dragInfo.dist=r?[0,0]:u,r||g||!c.every(function(t){return!t})||!a.some(function(t){return!t}))return p=tt(t,n,{transform:d,dist:u,delta:c,translate:s,beforeDist:x,beforeDelta:a,beforeTranslate:i,left:l,top:m,right:b,bottom:v,width:(f=t.state).width,height:f.height,isPinch:o}),r||nt(t,"onDrag",p),p}}},dragAfter:function(t,n){var e=n.datas,r=e.deltaOffset;return!(!r[0]&&!r[1])&&(e.deltaOffset=[0,0],this.drag(t,w(w({},n),{deltaOffset:r})))},dragEnd:function(t,n){var e=n.parentEvent,r=n.datas;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,r=Vi(t,n,{}),e||nt(t,"onDragEnd",r),r},dragGroupStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;r=Xe(t,this,"dragStart",[r||0,i||0],n,!1),i=nt(t,"onDragGroupStart",w(w({},o),{targets:t.props.targets,events:r}));return e.isDrag=!1!==i,!!e.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var e=this.drag(t,n),n=Xe(t,this,"drag",n.datas.passDelta,n,!1);if(e)return nt(t,"onDragGroup",t=w({targets:t.props.targets,events:n},e)),t}},dragGroupEnd:function(t,n){var e,r=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),e=Xe(t,this,"dragEnd",[0,0],n,!1),nt(t,"onDragGroupEnd",Vi(t,n,{targets:t.props.targets,events:e})),r},request:function(t){var n={},e=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:r,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Kr(t,n){var e=n.clientX,r=n.clientY,n=n.datas,t=t.state,i=t.moveableClientRect,o=t.rootMatrix,a=t.is3d,t=t.pos1,o=T(Ji(o,[e-i.left,r-i.top],a?4:3),t),e=ri({datas:n,distX:o[0],distY:o[1]});return[e[0],e[1]]}function Jr(t,n){var n=n.datas,t=t.state,e=t.allMatrix,r=t.beforeMatrix,i=t.is3d,o=t.left,a=t.top,s=t.origin,u=t.offsetMatrix,c=t.targetMatrix,t=t.transformOrigin,l=i?4:3;n.is3d=i,n.matrix=e,n.targetMatrix=c,n.beforeMatrix=r,n.offsetMatrix=u,n.transformOrigin=t,n.inverseMatrix=y(e,l),n.inverseBeforeMatrix=y(r,l),n.absoluteOrigin=yn(J([o,a],s),l),n.startDragBeforeDist=E(n.inverseBeforeMatrix,n.absoluteOrigin,l),n.startDragDist=E(n.inverseMatrix,n.absoluteOrigin,l)}function Qr(t,n){var e,r,i,o,a,s,u,c,l,f,p,d,h,g=t.datas,t=t.originalDatas.beforeRenderable,v=g.transformIndex,m=t.nextTransforms,b=t.nextTransformAppendedIndexes,x=0,m=(-1===v?(x=m.length,g.transformIndex=x):x=v+b.filter(function(t){return t<v}).length,e=x,r=(m=m).slice(0,e<0?void 0:e),i=m.slice(0,e<0?void 0:e+1),o=m[e]||"",a=e<0?[]:m.slice(e),e=e<0?[]:m.slice(e+1),s=Wn(r),u=Wn(i),c=Wn([o]),l=Wn(a),f=Wn(e),E=Nn(s),S=Nn(u),p=Nn(l),d=Nn(f),h=K(E,p,4),{transforms:m,beforeFunctionMatrix:E,beforeFunctionMatrix2:S,targetFunctionMatrix:Nn(c),afterFunctionMatrix:p,afterFunctionMatrix2:d,allFunctionMatrix:h,beforeFunctions:s,beforeFunctions2:u,targetFunction:c[0],afterFunctions:l,afterFunctions2:f,beforeFunctionTexts:r,beforeFunctionTexts2:i,targetFunctionText:o,afterFunctionTexts:a,afterFunctionTexts2:e}),E=m.targetFunction,S="rotate"===n?"rotateZ":n;g.beforeFunctionTexts=m.beforeFunctionTexts,g.afterFunctionTexts=m.afterFunctionTexts,g.beforeTransform=m.beforeFunctionMatrix,g.beforeTransform2=m.beforeFunctionMatrix2,g.targetTansform=m.targetFunctionMatrix,g.afterTransform=m.afterFunctionMatrix,g.afterTransform2=m.afterFunctionMatrix2,g.targetAllTransform=m.allFunctionMatrix,E.functionName===S?(g.afterFunctionTexts.splice(0,1),g.isAppendTransform=!1):(g.isAppendTransform=!0,t.nextTransformAppendedIndexes=Q(Q([],b,!0),[x],!1))}function ti(t,n,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:n," ").concat(t.afterFunctionTexts.join(" "))}function ni(t,n,e){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,t=t.targetAllTransform,n=e?K(t,n,4):K(n,t,4),t=K(y(e?o:r,4),n,4);return K(t,y(e?a:i,4),4)}function ei(t){var n=t.datas,e=t.distX,t=t.distY,r=n.inverseBeforeMatrix,i=n.is3d,o=n.startDragBeforeDist,i=i?4:3;return T(E(r,J(n.absoluteOrigin,[e,t]),i),o)}function ri(t,n){var e=t.datas,r=t.distX,t=t.distY,i=e.inverseBeforeMatrix,o=e.inverseMatrix,a=e.is3d,s=e.startDragBeforeDist,u=e.startDragDist,a=a?4:3;return T(E(n?i:o,J(e.absoluteOrigin,[r,t]),a),n?s:u)}function ii(t){var n=[];return 0<=t[1]&&(0<=t[0]&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(0<=t[0]&&n.push(1),t[0]<=0&&n.push(0)),n}function oi(n,t){return ii(t).map(function(t){return n[t]})}function W(t,n){t=oi(t,n);return[Rt(t.map(function(t){return t[0]})),Rt(t.map(function(t){return t[1]}))]}function ai(t,n,e,r){return K(t,bi(n,r,e),r)}function si(e){var r=e.originalDatas.beforeRenderable;return{setTransform:function(t,n){void 0===n&&(n=-1),r.startTransforms=at(t)?t:S(t),ci(e,n)},setTransformIndex:function(t){ci(e,t)}}}function ui(t,n){ci(t,h(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf("".concat(n,"("))}))}function ci(t,n){var e=t.originalDatas.beforeRenderable,t=t.datas;-1!==(t.transformIndex=n)&&(e=e.startTransforms[n])&&(n=Wn([e]),t.startValue=n[0].functionValue)}function li(t,n){t.originalDatas.beforeRenderable.nextTransforms=S(n)}function fi(t){return t.originalDatas.beforeRenderable.nextTransforms.join(" ")}function pi(t,n,e,r,i){return li(i,n),{transform:n,drag:_.drag(t,Ye(i,t.state,e,r,!1))}}function di(t,n,e,r,i){var o=t.state,a=o.left,o=o.top,s=t.props.groupable;u=t.state,c=i,l=u.transformOrigin,f=u.offsetMatrix,u=u.is3d,p=i.beforeTransform,c=i.afterTransform,u=u?4:3;var u,c,l,f,p,i=s?a:0,a=s?o:0,s=T(r,gi(t,e,ai(f,P(K(K(p,kn([n]),4),c,4),4,u),l,u)));return T(s,[i,a])}function hi(t){var t=t.state,n=t.width,e=t.height,t=t.transformOrigin;return[t[0]/(n/2)-1,t[1]/(e/2)-1]}function gi(t,n,e){void 0===e&&(e=t.state.allMatrix);var t=t.state,r=t.width,i=t.height,t=t.is3d;return Y(e,[r/2*(1+n[0]),i/2*(1+n[1])],t?4:3)}function vi(t,n,e,r,i,o){var a=t.props.groupable,t=t.state,s=t.transformOrigin,u=t.targetMatrix,c=t.offsetMatrix,l=t.is3d,f=t.width,p=t.height,d=t.left,t=t.top,l=l?4:3;h=n,g=e,void 0===(v=f)&&(v=h),void 0===(m=p)&&(m=g),void 0===(b=s)&&(b=[0,0]);var h,g,v,m,b,f=a?d:0,p=a?t:0,d=ai(c,u,(s=o)?s.map(function(t,n){var e=gt(t),r=e.value,e=e.unit,i=n?m:v,o=n?g:h;return"%"===t||isNaN(r)?o*(i?b[n]/i:0):"%"!==e?r:o*r/100}):b,l);return a=i,t=r,c=W(Bi(c=d,n,e,l),t),T([a[0]-c[0],a[1]-c[1]],[f,p])}function mi(t,n){return W(Hi(t.state),n)}function k(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i.apply(void 0,Q([Be],t,!1))}function bi(t,n,e){return Mn(n,An(e,n),t,An(e.map(function(t){return-t}),n))}function xi(r){return Ei(B(r,":before")).map(function(t,n){var t=gt(t),e=t.value,t=t.unit;return e*(e=r,n=0===n,"%"===t?Pi(e.ownerSVGElement)[n?"width":"height"]/100:1)})}function Ei(t){t=t.transformOrigin;return t?t.split(" "):["0","0"]}function Si(t,n){var e=(n=void 0===n?B(t):n).transform;if(e&&"none"!==e)return n.transform;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var i=r.length;if(!i)return"";for(var o=[],a=0;a<i;++a)!function(t){var n=r[t].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(t){return n[t]}).join(", "),")"))}(a);return o.join(" ")}return""}function yi(t,n,e){for(var r=document.body,i=!t||e?t:t.parentElement,o=t===n||i===n,a="relative";i&&i!==r;){n===i&&(o=!0);var s=B(i),u=i.tagName.toLowerCase(),c=Si(i,s),a=s.position;if("svg"===u||"static"!==a||c&&"none"!==c)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function Mi(t,n){var e,r,i=t.tagName.toLowerCase(),o=t.offsetLeft,a=t.offsetTop,s=$(o),u=!s;return u||"svg"===i?r=(e=Ei(n).map(function(t){return parseFloat(t)})).slice():(r=(e=Pe?xi(t):Ei(n).map(function(t){return parseFloat(t)})).slice(),u=!0,o=(n=function(t,n){if(!t.getBBox||"g"===t.tagName.toLowerCase())return[0,0,0,0];var e=t.getBBox(),t=Pi(t.ownerSVGElement),r=e.x-t.x,e=e.y-t.y;return[r,e,n[0]-r,n[1]-e]}(t,e))[0],a=n[1],e[0]=n[2],e[1]=n[3]),{tagName:i,isSVG:s,hasOffset:u,offset:[o||0,a||0],origin:e,targetOrigin:r}}function Ri(t,n,e){void 0===e&&(e=B(t));var t=B(document.body),r=t.position;if(!(n||r&&"static"!==r))return[0,0];n=parseInt(t.marginLeft,10),r=parseInt(t.marginTop,10);return"absolute"===e.position&&("auto"===e.top&&"auto"===e.bottom||(r=0),"auto"===e.left&&"auto"===e.right||(n=0)),[n,r]}function Di(t){t.forEach(function(t){var n=t.matrix;n&&(t.matrix=P(n,3,4))})}function Ci(t,n,e){for(var r,i,o,a=t,s=[],u=!e&&t===n||t===document.body,c=u,l=!1,f=3,p=!1,d=yi(n,n,!0).offsetParent;a&&!c;){var c=u,h=B(a),g=h.position,v=Si(a,h),v=Rn((v=v)&&"none"!==v?ot(v)?v:kn(v):[1,0,0,1,0,0]),m="fixed"===g,b={hasTransform:!1,fixedContainer:null},x=(m&&(p=!0,d=(b=function(t){for(var n=t.parentElement,e=!1;n;){var r=B(n).transform;if(r&&"none"!==r){e=!0;break}if(n===document.body)break;n=n.parentElement}return{fixedContainer:n||document.body,hasTransform:e}}(a)).fixedContainer),v.length),x=(l||16!==x||(l=!0,f=4,Di(s),o=o&&P(o,3,4)),l&&9===x&&(v=P(v,3,4)),Mi(a,h)),E=x.tagName,S=x.hasOffset,y=x.isSVG,M=x.origin,R=x.targetOrigin,x=x.offset,D=x[0],x=x[1],E=("svg"===E&&o?(s.push({type:"target",target:a,matrix:function(t,n){var e=Pi(t),r=e.width,i=e.height,o=e.clientWidth,e=e.clientHeight,a=o/r,s=e/i,t=t.preserveAspectRatio.baseVal,u=t.align,t=t.meetOrSlice,c=[0,0],l=[a,s],f=[0,0];{var p;1!==u&&(p=(u-2)%3,u=Math.floor((u-2)/3),c[0]=r*p/2,c[1]=i*u/2,t=2===t?Math.max(s,a):Math.min(a,s),l[0]=t,l[1]=t,f[0]=(o-r)/2*p,f[1]=(e-i)/2*u)}a=_n(l,n);return a[n*(n-1)]=f[0],a[n*(n-1)+1]=f[1],bi(a,n,c)}(a,f)}),s.push({type:"offset",target:a,matrix:I(f)})):"g"===E&&t!==a&&(x=D=0),void 0),C=!1,w=!1,O=(m?(E=b.fixedContainer,C=!0):(E=(O=yi(a,n)).offsetParent,C=O.isEnd,w=O.isStatic),Oe&&S&&!y&&w&&("relative"===g||"static"===g)&&(D-=E.offsetLeft,x-=E.offsetTop,u=u||C),0),y=0,w=0,g=0;if(m?S&&b.hasTransform&&(w=E.clientLeft,g=E.clientTop):(S&&d!==E&&(O=E.clientLeft,y=E.clientTop),S&&E===document.body&&(D+=(b=Ri(a,!1,h))[0],x+=b[1])),s.push({type:"target",target:a,matrix:bi(v,f,M)}),S?s.push({type:"offset",target:a,matrix:An([D-a.scrollLeft+O-w,x-a.scrollTop+y-g],f)}):s.push({type:"offset",target:a,origin:M}),o=o||v,r=r||M,i=i||R,c||m)break;a=E,u=C,e&&a!==document.body||(c=u)}return{offsetContainer:d,matrixes:s,targetMatrix:o=o||I(f),transformOrigin:r=r||[0,0],targetOrigin:i=i||[0,0],is3d:l,hasFixed:p}}function wi(t,n,e,r){void 0===e&&(e=n);var i,o=0,a=0,s=0,u={},e=(t&&(o=(i=Fi(t)).offsetWidth,a=i.offsetHeight),t&&(t=Ti((i=function(t,n,e,r){void 0===e&&(e=n);var n=Ci(t,n),i=n.matrixes,o=n.is3d,a=n.targetMatrix,s=n.transformOrigin,u=n.targetOrigin,c=n.offsetContainer,n=n.hasFixed,c=Ci(c,e,!0),l=c.matrixes,c=c.is3d,r=r||c||o,f=r?4:3,t="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,p=I(f),d=I(f),h=I(f),g=I(f),v=i.length;l.reverse(),i.reverse(),!o&&r&&(a=P(a,3,4),Di(i));!c&&r&&Di(l);l.forEach(function(t){d=K(d,t.matrix,f)});var c=e||document.body,m=(null==(e=l[0])?void 0:e.target)||yi(c,c,!0).offsetParent,b=l.slice(1).reduce(function(t,n){return K(t,n.matrix,f)},I(f)),e=(i.forEach(function(t,n){v-2===n&&(h=p.slice()),v-1===n&&(g=p.slice()),t.matrix||(n=function(t,n,e,r,i){var o=t.target,t=t.origin,a=n.matrix,n=Fi(o),s=n.offsetWidth,u=n.offsetHeight,n=e.getBoundingClientRect(),c=[0,0];e===document.body&&(c=Ri(o,!0));var o=o.getBoundingClientRect(),l=o.left-n.left+e.scrollLeft-(e.clientLeft||0)+c[0],f=o.top-n.top+e.scrollTop-(e.clientTop||0)+c[1],n=o.width,e=o.height,c=Mn(r,i,a),o=Gi(c,s,u,r),p=o.left,d=o.top,h=o.width,o=o.height,g=Y(c,t,r),c=T(g,[p,d]),v=[l+c[0]*n/h,f+c[1]*e/o],m=[0,0],b=0;for(;++b<10;){var x=y(i,r);x=T(Y(x,v,r),Y(x,g,r)),m[0]=x[0],m[1]=x[1];var x=Gi(Mn(r,i,An(m,r),a),s,u,r),E=x.left,x=x.top,E=E-l,x=x-f;if(Math.abs(E)<2&&Math.abs(x)<2)break;v[0]-=E,v[1]-=x}return m.map(function(t){return Math.round(t)})}(t,i[n+1],m,f,K(b,p,f)),t.matrix=An(n,f)),p=K(p,t.matrix,f)}),!t&&o);a=a||I(e?4:3);c=Oi(t&&16===a.length?P(a,4,3):a,e);return d=xn(d,f,f),{hasFixed:n,rootMatrix:d,beforeMatrix:h,offsetMatrix:g,allMatrix:p,targetMatrix:a,targetTransform:c,transformOrigin:s,targetOrigin:u,is3d:r}}(t,n,e,r)).allMatrix,i.transformOrigin,o,a),u=w(w({},i),t),s=Ni([(n=Ti(i.allMatrix,[50,50],100,100)).pos1,n.pos2],n.direction)),r?4:3);return w({width:o,height:a,rotation:s,rootMatrix:I(e),beforeMatrix:I(e),offsetMatrix:I(e),allMatrix:I(e),targetMatrix:I(e),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1},u)}function Oi(t,n){return void 0===n&&(n=9<t.length),"".concat(n?"matrix3d":"matrix","(").concat(Dn(t,!n).join(","),")")}function Pi(t){var n=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:n,clientHeight:e};t=t.viewBox,t=t&&t.baseVal||{x:0,y:0,width:0,height:0};return{x:t.x,y:t.y,width:t.width||n,height:t.height||e,clientWidth:n,clientHeight:e}}function Y(t,n,e){return E(t,yn(n,e),e)}function Bi(n,t,e,r){return[[0,0],[t,0],[0,e],[t,e]].map(function(t){return Y(n,t,r)})}function zi(t){var n=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]}),e=Math.min.apply(Math,n),r=Math.min.apply(Math,t),n=Math.max.apply(Math,n),t=Math.max.apply(Math,t);return{left:e,top:r,right:n,bottom:t,width:n-e,height:t-r}}function Gi(t,n,e,r){return zi(Bi(t,n,e,r))}function Ti(t,n,e,r){var i=16===t.length?4:3,e=Bi(t,e,r,i),r=e[0],o=r[0],r=r[1],a=e[1],s=a[0],a=a[1],u=e[2],c=u[0],u=u[1],l=e[3],f=l[0],l=l[1],t=Y(t,n,i),n=t[0],i=t[1],t=Math.min(o,s,c,f),p=Math.min(r,a,u,l);return{left:t,top:p,right:Math.max(o,s,c,f),bottom:Math.max(r,a,u,l),origin:[n-t||0,i-p||0],pos1:[o-t||0,r-p||0],pos2:[s-t||0,a-p||0],pos3:[c-t||0,u-p||0],pos4:[f-t||0,l-p||0],direction:Dt(e)}}function _i(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ai(t,n){return _i([n[0]-t[0],n[1]-t[1]])}function Ii(t,n,e,r){void 0===e&&(e=1),void 0===r&&(r=F(t,n));n=Ai(t,n);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(e,")"),width:"".concat(n,"px")}}function ki(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=e.length,o=e.reduce(function(t,n){return t+n[0]},0)/i,i=e.reduce(function(t,n){return t+n[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(i,"px) rotate(").concat(t,"rad) scale(").concat(n,")")}}function Fi(t,n){var e,r,i,o,a,s,u,c,l,f,p,d;return void 0===n&&(n=B(t)),!$(t.offsetWidth)||"svg"===t.tagName.toLowerCase()?(e="border-box"===n.boxSizing,u=parseFloat(n.borderLeftWidth)||0,l=parseFloat(n.borderRightWidth)||0,r=parseFloat(n.borderTopWidth)||0,i=parseFloat(n.borderBottomWidth)||0,s=parseFloat(n.paddingLeft)||0,c=parseFloat(n.paddingRight)||0,f=parseFloat(n.paddingTop)||0,o=parseFloat(n.paddingBottom)||0,p=a=parseFloat(n.width),d=n=parseFloat(n.height),c=(s=s+c)+(u+l),l=(u=f+o)+(r+i),e?(a=p-c,n=d-l):(p=a+c,d=n+l),{svg:!1,offsetWidth:p,offsetHeight:d,clientWidth:a+s,clientHeight:n+u,cssWidth:a,cssHeight:n}):{svg:!0,offsetWidth:p=(f=t.getBBox()).width,offsetHeight:d=f.height,clientWidth:p,clientHeight:d,cssWidth:p,cssHeight:d}}function Ni(t,n){return F(0<n?t[0]:t[1],0<n?t[1]:t[0])}function Wi(t,n,e,r,i){var o=1,a=[0,0],s=Yi(),u=Yi(),c=Yi(),e=wi(n,e,i,!1);return n&&(i=e.is3d?4:3,o=(i=Ti(e.offsetMatrix,J(e.transformOrigin,En(e.targetMatrix,i)),e.width,e.height)).direction,a=J(i.origin,[i.left-e.left,i.top-e.top]),s=ji(n),u=ji(yi(r,r,!0).offsetParent||document.body,!0),t&&(c=ji(t))),w({targetClientRect:s,containerClientRect:u,moveableClientRect:c,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:n},e)}function Yi(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function ji(t,n){var e=0,r=0,i=0,o=0,a=(t===document.body||t===document.documentElement?(i=window.innerWidth,o=window.innerHeight,e=(a=[-(a=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop])[0],-a[1]])[0],r=a[1]):(e=(a=t.getBoundingClientRect()).left,r=a.top,i=a.width,o=a.height),{left:e,right:e+i,top:r,bottom:r+o,width:i,height:o});return n&&(a.clientLeft=t.clientLeft,a.clientTop=t.clientTop,a.clientWidth=t.clientWidth,a.clientHeight=t.clientHeight,a.scrollWidth=t.scrollWidth,a.scrollHeight=t.scrollHeight,a.overflow="visible"!==B(t).overflow),a}function qi(t){if(t){var n,t=t.getAttribute("data-direction");if(t)return n=[0,0],-1<t.indexOf("w")&&(n[0]=-1),-1<t.indexOf("e")&&(n[0]=1),-1<t.indexOf("n")&&(n[1]=-1),-1<t.indexOf("s")&&(n[1]=1),n}}function Xi(t,n){return[J(n,t[0]),J(n,t[1]),J(n,t[2]),J(n,t[3])]}function Hi(t){var n=t.left,e=t.top;return Xi([t.pos1,t.pos2,t.pos3,t.pos4],[n,e])}function Li(t,n){var e;null!=(e=t[n])&&e.unset(),t[n]=null}function tt(t,n,e,r){var i=n.datas,e=(i.datas||(i.datas={}),w(w({},e),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,moveable:t,datas:i.datas}));return i.isStartEvent?r||(i.lastEvent=e):i.isStartEvent=!0,e}function Vi(t,n,e){var r=n.datas,i=("isDrag"in e?e:n).isDrag;return r.datas||(r.datas={}),w(w({isDrag:i},e),{moveable:t,target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:n.isDouble,datas:r.datas})}function Ui(t,n,e){t._emitter.on(n,e)}function nt(t,n,e,r){return t.triggerEvent(n,e,r)}function B(t,n){return window.getComputedStyle(t,n)}function $i(t,e,r){var i={},o={};return t.filter(function(n){var t=n.name;if(i[t]||!e.some(function(t){return n[t]}))return!1;if(!r&&n.ableGroup){if(o[n.ableGroup])return!1;o[n.ableGroup]=!0}return i[t]=!0})}function Zi(t,n){return t===n||null==t&&null==n}function Ki(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(n)-Math.abs(t)}),t[0]}function Ji(t,n,e){return E(y(t,e),yn(n,e),e)}function Qi(t,n){var e=t.is3d,t=Ji(t.rootMatrix,[n.distX,n.distY],e?4:3);return n.distX=t[0],n.distY=t[1],n}function to(t,n,e,r,i){return T(Y(t,J(e,n),i),r)}function no(t,n,e){return e?"".concat(t/n*100,"%"):"".concat(t,"px")}function eo(t){return Math.abs(t)<=_e?0:t}function ro(t,n){return n.isRequest?("resizable"===n.requestAble||"scalable"===n.requestAble)&&n.parentDirection:a(n.inputEvent.target,k("direction"))}function io(t){var n,e={};for(n in t)e[t[n]]=n;return e}function oo(t,n){return t?st(t)?n?document.querySelector(t):t:ct(t)?t():"current"in t?t.current:t:null}function ao(t,e){return t?((n=t)&&ot(n)&&(!(n instanceof Element)&&(at(n)||"length"in n))?[].slice.call(t):[t]).reduce(function(t,n){return st(n)&&e?Q(Q([],t,!0),[].slice.call(document.querySelectorAll(n)),!0):(t.push(oo(n,e)),t)},[]):[];var n}function so(t,n){var e=t.rootMatrix,t=t.is3d,e=y(e,t?4:3);return(e=t?e:P(e,3,4))[12]=0,e[13]=0,e[14]=0,Fn(e,n)}function uo(t,n,e,r,i){var o,a,s=t[0],t=t[1],u=0,c=0;return i&&s&&t?(i=F([0,0],n),o=F([0,0],r),a=_i(n),i=Math.cos(i-o)*a,r[0]?c=r[1]?(o=2*r[0]*s,a=2*r[1]*t,s=_i([o+n[0],a+n[1]])-_i([o,a]),t=F([0,0],[e,1]),u=Math.cos(t)*s,Math.sin(t)*s):(u=i)/e:u=(c=i)*e):(u=r[0]*n[0],c=r[1]*n[1]),[u,c]}function co(e,t,n,r){var i,o=n.ratio,a=n.startOffsetWidth,s=n.startOffsetHeight,u=0,c=0,l=r.distX,f=r.distY,p=r.parentDistance,d=r.parentDist,h=r.parentScale,r=r.isPinch,g=n.fixedDirection;return d?(u=d[0],c=d[1],t&&(u?c=c||u/o:u=c*o)):h?(u=(h[0]-1)*a,c=(h[1]-1)*s):r?p&&(c=(u=p)*s/a):(i=ri({datas:n,distX:l,distY:f}),u=(d=uo([a,s],i=[0,1].map(function(t){var n=Math.abs(e[t]-g[t]);return i[t]*(n=0!==n?2/n:n)}),o,e,t))[0],c=d[1]),{distWidth:u,distHeight:c}}var lo=we("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(e,r){var t=r.datas,n=r.targets,i=r.angle,o=r.originalDatas,a=e.props,s=a.pinchable,a=a.ables;if(!s)return!1;var u="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),a=(!0===s?e.controlAbles:a.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),l=tt(e,r,{}),n=(n&&(l.targets=n),nt(e,u,l)),u=(t.isPinch=!1!==n,t.ables=a,t.isPinch);return!!u&&(a.forEach(function(t){var n;o[t.name]=o[t.name]||{},t[c]&&(n=w(w({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](e,n))}),e.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},u)},pinch:function(n,e){var r,i,t=e.datas,o=e.scale,a=e.distance,s=e.originalDatas,u=e.inputEvent,c=e.targets,l=e.angle;if(t.isPinch)return r=a*(1-1/o),a=tt(n,e,{}),c&&(a.targets=c),o="onPinch".concat(c?"Group":""),nt(n,o,a),o=t.ables,i="drag".concat(c?"Group":"","Control"),o.forEach(function(t){t[i]&&t[i](n,w(w({},e),{datas:s[t.name],inputEvent:u,parentDistance:r,parentRotate:l,isPinch:!0}))}),a},pinchEnd:function(n,e){var t,r,i,o=e.datas,a=e.isPinch,s=e.inputEvent,u=e.targets,c=e.originalDatas;if(o.isPinch)return r="onPinch".concat(u?"Group":"","End"),t=Vi(n,e,{isDrag:a}),u&&(t.targets=u),nt(n,r,t),r=o.ables,i="drag".concat(u?"Group":"","ControlEnd"),r.forEach(function(t){t[i]&&t[i](n,w(w({},e),{isDrag:a,datas:c[t.name],inputEvent:s,isPinch:!0}))}),a},pinchGroupStart:function(t,n){return this.pinchStart(t,w(w({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,w(w({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,w(w({},n),{targets:t.props.targets}))}}),fo={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,e=e.edge;if(r)return(e?$e:Ue)(t,n)},dragControlCondition:ro,dragControlStart:function(t,n){var e=n.inputEvent,r=n.isPinch,i=n.parentDirection,o=n.datas,a=n.parentFlag,i=i||(r?[0,0]:qi(e.target)),e=t.state,s=e.target,u=e.width,e=e.height;if(!i||!s)return!1;r||Jr(t,n),o.datas={},o.direction=i,o.startOffsetWidth=u,o.startOffsetHeight=e,o.prevWidth=0,o.prevHeight=0,r=B(r=s),r=[parseFloat(r.width),parseFloat(r.height)],o.startWidth=r[0],o.startHeight=r[1];var c,l,f,p,d,r=[Math.max(0,u-o.startWidth),Math.max(0,e-o.startHeight)],s=(o.minSize=r,o.maxSize=[1/0,1/0],a||(v=(a=B(s)).position,c=a.minWidth,l=a.minHeight,f=a.maxWidth,a=a.maxHeight,p=u,d=e,(s=(v="static"===v||"relative"===v)?s.parentElement:s.offsetParent)&&(p=s.clientWidth,d=s.clientHeight,v&&(v=B(s),p-=parseFloat(v.paddingLeft)||0,d-=parseFloat(v.paddingTop)||0)),o.minSize=J([Z(c,p)||0,Z(l,d)||0],r),o.maxSize=J([Z(f,p)||1/0,Z(a,d)||1/0],r)),t.props.transformOrigin||"% %");function h(t){o.ratio=t&&isFinite(t)?t:0}function g(t){o.fixedDirection=t,o.fixedPosition=W(o.startPositions,t)}o.transformOrigin=s&&st(s)?s.split(" "):s,o.isWidth=!i[0]&&!i[1]||i[0]||!i[1],o.startPositions=Hi(t.state),h(u/e),g([-i[0],-i[1]]);var v=tt(t,n,{direction:i,set:function(t){var n=t[0],t=t[1];o.startWidth=n,o.startHeight=t},setMin:function(t){o.minSize=[Z("".concat(t[0]),0)||0,Z("".concat(t[1]),0)||0]},setMax:function(t){t=[t[0]||1/0,t[1]||1/0];ut(t[0])&&!isFinite(t[0])||(t[0]=Z("".concat(t[0]),0)||1/0),ut(t[1])&&!isFinite(t[1])||(t[1]=Z("".concat(t[1]),0)||1/0),o.maxSize=t},setRatio:h,setFixedDirection:o.setFixedDirection=g,setOrigin:function(t){o.transformOrigin=t},dragStart:_.dragStart(t,(new je).dragStart([0,0],n))});return!1!==nt(t,"onResizeStart",v)&&(o.isResize=!0,t.state.snapRenderInfo={request:n.isRequest,direction:i}),!!o.isResize&&v},dragControl:function(t,e){var r=e.datas,n=e.parentFlag,i=e.isPinch,o=e.parentKeepRatio,a=e.dragClient,s=e.parentDist,u=e.isRequest,c=r.isResize,l=r.transformOrigin,f=r.startWidth,p=r.startHeight,d=r.prevWidth,h=r.prevHeight,g=r.minSize,v=r.maxSize,m=r.ratio,b=r.isWidth,x=r.startOffsetWidth,E=r.startOffsetHeight;if(c){var c=t.props,S=c.resizeFormat,y=c.throttleResize,M=void 0===y?1:y,y=c.parentMoveable,R=r.direction,D=R,C=0,w=0,O=(R[0]||R[1]||(D=[1,1]),m&&(null!=o?o:c.keepRatio)||!1),o=z(),P=o[0],B=o[1],c=(r.setFixedDirection(r.fixedDirection),nt(t,"onBeforeResize",tt(t,e,{setFixedDirection:function(t){return r.setFixedDirection(t),t=z(),P=t[0],B=t[1],[P,B]},boundingWidth:P,boundingHeight:B,setSize:function(t){P=t[0],B=t[1]}},!0)),a),o=(a||(c=!n&&i?mi(t,[0,0]):r.fixedPosition),[0,0]),u=(i||(o=function(t,e,r,n,i,o,a){if(!or(t,"resizable"))return[0,0];var s=a.fixedDirection,u=t.state,c=u.allMatrix,l=u.is3d;return Lr(t,function(t,n){return Xr(c,e+t,r+n,s,i,l)},e,r,n,i,o,a)}(t,P,B,R,c,u,r)),s&&(s[0]||(o[0]=0),s[1]||(o[1]=0)),O?(D[0]&&D[1]&&o[0]&&o[1]&&(Math.abs(o[0])>Math.abs(o[1])?o[1]=0:o[0]=0),(a=!o[0]&&!o[1])&&G(),D[0]&&!D[1]||o[0]&&!o[1]||a&&b?(P+=o[0],B=P/m):(!D[0]&&D[1]||!o[0]&&o[1]||a&&!b)&&(B+=o[1],P=B*m)):(P+=o[0],B+=o[1],P=Math.max(0,P),B=Math.max(0,B)),n=Mt([P,B],g,v,m),P=n[0],B=n[1],G(),[(C=P-x)-d,(w=B-E)-h]),s=(r.prevWidth=C,r.prevHeight=w,vi(t,P,B,r.fixedDirection,c,l));if(y||!u.every(function(t){return!t})||!s.every(function(t){return!t}))return nt(t,"onResize",a=tt(t,e,{width:f+C,height:p+w,offsetWidth:Math.round(P),offsetHeight:Math.round(B),boundingWidth:P,boundingHeight:B,direction:R,dist:[C,w],delta:u,isPinch:!!i,drag:_.drag(t,Ye(e,t.state,s,!!i,!1))})),a}function z(){var t=co(D,O,r,e),t=(C=t.distWidth,w=t.distHeight,D[0]||O?Math.max(x+C,_e):x),n=D[1]||O?Math.max(E+w,_e):E;return O&&x&&E&&(b?n=t/m:t=n*m),[t,n]}function G(){var t;S&&(t=S([P,B]),P=t[0],B=t[1]),P=N(P,M),B=N(B,M)}},dragControlAfter:function(t,n){var e=n.datas,r=e.isResize,i=e.startOffsetWidth,o=e.startOffsetHeight,a=e.prevWidth,s=e.prevHeight;if(r)return r=t.state,i=r.width-(i+a),a=r.height-(o+s),r=3<Math.abs(i),o=3<Math.abs(a),r&&(e.startWidth+=i,e.startOffsetWidth+=i,e.prevWidth+=i),o&&(e.startHeight+=a,e.startOffsetHeight+=a,e.prevHeight+=a),r||o?this.dragControl(t,n):void 0},dragControlEnd:function(t,n){var e=n.datas;if(e.isResize)return e.isResize=!1,e=Vi(t,n,{}),nt(t,"onResizeEnd",e),e},dragGroupControlCondition:ro,dragGroupControlStart:function(i,t){var o=t.datas,n=this.dragControlStart(i,t);if(!n)return!1;var r=qe(i,"resizable",t);function a(t,n){var e=o.fixedDirection,r=o.fixedPosition,t=W(n.datas.startPositions||Hi(t.state),e),e=E(Tn(-i.rotation/180*Math.PI,3),[t[0]-r[0],t[1]-r[1],1],3),t=e[0],r=e[1];return n.datas.originalX=t,n.datas.originalY=r,n}function e(e){n.setFixedDirection(e),s.forEach(function(t,n){t.setFixedDirection(e),a(t.moveable,r[n])})}var s=He(i,this,"dragControlStart",t,a),t=(o.setFixedDirection=e,w(w({},n),{targets:i.props.targets,events:s,setFixedDirection:e})),t=nt(i,"onResizeGroupStart",t);return o.isResize=!1!==t,!!o.isResize&&n},dragGroupControl:function(i,n){var t=n.datas;if(t.isResize){Ui(i,"onBeforeResize",function(t){nt(i,"onBeforeResizeGroup",tt(i,n,w(w({},t),{targets:i.props.targets}),!0))});var e,o,a,s,r,u,c=this.dragControl(i,n);if(c)return r=c.boundingWidth,u=c.boundingHeight,e=c.dist,o=i.props.keepRatio,a=[r/(r-e[0]),u/(u-e[1])],s=t.fixedPosition,r=He(i,this,"dragControl",n,function(t,n){var e=E(Tn(i.rotation/180*Math.PI,3),[n.datas.originalX*a[0],n.datas.originalY*a[1],1],3),r=e[0],e=e[1];return w(w({},n),{parentDist:null,parentScale:a,dragClient:J(s,[r,e]),parentKeepRatio:o})}),u=w({targets:i.props.targets,events:r},c),nt(i,"onResizeGroup",u),u}},dragGroupControlEnd:function(t,n){var e,r=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),e=He(t,this,"dragControlEnd",n),nt(t,"onResizeGroupEnd",Vi(t,n,{targets:t.props.targets,events:e})),r},request:function(t){var n={},e=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?e=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(e+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:n,parentDist:[e,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},po={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,e=e.edge;if(!r&&i)return(e?$e:Ue)(t,n)},dragControlCondition:ro,dragControlStart:function(t,n){var e=n.datas,r=n.isPinch,i=n.inputEvent,i=n.parentDirection||(r?[0,0]:qi(i.target)),o=t.state,a=o.width,s=o.height,u=o.targetTransform,c=o.target,l=o.pos1,f=o.pos2,o=o.pos4;if(!i||!c)return!1;r||Jr(t,n),e.datas={},e.transform=u,e.prevDist=[1,1],e.direction=i,e.startOffsetWidth=a,e.startOffsetHeight=s,e.startValue=[1,1];c=g(l,f),r=g(f,o),u=!i[0]&&!i[1]||i[0]||!i[1];function p(t){e.ratio=t&&isFinite(t)?t:0}function d(t){e.fixedDirection=t,e.fixedPosition=W(e.startPositions,t)}e.scaleWidth=c,e.scaleHeight=r,e.scaleXRatio=c/a,e.scaleYRatio=r/s,ui(n,"scale"),e.isWidth=u,e.startPositions=Hi(t.state),e.setFixedDirection=d,p(g(l,f)/g(f,o)),d([-i[0],-i[1]]);c=tt(t,n,w(w({direction:i,set:function(t){e.startValue=t},setRatio:p,setFixedDirection:d},si(n)),{dragStart:_.dragStart(t,(new je).dragStart([0,0],n))}));return!1!==nt(t,"onScaleStart",c)&&(e.isScale=!0,t.state.snapRenderInfo={request:n.isRequest,direction:i}),!!e.isScale&&c},dragControl:function(t,e){Qr(e,"scale");var r=e.datas,n=e.parentKeepRatio,i=e.parentFlag,o=e.isPinch,a=e.dragClient,s=e.isRequest,u=r.prevDist,c=r.direction,l=r.startOffsetWidth,f=r.startOffsetHeight,p=r.isScale,d=r.startValue,h=r.isWidth,g=r.ratio;if(!p)return!1;var p=t.props,v=p.throttleScale,m=p.parentMoveable,b=c,x=(c[0]||c[1]||(b=[1,1]),g&&(null!=n?n:p.keepRatio)||!1),n=t.state;function E(){var t=co(b,x,r,e),n=t.distWidth,t=t.distHeight,n=(l+n)/l,t=(f+t)/f,n=b[0]||x?n*d[0]:d[0],t=b[1]||x?t*d[1]:d[1];return[n=0===n?1e-9*(0<u[0]?1:-1):n,t=0===t?1e-9*(0<u[1]?1:-1):t]}var S=E(),p=(o||!t.props.groupable||at(p=(n.snapRenderInfo||{}).direction)&&(p[0]||p[1])&&(n.snapRenderInfo={direction:c,request:e.isRequest}),nt(t,"onBeforeScale",tt(t,e,{scale:S,setFixedDirection:function(t){return r.setFixedDirection(t),S=E()},setScale:function(t){S=t}},!0)),[S[0]/d[0],S[1]/d[1]]),n=a,y=[0,0],i=(a||(n=!i&&o?mi(t,[0,0]):r.fixedPosition),o||(y=Vr(t,p,c,s,r)),x?(b[0]&&b[1]&&y[0]&&y[1]&&(Math.abs(y[0]*l)>Math.abs(y[1]*f)?y[1]=0:y[0]=0),(a=!y[0]&&!y[1])&&(h?p[0]=N(p[0]*d[0],v)/d[0]:p[1]=N(p[1]*d[1],v)/d[1]),b[0]&&!b[1]||y[0]&&!y[1]||a&&h?(p[0]+=y[0],i=l*p[0]*d[0]/g,p[1]=i/f/d[1]):(!b[0]&&b[1]||!y[0]&&y[1]||a&&!h)&&(p[1]+=y[1],s=f*p[1]*d[1]*g,p[0]=s/l/d[0])):(p[0]+=y[0],p[1]+=y[1],y[0]||(p[0]=N(p[0]*d[0],v)/d[0]),y[1]||(p[1]=N(p[1]*d[1],v)/d[1])),0===p[0]&&(p[0]=1e-9*(0<u[0]?1:-1)),0===p[1]&&(p[1]=1e-9*(0<u[1]?1:-1)),[p[0]/u[0],p[1]/u[1]]),s=(S=[p[0]*d[0],p[1]*d[1]],a=r.fixedDirection,h=n,g=r,di(t,"scale(".concat(p.join(", "),")"),a,h,g)),y=T(s,r.prevInverseDist||[0,0]);if(r.prevDist=p,r.prevInverseDist=s,S[0]===u[0]&&S[1]===u[1]&&y.every(function(t){return!t})&&!m)return!1;v=ti(r,"scale(".concat(S.join(", "),")"),"scale(".concat(p.join(", "),")")),n=tt(t,e,w({offsetWidth:l,offsetHeight:f,direction:c,scale:S,dist:p,delta:i,isPinch:!!o},pi(t,v,y,o,e)));return nt(t,"onScale",n),n},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isScale&&(e.isScale=!1,nt(t,"onScaleEnd",Vi(t,n,{})),r)},dragGroupControlCondition:ro,dragGroupControlStart:function(i,t){var o=t.datas,n=this.dragControlStart(i,t);if(!n)return!1;var r=qe(i,"resizable",t);function a(t,n){var e=o.fixedDirection,r=o.fixedPosition,t=W(n.datas.startPositions||Hi(t.state),e),e=E(Tn(-i.rotation/180*Math.PI,3),[t[0]-r[0],t[1]-r[1],1],3),t=e[0],r=e[1];return n.datas.originalX=t,n.datas.originalY=r,n}o.moveableScale=i.scale;function e(e){n.setFixedDirection(e),s.forEach(function(t,n){t.setFixedDirection(e),a(t.moveable,r[n])})}var s=He(i,this,"dragControlStart",t,a),t=(o.setFixedDirection=e,w(w({},n),{targets:i.props.targets,events:s,setFixedDirection:e})),u=nt(i,"onScaleGroupStart",t);return o.isScale=!1!==u,!!o.isScale&&t},dragGroupControl:function(i,n){var t=n.datas;if(t.isScale){Ui(i,"onBeforeScale",function(t){nt(i,"onBeforeScaleGroup",tt(i,n,w(w({},t),{targets:i.props.targets}),!0))});var o,a,s,u,e,r=this.dragControl(i,n);if(r)return e=t.moveableScale,i.scale=[r.scale[0]*e[0],r.scale[1]*e[1]],o=i.props.keepRatio,a=r.dist,s=r.scale,u=t.fixedPosition,e=He(i,this,"dragControl",n,function(t,n){var e=E(Tn(i.rotation/180*Math.PI,3),[n.datas.originalX*a[0],n.datas.originalY*a[1],1],3),r=e[0],e=e[1];return w(w({},n),{parentDist:null,parentScale:s,parentKeepRatio:o,dragClient:J(u,[r,e])})}),t=w({targets:i.props.targets,events:e},r),nt(i,"onScaleGroup",t),t}},dragGroupControlEnd:function(t,n){var e,r=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),e=He(t,this,"dragControlEnd",n),nt(t,"onScaleGroupEnd",Vi(t,n,{targets:t.props.targets,events:e})),r},request:function(){var n={},e=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return e+=t.deltaWidth,r+=t.deltaHeight,{datas:n,parentDist:[e,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function ho(t,e){return t.map(function(t,n){return U(t,e[n],1,2)})}function go(t,n,e){n=F(t,n),t=F(t,e)-n;return 0<=t?t:t+2*Math.PI}var vo={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.warpable,e=e.zoom;if(r||i||!o)return[];var r=t.state,i=r.pos1,o=r.pos2,a=r.pos3,r=r.pos4,s=ho(i,o),u=ho(o,i),c=ho(i,a),i=ho(a,i),l=ho(a,r),a=ho(r,a),f=ho(o,r),r=ho(r,o);return Q([n.createElement("div",{className:k("line"),key:"middeLine1",style:Ii(s,l,e)}),n.createElement("div",{className:k("line"),key:"middeLine2",style:Ii(u,a,e)}),n.createElement("div",{className:k("line"),key:"middeLine3",style:Ii(c,f,e)}),n.createElement("div",{className:k("line"),key:"middeLine4",style:Ii(i,r,e)})],Ue(t,n),!0)},dragControlCondition:function(t,n){return!n.isRequest&&a(n.inputEvent.target,k("direction"))},dragControlStart:function(t,n){var e=n.datas,r=n.inputEvent,i=t.props.target,r=qi(r.target);if(!r||!i)return!1;var i=t.state,o=i.transformOrigin,a=i.is3d,s=i.targetTransform,u=i.targetMatrix,c=i.width,l=i.height,f=i.left,p=i.top;return e.datas={},e.targetTransform=s,e.warpTargetMatrix=a?u:P(u,3,4),e.targetInverseMatrix=xn(y(e.warpTargetMatrix,4),3,4),e.direction=r,e.left=f,e.top=p,e.poses=[[0,0],[c,0],[0,l],[c,l]].map(function(t){return T(t,o)}),e.nextPoses=e.poses.map(function(t){var n=t[0],t=t[1];return E(e.warpTargetMatrix,[n,t,0,1],4)}),e.startValue=I(4),e.prevMatrix=I(4),e.absolutePoses=Hi(i),e.posIndexes=ii(r),Jr(t,n),ui(n,"matrix3d"),!(i.snapRenderInfo={request:n.isRequest,direction:r})!==nt(t,"onWarpStart",tt(t,n,w({set:function(t){e.startValue=t}},si(n))))&&(e.isWarp=!0),e.isWarp},dragControl:function(t,n){var e=n.datas,r=n.isRequest,i=n.distX,o=n.distY,a=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,c=e.startValue,l=e.poses,f=e.posIndexes,p=e.absolutePoses;if(!u)return!1;Qr(n,"matrix3d"),or(t,"warpable")&&(1<(u=f.map(function(t){return p[t]})).length&&u.push([(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]),u=(r=Nr(t,r,{horizontal:u.map(function(t){return t[1]+o}),vertical:u.map(function(t){return t[0]+i})})).horizontal,r=r.vertical,o-=u.offset,i-=r.offset);var d=ri({datas:e,distX:i,distY:o},!0),h=e.nextPoses.slice();if(f.forEach(function(t){h[t]=J(h[t],d)}),!Ge.every(function(t){return n=t.map(function(t){return l[t]}),t=t.map(function(t){return h[t]}),n=go(n[0],n[1],n[2]),t=go(t[0],t[1],t[2]),!((e=Math.PI)<=n&&t<=e||n<=e&&e<=t);var n,e}))return!1;u=In(l[0],l[2],l[1],l[3],h[0],h[2],h[1],h[3]);if(!u.length)return!1;r=ni(e,K(a,u,4),!0),f=K(y(s,4),r,4),a=K(c,e.prevMatrix=r,4),u=ti(e,"matrix3d(".concat(a.join(", "),")"),"matrix3d(".concat(r.join(", "),")"));return li(n,u),nt(t,"onWarp",tt(t,n,{delta:f,matrix:a,dist:r,multiply:K,transform:u})),!0},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isWarp&&(e.isWarp=!1,nt(t,"onWarpEnd",Vi(t,n,{})),r)}},mo=k("area-pieces"),bo=k("area-piece"),xo=k("avoid");function Eo(t){var n,e=t.areaElement;e&&(n=(t=t.state).width,t=t.height,Ot(e,xo),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(t,"px"))}function So(t){return t.createElement("div",{key:"area_pieces",className:mo},t.createElement("div",{className:bo}),t.createElement("div",{className:bo}),t.createElement("div",{className:bo}),t.createElement("div",{className:bo}))}var yo={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var e=t.props,r=e.target,i=e.dragArea,o=e.groupable,e=e.passDragArea,a=t.state,s=a.width,u=a.height,a=a.renderPoses,e=e?k("area","pass"):k("area");if(o)return[n.createElement("div",{key:"area",ref:x(t,"areaElement"),className:e}),So(n)];if(!r||!i)return[];o=In([0,0],[s,0],[0,u],[s,u],a[0],a[1],a[2],a[3]),r=o.length?Oi(o,!0):"none";return[n.createElement("div",{key:"area",ref:x(t,"areaElement"),className:e,style:{top:"0px",left:"0px",width:"".concat(s,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:r}}),So(n)]},dragStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;e.isDragArea=!1;var n=t.areaElement,e=t.state,t=e.moveableClientRect,o=e.renderPoses,a=e.rootMatrix,s=e.is3d,u=t.left,t=t.top,o=zi(o),c=o.left,l=o.top,f=o.width,o=o.height,a=Ji(a,[r-u,i-t],s?4:3),r=a[0],u=a[1],i=[{left:c,top:l,width:f,height:(u-=l)-10},{left:c,top:l,width:(r-=c)-10,height:o},{left:c,top:l+u+10,width:f,height:o-u-10},{left:c+r+10,top:l,width:f-r-10,height:o}],p=[].slice.call(n.nextElementSibling.children);i.forEach(function(t,n){p[n].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")}),wt(n,xo),e.disableNativeEvent=!0},drag:function(t,n){var e=n.datas,n=n.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,Eo(t))},dragEnd:function(t,n){this.enableNativeEvent(t);var e=n.inputEvent,n=n.datas;if(!e)return!1;n.isDragArea||Eo(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){Eo(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var n=t.state;n.disableNativeEvent&&xt(function(){n.disableNativeEvent=!1})}},Mo=we("origin",{render:function(t,n){var e=t.props.zoom,t=t.state,r=t.beforeOrigin,t=t.rotation;return[n.createElement("div",{className:k("control","origin"),style:ki(t,e,r),key:"beforeOrigin"})]}});function Ro(t){t=t.scrollContainer;return[t.scrollLeft,t.scrollTop]}var Do={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(e,r){var t=e.props.scrollContainer,t=void 0===t?e.getContainer():t,n=new ae,t=oo(t,!0),i=(r.datas.dragScroll=n,r.isControl?"controlGesto":"targetGesto"),o=r.targets;n.on("scroll",function(t){var n=t.container,t=t.direction,n=tt(e,r,{scrollContainer:n,direction:t}),t=o?"onScrollGroup":"onScroll";o&&(n.targets=o),nt(e,t,n)}).on("move",function(t){var n=t.offsetX,t=t.offsetY;e[i].scrollBy(n,t,r.inputEvent,!1)}),n.dragStart(r,{container:t})},checkScroll:function(t,n){var e,r,i,o=n.datas.dragScroll;if(o)return r=t.props,e=r.scrollContainer,t=void 0===e?t.getContainer():e,e=r.scrollThreshold,r=r.getScrollPosition,i=void 0===r?Ro:r,o.drag(n,{container:t,threshold:void 0===e?0:e,getScrollPosition:function(t){return i({scrollContainer:t.container,direction:t.direction})}}),!0},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,w(w({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,w(w({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,w(w({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,w(w({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,w(w({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,w(w({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,w(w({},n),{targets:t.props.targets}))}},Co={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},wo=we("padding",{render:function(t,r){var n=t.props;if(n.dragArea)return[];var n=n.padding||{},e=n.left,i=n.top,i=void 0===i?0:i,o=n.right,o=void 0===o?0:o,n=n.bottom,n=void 0===n?0:n,t=t.state,a=t.renderPoses,s=[t.pos1,t.pos2,t.pos3,t.pos4],t=[];return 0<(void 0===e?0:e)&&t.push([0,2]),0<i&&t.push([0,1]),0<o&&t.push([1,3]),0<n&&t.push([2,3]),t.map(function(t,n){var e=t[0],t=t[1],e=In([0,0],[100,0],[0,100],[100,100],s[e],s[t],a[e],a[t]);if(e.length)return r.createElement("div",{key:"padding".concat(n),className:k("padding"),style:{transform:Oi(e,!0)}})})}}),Oo=["nw","ne","se","sw"];function Po(t,n){var e=t[0]+t[1],e=n<e?n/e:1;return t[0]*=e,t[1]=n-t[1]*e,t}var Bo=[1,2,5,6],zo=[0,3,4,7],Go=[1,-1,-1,1],To=[1,1,-1,-1];function _o(t,i,o,a,s,u,c,l,f){void 0===u&&(u=0),void 0===c&&(c=0),void 0===l&&(l=a),void 0===f&&(f=s);var p=[],d=!1,t=t.map(function(t,n){var e,n=i[n],r=n.horizontal,n=n.vertical;return n&&!d&&(d=!0,p.push("/")),d?(e=Math.max(0,1===n?t[1]-c:f-t[1]),p.push(no(e,s,o))):(e=Math.max(0,1===r?t[0]-u:l-t[0]),p.push(no(e,a,o))),e});return{styles:p,raws:t}}function Ao(t){for(var n=[0,0],e=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,e[0]=i+1),o.vertical&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:n,verticalRange:e}}function Io(t,r,i,o,a,n){void 0===n&&(n=[0,0]);var e=t.indexOf("/"),e=(-1<e?t.slice(0,e):t).length,s=t.slice(0,e),t=t.slice(e+1),e=s[0],e=void 0===e?"0px":e,u=s[1],u=void 0===u?e:u,c=s[2],c=void 0===c?e:c,l=s[3],l=void 0===l?u:l,f=t[0],f=void 0===f?e:f,p=t[1],p=void 0===p?f:p,d=t[2],d=void 0===d?f:d,h=t[3],h=void 0===h?p:h,g=[e,u,c,l].map(function(t){return Z(t,r)}),v=[f,p,d,h].map(function(t){return Z(t,i)}),e=g.slice(),u=v.slice(),c=Po([e[0],e[1]],r),d=(e[0]=c[0],e[1]=c[1],l=Po([e[3],e[2]],r),e[3]=l[0],e[2]=l[1],f=Po([u[0],u[3]],i),u[0]=f[0],u[3]=f[1],p=Po([u[1],u[2]],i),u[1]=p[0],u[2]=p[1],e.slice(0,Math.max(n[0],s.length))),h=u.slice(0,Math.max(n[1],t.length));return Q(Q([],d.map(function(t,n){var e=Oo[n];return{horizontal:Go[n],vertical:0,pos:[o+t,a+(-1===To[n]?i:0)],sub:!0,raw:g[n],direction:e}}),!0),h.map(function(t,n){var e=Oo[n];return{horizontal:0,vertical:To[n],pos:[o+(-1===Go[n]?r:0),a+t],sub:!0,raw:v[n],direction:e}}),!0)}function ko(t,n,e,r,i){void 0===i&&(i=n.length);var o=Ao(t.slice(r)),a=o.horizontalRange,o=o.verticalRange,r=e-r,s=0;if(0==r)s=i;else if(0<r&&r<a[1])s=a[1]-r;else{if(!(r>=o[0]))return;s=o[0]+o[1]-r}t.splice(e,s),n.splice(e,s)}function Fo(t,n,e,r,i,o,a,s,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var f=Ao(t.slice(e)),p=f.horizontalRange,f=f.verticalRange;if(-1<r)for(var d=1===Go[r]?o-c:s-o,h=p[1];h<=r;++h){var g=1===To[h]?l:u,v=0;if(r===h?v=o:0===h?v=c+d:-1===Go[h]&&(v=s-(n[e][0]-c)),t.splice(e+h,0,{horizontal:Go[h],vertical:0,pos:[v,g]}),n.splice(e+h,0,[v,g]),0===h)break}else if(-1<i)for(var m=1===To[i]?a-l:u-a,b=(0===p[1]&&0===f[1]&&(t.push({horizontal:Go[0],vertical:0,pos:p=[c+m,l]}),n.push(p)),f[0]),h=f[1];h<=i;++h){v=1===Go[h]?c:s,g=0;if(i===h?g=a:0===h?g=l+m:1===To[h]?g=n[e+b][1]:-1===To[h]&&(g=u-(n[e+b][1]-l)),t.push({horizontal:0,vertical:To[h],pos:[v,g]}),n.push([v,g]),0===h)break}}function No(t,e){return void 0===e&&(e=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?e[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?e[n]:null}).filter(function(t){return null!=t})}}var Wo=[[0,-1,"n"],[1,0,"e"]],Yo=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function jo(t,n,e){var r=t.props.clipRelative,t=t.state,i=t.width,o=t.height,t=n.type,n=n.poses,a="rect"===t,s="circle"===t;if("polygon"===t)return e.map(function(t){return"".concat(no(t[0],i,r)," ").concat(no(t[1],o,r))});if(a||"inset"===t){var u=e[1][1],c=e[3][0],l=e[7][0],f=e[5][1];if(a)return[u,c,f,l].map(function(t){return"".concat(t,"px")});var p,d=[u,i-c,o-f,l].map(function(t,n){return no(t,n%2?i:o,r)});return 8<e.length&&(p=(a=T(e[4],e[0]))[0],a=a[1],d.push.apply(d,Q(["round"],_o(e.slice(8),n.slice(8),r,p,a,l,u,c,f).styles,!1))),d}return s||"ellipse"===t?(n=e[0],p=no(Math.abs(e[1][1]-n[1]),s?Math.sqrt((i*i+o*o)/2):o,r),(d=s?[p]:[no(Math.abs(e[2][0]-n[0]),i,r),p]).push("at",no(n[0],i,r),no(n[1],o,r)),d):void 0}function qo(t,n,e,r){var o=[r,(r+n)/2,n],a=[t,(t+e)/2,e];return Yo.map(function(t){var n=t[0],e=t[1],t=t[2],r=o[n+1],i=a[e+1];return{vertical:Math.abs(e),horizontal:Math.abs(n),direction:t,pos:[r,i]}})}function Xo(t){var n=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(t){t=t.pos;n[0]=Math.min(n[0],t[0]),n[1]=Math.max(n[1],t[0]),e[0]=Math.min(e[0],t[1]),e[1]=Math.max(e[1],t[1])}),[Math.abs(n[1]-n[0]),Math.abs(e[1]-e[0])]}function Ho(t,e,r,n,i){var o,a,s,u,c,l,f,p,d,h,g,v,m,b,x,E;if((i=i?i:"none"!==(o=(t=B(t)).clipPath)?o:t.clip)&&"none"!==i&&"auto"!==i||(i=n))return o=ht(i),t=o.prefix,n=void 0===t?i:t,t=o.value,o=void 0===t?"":t,t="circle"===n,a=" ","polygon"===n?(a=",",{type:n,clipText:i,poses:E=(h=dt(o||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var t=t.split(" "),n=t[0],t=t[1];return{vertical:1,horizontal:1,pos:[Z(n,e),Z(t,r)]}}),splitter:a}):t||"ellipse"===n?(f=d="",u=s=0,h=S(o),u=t?(p=h[0],d=void 0===(l=h[2])?"50%":l,f=void 0===(l=h[3])?"50%":l,s=Z(void 0===p?"50%":p,Math.sqrt((e*e+r*r)/2))):(l="",p=h[0],l=void 0===(g=h[1])?"50%":g,d=void 0===(g=h[3])?"50%":g,f=void 0===(g=h[4])?"50%":g,s=Z(void 0===p?"50%":p,e),Z(l,r)),E=Q([{vertical:1,horizontal:1,pos:c=[Z(d,e),Z(f,r)],direction:"nesw"}],Wo.slice(0,t?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[c[0]+t[0]*s,c[1]+t[1]*u]}}),!0),{type:n,clipText:i,radiusX:s,radiusY:u,left:c[0]-s,top:c[1]-u,poses:E,splitter:a}):"inset"===n?(p=(-1<(g=(h=S(o||"0 0 0 0")).indexOf("round"))?h.slice(0,g):h).length,l=h.slice(p+1),f=(d=h.slice(0,p))[0],g=void 0===(t=d[1])?f:t,p=d[2],d=void 0===(t=d[3])?g:t,v=(t=[f,void 0===p?f:p].map(function(t){return Z(t,r)}))[0],b=t[1],x=(f=[d,g].map(function(t){return Z(t,e)}))[0],m=f[1],d=Io(l,(p=e-m)-x,(t=r-b)-v,x,v),{type:"inset",clipText:i,poses:E=Q(Q([],qo(v,p,t,x),!0),d,!0),top:v,left:x,right:p,bottom:t,radius:l,splitter:a}):"rect"===n?(a=",",{type:"rect",clipText:i,poses:E=qo(v=(g=(h=dt(o||"0px, ".concat(e,"px, ").concat(r,"px, 0px"))).map(function(t){return gt(t).value}))[0],m=g[1],b=g[2],x=g[3]),top:v,right:m,bottom:b,left:x,values:h,splitter:a}):void 0}var Lo={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,o){var n=t.props,e=n.customClipPath,r=n.defaultClipPath,i=n.clipArea,a=n.zoom,n=t.state,t=n.target,s=n.width,u=n.height,c=n.allMatrix,l=n.is3d,f=n.left,p=n.top,d=n.pos1,h=n.pos2,g=n.pos3,v=n.pos4,m=n.clipPathState,b=n.snapBoundInfos,x=n.rotation;if(!t)return[];n=Ho(t,s,u,r||"inset",m||e);if(!n)return[];var E,S,y,M=l?4:3,t=n.type,r=n.poses.map(function(t){t=Y(c,t.pos,M);return[t[0]-f,t[1]-p]}),m=[],R=[],e="rect"===t,l="inset"===t,D="polygon"===t;if((e||l||D)&&(E=l?r.slice(0,8):r,R=E.map(function(t,n){var e=0===n?E[E.length-1]:E[n-1],r=F(e,t),t=Ai(e,t);return o.createElement("div",{key:"clipLine".concat(n),className:k("line","clip-line","snap-control"),"data-clip-index":n,style:{width:"".concat(t,"px"),transform:"translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(r,"rad) scaleY(").concat(a,")")}})})),m=r.map(function(t,n){return o.createElement("div",{key:"clipControl".concat(n),className:k("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(x,"rad) scale(").concat(a,")")}})}),l&&m.push.apply(m,r.slice(8).map(function(t,n){return o.createElement("div",{key:"clipRadiusControl".concat(n),className:k("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(x,"rad) scale(").concat(a,")")}})})),"circle"===t||"ellipse"===t){var t=n.left,C=n.top,w=n.radiusX,O=n.radiusY,n=T(Y(c,[t,C],M),Y(c,[0,0],M)),t=n[0],C=n[1],n="none";if(!i){for(var P=Math.max(10,w/5,O/5),B=[],z=0;z<=P;++z){var G=2*Math.PI/P*z;B.push([w+(w-a)*Math.cos(G),O+(O-a)*Math.sin(G)])}B.push([w,-2]),B.push([-2,-2]),B.push([-2,2*O+2]),B.push([2*w+2,2*O+2]),B.push([2*w+2,-2]),B.push([w,-2]),n="polygon(".concat(B.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(", "),")")}m.push(o.createElement("div",{key:"clipEllipse",className:k("clip-ellipse","snap-control"),style:{width:"".concat(2*w,"px"),height:"".concat(2*O,"px"),clipPath:n,transform:"translate(".concat(-f+t,"px, ").concat(-p+C,"px) ").concat(Oi(c))}}))}return i&&(t=(n=zi(Q([d,h,g,v],r,!0))).width,C=n.height,S=n.left,y=n.top,(D||e||l)&&(B=l?r.slice(0,8):r,m.push(o.createElement("div",{key:"clipArea",className:k("clip-area","snap-control"),style:{width:"".concat(t,"px"),height:"".concat(C,"px"),transform:"translate(".concat(S,"px, ").concat(y,"px)"),clipPath:"polygon(".concat(B.map(function(t){return"".concat(t[0]-S,"px ").concat(t[1]-y,"px")}).join(", "),")")}})))),b&&["vertical","horizontal"].forEach(function(r){var t=b[r],i="horizontal"===r;t.isSnap&&R.push.apply(R,t.snap.posInfos.map(function(t,n){var t=t.pos,e=T(Y(c,i?[0,t]:[t,0],M),[f,p]),t=T(Y(c,i?[s,t]:[t,u],M),[f,p]);return Ve(o,"",e,t,a,"clip".concat(r,"snap").concat(n),"guideline")})),t.isBound&&R.push.apply(R,t.bounds.map(function(t,n){var t=t.pos,e=T(Y(c,i?[0,t]:[t,0],M),[f,p]),t=T(Y(c,i?[s,t]:[t,u],M),[f,p]);return Ve(o,"",e,t,a,"clip".concat(r,"bounds").concat(n),"guideline","bounds","bold")}))}),Q(Q([],m,!0),R,!0)},dragControlCondition:function(t,n){return n.inputEvent&&-1<(n.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,n){var e=t.props.dragWithClip;return void 0!==e&&!e&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,w(w({},n),{isDragTarget:!0}))},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var e=t.state,r=t.props,i=r.defaultClipPath,r=r.customClipPath,o=e.target,a=e.width,s=e.height,u=n.inputEvent?n.inputEvent.target:null,c=u&&u.getAttribute("class")||"",l=n.datas,o=Ho(o,a,s,i||"inset",r);if(!o)return!1;a=o.clipText;return!1===nt(t,"onClipStart",tt(t,n,{clipType:o.type,clipStyle:a,poses:o.poses.map(function(t){return t.pos})}))?l.isClipStart=!1:(l.isControl=c&&-1<c.indexOf("clip-control"),l.isLine=-1<c.indexOf("clip-line"),l.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),l.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,l.clipPath=o,l.isClipStart=!0,e.clipPathState=a,Jr(t,n),!0)},dragControl:function(t,n){var e=n.datas,r=n.originalDatas,I=n.isDragTarget;if(!e.isClipStart)return!1;var i=e.isControl,o=e.isLine,a=e.isArea,s=e.clipIndex,e=e.clipPath;if(!e)return!1;var u,c,k,F,N,l,f,p,W,d,h,g,v,Y,j,m=t.props.keepRatio,b=0,x=0,r=r.draggable,q=ri(n),x=I&&r?(X=r.prevBeforeDist,b=X[0],X[1]):(b=q[0],q[1]),X=[b,x],H=t.props,E=t.state,L=E.width,V=E.height,a=!a&&!i&&!o,o=e.type,S=e.poses,U=e.splitter,y=S.map(function(t){return t.pos}),a=(a&&(b=-b,x=-x),!i||"nesw"===S[s].direction),$="inset"===o||"rect"===o,M=S.map(function(){return[0,0]}),R=(i&&!a?(f=(C=S[s]).horizontal,C=C.vertical,f=[b*Math.abs(f),x*Math.abs(C)],c=f,C=$,f=m,P=(B=(u=S)[G=s]).direction,B=B.sub,l=u.map(function(){return[0,0]}),z=P?P.split(""):[],C&&G<8?(C=z.filter(function(t){return"w"===t||"e"===t}),w=z.filter(function(t){return"n"===t||"s"===t}),k=C[0],F=w[0],l[G]=c,w=(C=Xo(u))[0],C=C[1],(R=w&&C?w/C:0)&&f?(f=u[(G+4)%8].pos,D=[0,0],-1<P.indexOf("w")?D[0]=-1:-1<P.indexOf("e")&&(D[0]=1),-1<P.indexOf("n")?D[1]=-1:-1<P.indexOf("s")&&(D[1]=1),R=w+(w=uo([w,C],c,R,D,!0))[0],C=C+w[1],w=f[1],p=f[1],O=f[0],f=f[0],-1===D[0]?O=f-R:1===D[0]?f=O+R:(O-=R/2,f+=R/2),-1===D[1]?w=p-C:p=1===D[1]?w+C:(w=p-C/2)+C,N=qo(w,f,p,O),u.forEach(function(t,n){l[n][0]=N[n].pos[0]-t.pos[0],l[n][1]=N[n].pos[1]-t.pos[1]})):(u.forEach(function(t,n){t=t.direction;t&&(-1<t.indexOf(k)&&(l[n][0]=c[0]),-1<t.indexOf(F)&&(l[n][1]=c[1]))}),k&&(l[1][0]=c[0]/2,l[5][0]=c[0]/2),F&&(l[3][1]=c[1]/2,l[7][1]=c[1]/2))):P&&!B?z.forEach(function(i){var o="n"===i||"s"===i;u.forEach(function(t,n){var e=t.direction,r=t.horizontal,t=t.vertical;e&&-1!==e.indexOf(i)&&(l[n]=[o||!r?0:c[0],o&&t?c[1]:0])})}):l[G]=c,M=l):a&&(M=y.map(function(){return[b,x]})),y.map(function(t,n){return J(t,M[n])})),D=Q([],R,!0),C=(E.snapBoundInfos=null,"circle"===e.type),w="ellipse"===e.type,O=((C||w)&&(d=zi(R),f=Math.abs(d.bottom-d.top),p=Math.abs(w?d.right-d.left:f),h=R[0][1]+f,g=R[0][0]-p,v=R[0][0]+p,C&&(D.push([v,d.bottom]),M.push([1,0])),D.push([d.left,h]),M.push([0,1]),D.push([g,d.bottom]),M.push([1,0])),ur((H.clipHorizontalGuidelines||[]).map(function(t){return Z("".concat(t),V)}),(H.clipVerticalGuidelines||[]).map(function(t){return Z("".concat(t),L)}),L,V)),P=[],B=[],z=(B=C||w?(P=[D[4][0],D[2][0]],[D[1][1],D[3][1]]):$?(j=[D[0],D[2],D[4],D[6]],W=[M[0],M[2],M[4],M[6]],P=j.filter(function(t,n){return W[n][0]}).map(function(t){return t[0]}),j.filter(function(t,n){return W[n][1]}).map(function(t){return t[1]})):(P=D.filter(function(t,n){return M[n][0]}).map(function(t){return t[0]}),D.filter(function(t,n){return M[n][1]}).map(function(t){return t[1]})),[0,0]),G=Wr(O,H.clipTargetBounds&&{left:0,top:0,right:L,bottom:V},P,B,5),a=G.horizontal,y=G.vertical,T=a.offset,_=y.offset,a=(a.isBound&&(z[1]+=T),y.isBound&&(z[0]+=_),(w||C)&&0===M[0][0]&&0===M[0][1]?(A=(d=zi(R)).bottom-d.top,d=w?d.right-d.left:A,d-=y.isBound?Math.abs(_):0===y.snapIndex?-_:_,A-=a.isBound?Math.abs(T):0===a.snapIndex?-T:T,C&&(d=A=0<vr(y,a)?A:d),y=D[0],D[1][1]=y[1]-A,D[2][0]=y[0]+d,D[3][1]=y[1]+A,D[4][0]=y[0]-d):$&&m&&i?(A=(a=Xo(S))[0],y=a[1],d=A&&y?A/y:0,m=S[s].direction||"",i=D[1][1],h=D[5][1],g=D[7][0],v=D[3][0],T<=_?T=_/d:_=T*d,-1<m.indexOf("w")?g-=_:-1<m.indexOf("e")?v-=_:(g+=_/2,v-=_/2),-1<m.indexOf("n")?i-=T:-1<m.indexOf("s")?h-=T:(i+=T/2,h-=T/2),Y=qo(i,v,h,g),D.forEach(function(t,n){n=Y[n].pos;t[0]=n[0],t[1]=n[1]})):D.forEach(function(t,n){n=M[n];n[0]&&(t[0]-=_),n[1]&&(t[1]-=T)}),jo(t,e,R)),A="".concat(o,"(").concat(a.join(U),")");return E.clipPathState=A,B=C||w?(P=[D[4][0],D[2][0]],[D[1][1],D[3][1]]):$?(P=(j=[D[0],D[2],D[4],D[6]]).map(function(t){return t[0]}),j.map(function(t){return t[1]})):(P=D.map(function(t){return t[0]}),D.map(function(t){return t[1]})),E.snapBoundInfos=Wr(O,H.clipTargetBounds&&{left:0,top:0,right:L,bottom:V},P,B,1),r&&(y=E.is3d,S=E.allMatrix,s=z,I&&(s=[X[0]+z[0]-q[0],X[1]+z[1]-q[1]]),r.deltaOffset=K(S,[s[0],s[1],0,0],y?4:3)),nt(t,"onClip",tt(t,n,{clipEventType:"changed",clipType:o,poses:R,clipStyle:A,clipStyles:a,distX:b,distY:x})),!0},dragControlEnd:function(t,n){this.unset(t);var e=n.isDrag,r=n.datas,i=n.isDouble,o=r.isLine,a=r.isClipStart,r=r.isControl;return!!a&&(nt(t,"onClipEnd",Vi(t,n,{})),i&&(r?function(t,n){var e=(r=n.datas).clipPath,r=r.clipIndex,i=e.type,o=e.poses,a=e.splitter,s=o.map(function(t){return t.pos}),u=s.length;if("polygon"===i)o.splice(r,1),s.splice(r,1);else{if("inset"!==i)return;if(r<8)return;if(ko(o,s,r,8,u),u===o.length)return}r=jo(t,e,s),nt(t,"onClip",tt(t,n,{clipEventType:"removed",clipType:i,poses:s,clipStyles:r,clipStyle:"".concat(i,"(").concat(r.join(a),")"),distX:0,distY:0}))}(t,n):o&&function(t,n){var e=(r=Kr(t,n))[0],r=r[1],i=(o=n.datas).clipPath,o=o.clipIndex,a=i.type,s=i.poses,u=i.splitter,c=s.map(function(t){return t.pos});if("polygon"===a)c.splice(o,0,[e,r]);else{if("inset"!==a)return;var l=Bo.indexOf(o),o=zo.indexOf(o),f=s.length;if(Fo(s,c,8,l,o,e,r,c[4][0],c[4][1],c[0][0],c[0][1]),f===s.length)return}l=jo(t,i,c),nt(t,"onClip",tt(t,n,{clipEventType:"added",clipType:a,poses:c,clipStyles:l,clipStyle:"".concat(a,"(").concat(l.join(u),")"),distX:0,distY:0}))}(t,n)),i||e)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Vo={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,n){return n.isRequest?"originDraggable"===n.requestAble:a(n.inputEvent.target,k("origin"))},dragControlStart:function(t,n){var e=n.datas,n=(Jr(t,n),tt(t,n,{dragStart:_.dragStart(t,(new je).dragStart([0,0],n))})),r=nt(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],!(e.isDragOrigin=!0)===r?e.isDragOrigin=!1:n},dragControl:function(t,n){var e=n.datas,r=n.isPinch,i=n.isRequest;if(!e.isDragOrigin)return!1;var o=ri(n),a=o[0],o=o[1],s=t.state,u=s.width,c=s.height,l=s.offsetMatrix,f=s.targetMatrix,s=s.is3d,p=t.props.originRelative,p=void 0===p||p,s=s?4:3,a=[a,o],i=(!i||((o=n.distOrigin)[0]||o[1])&&(a=o),J(e.startOrigin,a)),o=J(e.startTargetOrigin,a),d=T(a,e.prevOrigin),l=ai(l,f,i,s),f=t.getRect(),l=zi(Bi(l,u,c,s)),s=[f.left-l.left,f.top-l.top],f=tt(t,n,{width:u,height:c,origin:i,dist:e.prevOrigin=a,delta:d,transformOrigin:[no(o[0],u,p),no(o[1],c,p)].join(" "),drag:_.drag(t,Ye(n,t.state,s,!!r,!1))});return nt(t,"onDragOrigin",f),f},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(nt(t,"onDragOriginEnd",Vi(t,n,{})),!0)},dragGroupControlCondition:function(t,n){return this.dragControlCondition(t,n)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){n=this.dragControl(t,n);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var n={},e=t.getRect(),r=0,i=0,o=e.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Uo(t,n,e,r,i){void 0===r&&(r=[0,0]);return Io(!(t=i||(t=B(t))&&t.borderRadius||"")||!i&&"0px"===t?[]:S(t),n,e,0,0,r)}function $o(t,n,e,r,i,o){var a=t.state,s=a.width,u=a.height,o=_o(o,i,t.props.roundRelative,s,u),c=o.raws,o=o.styles,i=No(i,c),c=i.horizontals,i=i.verticals,o=o.join(" ");nt(t,"onRound",tt(t,n,{horizontals:c,verticals:i,borderRadius:a.borderRadiusState=o,width:s,height:u,delta:r,dist:e}))}var Zo={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,r){var n=t.state,e=n.target,i=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,c=n.top,n=n.borderRadiusState,t=t.props,l=t.minRoundControls,f=t.maxRoundControls,p=void 0===f?[4,4]:f,d=t.zoom;if(!e)return null;var h=s?4:3,f=Uo(e,i,o,void 0===l?[0,0]:l,n);if(!f)return null;var g=0,v=0;return f.map(function(t,n){v+=Math.abs(t.horizontal),g+=Math.abs(t.vertical);var e=T(Y(a,t.pos,h),[u,c]),t=t.vertical?g<=p[1]:v<=p[0];return r.createElement("div",{key:"borderRadiusControl".concat(n),className:k("control","border-radius"),"data-radius-index":n,style:{display:t?"block":"none",transform:"translate(".concat(e[0],"px, ").concat(e[1],"px) scale(").concat(d,")")}})})},dragControlCondition:function(t,n){if(!n.inputEvent||n.isRequest)return!1;n=n.inputEvent.target.getAttribute("class")||"";return-1<n.indexOf("border-radius")||-1<n.indexOf("moveable-line")&&-1<n.indexOf("moveable-direction")},dragControlStart:function(t,n){var e=n.inputEvent,r=n.datas,e=e.target,i=e.getAttribute("class")||"",o=-1<i.indexOf("border-radius"),i=-1<i.indexOf("moveable-line")&&-1<i.indexOf("moveable-direction"),a=o?parseInt(e.getAttribute("data-radius-index"),10):-1,e=i?parseInt(e.getAttribute("data-line-index"),10):-1;if(!o&&!i)return!1;if(!1===nt(t,"onRoundStart",tt(t,n,{})))return!1;r.lineIndex=e,r.controlIndex=a,r.isControl=o,r.isLine=i,Jr(t,n);e=t.props,a=e.roundRelative,o=e.minRoundControls,i=void 0===o?[0,0]:o,n=t.state,e=n.target,o=n.width,t=n.height,r.isRound=!0,r.prevDist=[0,0],e=Uo(e,o,t,i)||[];return r.controlPoses=e,n.borderRadiusState=_o(e.map(function(t){return t.pos}),e,a,o,t).styles.join(" "),!0},dragControl:function(t,n){var e=n.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var r=e.controlIndex,i=e.controlPoses,o=ri(n),a=o[0],o=o[1],s=[a,o],u=T(s,e.prevDist),c=t.props.maxRoundControls,l=void 0===c?[4,4]:c,c=t.state,f=c.width,p=c.height,c=i[r],d=c.vertical,h=c.horizontal,g=i.map(function(t){var n=t.horizontal,t=t.vertical,e=[n*h*s[0],t*d*s[1]];if(n){if(1===l[0])return e;if(l[0]<4&&n!==h)return e}else{if(0===l[1])return e[1]=t*h*s[0]/f*p,e;if(d){if(1===l[1])return e;if(l[1]<4&&t!==d)return e}}return[0,0]}),c=(g[r]=s,i.map(function(t,n){return J(t.pos,g[n])}));return e.prevDist=[a,o],$o(t,n,s,u,i,c),!0},dragControlEnd:function(t,n){var e=t.state,r=(e.borderRadiusState="",n.datas),i=n.isDouble;if(!r.isRound)return!1;var o,a,s,u=e.width,c=e.height,l=r.isControl,f=r.controlIndex,p=r.isLine,d=r.lineIndex,r=r.controlPoses,h=r.map(function(t){return t.pos}),g=h.length,v=t.props.roundClickable;return i&&(void 0===v||v)&&(l?ko(r,h,f,0):p&&(v=(i=Kr(t,n))[0],l=i[1],f=h,p=d,i=v,d=l,v=u,l=c,o=(c=No(u=r)).horizontals,c=c.verticals,o=o.length,c=c.length,s=a=-1,0===p?0===o?a=0:1===o&&(a=1):3===p&&(o<=2?a=2:o<=3&&(a=3)),2===p?0===c?s=0:c<4&&(s=3):1===p&&(c<=1?s=1:c<=2&&(s=2)),Fo(u,f,0,a,s,i,d,v,l)),g!==r.length&&$o(t,n,[0,0],[0,0],r,h)),nt(t,"onRoundEnd",Vi(t,n,{})),!(e.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}};var Ko={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,n){var t=t.state,e=t.is3d,r=t.target,t=t.targetMatrix,r=null==r?void 0:r.style.transform,t=e?"matrix3d(".concat(t.join(","),")"):"matrix(".concat(Dn(t,!0),")"),r=r&&"none"!==r?r:t;n.datas.startTransforms=(t=r)===(e?"matrix3d(".concat(I(4)):"matrix(".concat(I(3),")"))||"matrix(1,0,0,1,0,0)"===t?[]:S(r)},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return tt(t,n,{setTransform:function(t){n.datas.startTransforms=at(t)?t:S(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return tt(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),nt(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(n),nt(t,"onBeforeRender",tt(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){nt(t,"onBeforeRenderEnd",tt(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var e=this,r=(this.dragStart(t,n),qe(t,"beforeRenderable",n)),i=t.moveables,r=r.map(function(t,n){n=i[n];return e.setTransform(n,t),e.fillDragStartParams(n,t)});nt(t,"onBeforeRenderGroupStart",tt(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:r}))},dragGroup:function(t,n){var e=this,r=(this.drag(t,n),qe(t,"beforeRenderable",n)),i=t.moveables,r=r.map(function(t,n){n=i[n];return e.resetTransform(t),e.fillDragParams(n,t)});nt(t,"onBeforeRenderGroup",tt(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:r}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),nt(t,"onBeforeRenderGroupEnd",tt(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},Jo={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,n){nt(t,"onRenderStart",tt(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){nt(t,"onRender",this.fillDragParams(t,n))},dragAfter:function(t,n){if(n.resultCount)return this.drag(t,n)},dragEnd:function(t,n){nt(t,"onRenderEnd",this.fillDragEndParams(t,n))},dragGroupStart:function(t,n){nt(t,"onRenderGroupStart",tt(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){var e=this,r=qe(t,"beforeRenderable",n),i=t.moveables,r=r.map(function(t,n){n=i[n];return e.fillDragParams(n,t)});nt(t,"onRenderGroup",tt(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,transform:fi(n),events:r}))},dragGroupEnd:function(t,n){var e=this,r=qe(t,"beforeRenderable",n),i=t.moveables,r=r.map(function(t,n){n=i[n];return e.fillDragEndParams(n,t)});nt(t,"onRenderGroupEnd",tt(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets,events:r}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlAfter:function(t,n){return this.dragAfter(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)},fillDragParams:function(t,n){return tt(t,n,{isPinch:!!n.isPinch,transform:fi(n)})},fillDragEndParams:function(t,n){return tt(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag})}};function Qo(e,t,n,r,i,o,a){var s="Start"===i,u=e.state.target,c=o.isRequest;if(!u||s&&-1<r.indexOf("Control")&&!c&&e.areaElement===o.inputEvent.target)return!1;var l,f="".concat(n).concat(r).concat(i),p="".concat(n).concat(r,"Condition"),u="End"===i,d="After"===i,h=!(!s||e.targetGesto&&e.controlGesto&&e.targetGesto.isFlag()&&e.controlGesto.isFlag()),g=(h&&e.updateRect(i,!0,!1),""!==i||c||Qi(e.state,o),Q([],e[t],!0));if(c&&(l=o.requestAble,g.some(function(t){return t.name===l})||g.push.apply(g,e.props.ables.filter(function(t){return t.name===l}))),!g.length)return!1;var v,g=Q(Q([Ko],g,!0),[Jo],!1).filter(function(t){return t[f]}),m=o.datas,b=(h&&g.forEach(function(t){t.unset&&t.unset(e)}),o.inputEvent),x=(u&&b&&(v=document.elementFromPoint(o.clientX,o.clientY)||b.target),0),b=g.filter(function(t){var n=t.name,n=m[n]||(m[n]={});return s&&(n.isEventStart=!t[p]||t[p](e,o)),!!n.isEventStart&&(t=t[f](e,w(w({},o),{resultCount:x,datas:n,originalDatas:m,inputTarget:v})),e._emitter.off(),s&&!1===t&&(n.isEventStart=!1),x+=t?1:0,t)}).length,E=!1;return s&&g.length&&!b&&(E=0===g.filter(function(t){var n=t.name,n=m[n];return!!n.isEventStart&&("strong"!==t.dragRelation||(n.isEventStart=!1))}).length),(u||E)&&(e.state.gesto=null,e.moveables&&e.moveables.forEach(function(t){t.state.gesto=null})),h&&E&&g.forEach(function(t){t.unset&&t.unset(e)}),s&&!c&&b&&null!=o&&o.preventDefault(),!e.isUnmounted&&!E&&((!s&&b&&!a||u)&&(e.updateRect(u?i:"",!0,!1),e.forceUpdate()),s||u||d||!b||a||Qo(e,t,n,r,i+"After",o),!0)}function ta(n,t,e){function r(t){return(t=t.inputEvent.target)===n.areaElement||!n.isMoveableElement(t)&&!n.controlBox.getElement().contains(t)||a(t,"moveable-area")||a(t,"moveable-padding")}var i=n.controlBox.getElement(),o=[];o.push(i),n.props.dragArea&&!n.props.dragTarget||o.push(t);return na(n,o,"targetAbles",e,{dragStart:r,pinchStart:r})}function na(i,t,o,a,s){void 0===s&&(s={});var n=i.props,e=n.pinchOutside,n=n.pinchThreshold,n={preventDefault:!1,container:window,pinchThreshold:n,pinchOutside:e},u=new ve(t,n);return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){u.on("".concat(r).concat(e),function(t){var n=t.eventType;(!s[n]||s[n](t))&&Qo(i,o,r,a,e,t)||t.stop()})})}),u}var ea=function(){function t(t,n,e){var i=this;this.target=t,this.moveable=n,this.eventName=e,this.ables=[],this._onEvent=function(n){var e=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach(function(t){t[e](r,{inputEvent:n})})},t.addEventListener(e.toLowerCase(),this._onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}(),ra=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=w({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},Wi(null)),n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new ee,n._prevTarget=null,n._prevDragArea=!1,n._observer=null,n._observerId=0,n.onPreventClick=function(t){t.stopPropagation(),v(window,"click",n.onPreventClick,!0)},n.checkUpdateRect=function(){var t;n.isDragging()||((t=n.props.parentMoveable)?t.checkUpdateRect():(Et(n._observerId),n._observerId=xt(function(){n.isDragging()||n.updateRect()})))},n}Ce(n,t);var e=n.prototype;return e.render=function(){var t=this.props,n=this.state,e=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,c=t.portalContainer,e=(this.checkUpdate(),this.updateRenderPoses(),e||{left:0,top:0}),l=e.left,e=e.top,f=n.left,p=n.top,d=n.target,h=n.direction,n=n.hasFixed,t=t.targets,t=(t&&t.length||i)&&d,i=this.isDragging(),g={};return this.getEnabledAbles().forEach(function(t){g["data-able-".concat(t.name.toLowerCase())]=!0}),m(u,w({cspNonce:a,ref:x(this,"controlBox"),className:"".concat(k("control-box",-1===h?"reverse":"",i?"dragging":"")," ").concat(r)},g,{onClick:this.onPreventClick,portalContainer:c,style:{position:n?"fixed":"absolute",display:t?"block":"none",transform:"translate3d(".concat(f-l,"px, ").concat(p-e,"px, ").concat(s,")"),"--zoom":o,"--zoompx":"".concat(o,"px")}}),this.renderAbles(),this._renderLines())},e.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,n=t.parentMoveable,e=t.container,t=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),e||n||t||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},e.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},e.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),Li(this,"targetGesto"),Li(this,"controlGesto");var t,n=this.events;for(t in n){var e=n[t];e&&e.destroy()}},e.getContainer=function(){var t=this.props,n=t.parentMoveable,e=t.wrapperMoveable;return t.container||e&&e.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Be)},e.dragStart=function(t){var n=this.targetGesto;return n&&!n.isFlag()&&n.triggerDragStart(t),this},e.hitTest=function(t){var n=this.state,e=n.target,r=n.pos1,i=n.pos2,o=n.pos3,a=n.pos4,n=n.targetClientRect;if(!e)return 0;var t=(e=t instanceof Element?{left:(e=t.getBoundingClientRect()).left,top:e.top,width:e.width,height:e.height}:w({width:0,height:0},t)).left,s=e.top,u=e.width,e=e.height,r=Vn([r,i,a,o],n),i=te(r,[[t,s],[t+u,s],[t+u,s+e],[t,s+e]]),a=Ln(r);return i&&a?Math.min(100,i/a*100):0},e.isInside=function(t,n){var e=this.state,r=e.target,i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,e=e.targetClientRect;return!!r&&$n([t,n],Vn([i,o,s,a],e))},e.updateRect=function(t,n,e){void 0===e&&(e=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),r=(i?i.props:r).rootContainer;this.updateState(Wi(this.controlBox&&this.controlBox.getElement(),o,a,a,r||a),!i&&e)},e.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},e.updateTarget=function(t){this.updateRect(t,!0)},e.getRect=function(){var t=this.state,n=Hi(this.state),e=n[0],r=n[1],i=n[2],o=n[3],n=zi(n),a=t.width,s=t.height,u=n.width,c=n.height,l=n.left,n=n.top,f=[t.left,t.top],p=J(f,t.origin);return{width:u,height:c,left:l,top:n,pos1:e,pos2:r,pos3:i,pos4:o,offsetWidth:a,offsetHeight:s,beforeOrigin:J(f,t.beforeOrigin),origin:p,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.getManager=function(){return this},e.getRotation=function(){var t=this.state,n=t.pos1,e=t.pos2,t=t.direction;return t=t,n=F(n=n,e)/Math.PI*180,n=0<=(n=0<=t?n:180-n)?n:360+n},e.request=function(n,t,e){void 0===t&&(t={});var r=this.props,i=r.ables,r=r.groupable,i=i.filter(function(t){return t.name===n})[0];if(this.isDragging()||!i||!i.request)return{request:function(){return this},requestEnd:function(){return this}};var o=this,a=i.request(this),s=e||t.isInstant,u=a.isControl?"controlAbles":"targetAbles",c="".concat(r?"Group":"").concat(a.isControl?"Control":""),i={request:function(t){return Qo(o,u,"drag",c,"",w(w({},a.request(t)),{requestAble:n,isRequest:!0}),s),this},requestEnd:function(){return Qo(o,u,"drag",c,"End",w(w({},a.requestEnd()),{requestAble:n,isRequest:!0}),s),this}};return Qo(o,u,"drag",c,"Start",w(w({},a.requestStart(t)),{requestAble:n,isRequest:!0}),s),s?i.request(t).requestEnd():i},e.destroy=function(){this.componentWillUnmount()},e.updateRenderPoses=function(){var t=this.state,n=this.props,e=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,l=t.left,f=t.top,p=n.padding||{},d=p.left,d=void 0===d?0:d,h=p.top,h=void 0===h?0:h,g=p.bottom,g=void 0===g?0:g,p=p.right,p=void 0===p?0:p,o=o?4:3,n=n.groupable?e:J(e,[l,f]);t.renderPoses=[J(a,to(i,[-d,-h],r,n,o)),J(s,to(i,[p,-h],r,n,o)),J(u,to(i,[-d,g],r,n,o)),J(c,to(i,[p,g],r,n,o))]},e.checkUpdate=function(){var t=this.props,n=t.target,e=t.container,t=t.parentMoveable,r=this.state,i=r.target,r=r.container;(i||n)&&(this.updateAbles(),Zi(i,n)&&Zi(r,e)||((i=e||this.controlBox)&&this.unsetAbles(),this.updateState({target:n,container:e}),!t&&i&&this.updateRect("End",!1,!1)))},e.triggerEvent=function(t,n){this._emitter.trigger(t,n);t=this.props[t];return t&&t(n)},e.useCSS=function(t,n){var e=this.props.customStyledMap,r=t+n;return e[r]||(e[r]=Re(t,n)),e[r]},e.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(t){t.unset&&t.unset(n)})},e.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var e=this.props,r=e.triggerAblesSimultaneously,t=t.filter(function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])}),i="drag".concat(n,"Start"),o="pinch".concat(n,"Start"),n="drag".concat(n,"ControlStart"),i=$i(t,[i,o],r),o=$i(t,[n],r);this.enabledAbles=t,this.targetAbles=i,this.controlAbles=o},e.updateState=function(t,n){if(n)this.isUnmounted||this.setState(t);else{var e,r=this.state;for(e in t)r[e]=t[e]}},e.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(t){return t&&n[t.name]})},e.renderAbles=function(){var r,i,o,a,n=this,t=this.props.triggerAblesSimultaneously,e={createElement:m};return t=$i(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(n,e)||[]}),r=t.reduce(function(t,n){return t.concat(n)},[]).filter(function(t){return t}),i=function(t){return t.key},o=[],a={},r.forEach(function(t,n){var n=i(t,n,r),e=a[n];e||(a[n]=e=[],o.push(e)),e.push(t)}),o.map(function(t){return t[0]})},e.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e._updateObserver=function(t){var n=this.props,e=n.target;window.ResizeObserver&&e&&n.useResizeObserver?t.target===e&&this._observer||((n=new ResizeObserver(this.checkUpdateRect)).observe(e,{box:"border-box"}),this._observer=n):null!=(t=this._observer)&&t.disconnect()},e._updateEvents=function(){var t=this.controlBox.getElement(),n=this.targetAbles.length,e=this.controlAbles.length,r=this.props,r=r.dragTarget||r.target;(!n&&this.targetGesto||this._isTargetChanged(!0))&&(Li(this,"targetGesto"),this.updateState({gesto:null})),e||Li(this,"controlGesto"),r&&n&&!this.targetGesto&&(this.targetGesto=ta(this,r,"")),!this.controlGesto&&e&&(this.controlGesto=na(this,t,"controlAbles","Control"))},e._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},e._renderLines=function(){var t=this.props,n=t.edge,e=t.zoom;if(t.hideDefaultLines)return[];var t=this.state.renderPoses,r={createElement:m};return[Ve(r,n?"n":"",t[0],t[1],e,0),Ve(r,n?"e":"",t[1],t[3],e,1),Ve(r,n?"w":"",t[0],t[2],e,2),Ve(r,n?"s":"",t[2],t[3],e,3)]},e._isTargetChanged=function(t){var n=this.props,e=n.dragTarget||n.target,r=this._prevTarget,i=this._prevDragArea,n=n.dragArea;return!n&&r!==e||(t||n)&&i!==n},e._updateNativeEvents=function(){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,t=St(s);if(this._isTargetChanged())for(var n in s){var e=s[n];e&&e.destroy(),s[n]=null}a&&(i=this.enabledAbles,t.forEach(function(t){var n=$i(i,[t]),e=0<n.length,r=s[t];e?(r||(r=new ea(a,o,t),s[t]=r),r.setAbles(n)):r&&(r.destroy(),s[t]=null)}))},n.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},n}(Zt),ia={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(e,r){var t=e.props.targets||[],n=(e.moveables=[],e.state),i={left:n.left,top:n.top},o=e.props;return t.map(function(t,n){return r.createElement(ra,{key:"moveable"+n,ref:s(e,"moveables",n),target:t,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,parentMoveable:e,parentPosition:i})})}},oa=we("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,n){n.isRequest||Pt(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,n){this.dragStart(t,n)},dragGroupStart:function(t,n){this.dragStart(t,n),n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){this.endEvent(t);var e=t.state.target,r=n.inputEvent,i=n.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);n.isDrag&&!o||this.unset(t),!r||!i||n.isDrag||t.isMoveableElement(i)||o||(r=e.contains(i),nt(t,"onClick",tt(t,n,{isDouble:n.isDouble,inputTarget:i,isTarget:e===i,containsTarget:r})))},dragGroupEnd:function(t,n){this.endEvent(t);var e,r,i,o=n.inputEvent,a=n.inputTarget;o&&a&&!n.isDrag&&!t.isMoveableElement(a)&&n.datas.inputTarget!==a&&(r=-1<(e=(o=t.props.targets).indexOf(a)),i=!1,-1===e&&(i=-1<(e=h(o,function(t){return t.contains(a)}))),nt(t,"onClickGroup",tt(t,n,{isDouble:n.isDouble,targets:o,inputTarget:a,targetIndex:e,isTarget:r,containsTarget:i})))},dragControlEnd:function(t,n){this.dragEnd(t,n)},dragGroupControlEnd:function(t,n){this.dragEnd(t,n)},endEvent:function(t){var n=this;xt(function(){n.unset(t)})},unset:function(t){v(window,"click",t.onPreventClick,!0)}});function aa(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),w(w({},t),{datas:n})}var sa=we("edgeDraggable",{dragControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;t=n.inputEvent.target;return a(t,k("direction"))&&a(t,k("line"))},dragControlStart:function(t,n){return _.dragStart(t,aa(n))},dragControl:function(t,n){return _.drag(t,aa(n))},dragControlEnd:function(t,n){return _.dragEnd(t,aa(n))},dragGroupControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;t=n.inputEvent.target;return a(t,k("direction"))&&a(t,k("line"))},dragGroupControlStart:function(t,n){return _.dragGroupStart(t,aa(n))},dragGroupControl:function(t,n){return _.dragGroup(t,aa(n))},dragGroupControlEnd:function(t,n){return _.dragGroupEnd(t,aa(n))},unset:function(t){return _.unset(t)}}),ua={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},ca=[Ko,Co,Zr,lo,_,sa,t,fo,po,vo,Do,wo,Mo,Vo,Lo,Zo,ia,ua,oa,yo,Jo],Zr=ca.reduce(function(t,n){return w(w({},t),"events"in n?n.events:{})},{}),lo=ca.reduce(function(t,n){return w(w({},t),n.props)},{}),sa=Object.keys(io(Zr)),t=Object.keys(lo);function la(t,i){return Math.max.apply(Math,t.map(function(t){var n=t[0],e=t[1],r=t[2],t=t[3];return Math.max(n[i],e[i],r[i],t[i])}))}function fa(t,i){return Math.min.apply(Math,t.map(function(t){var n=t[0],e=t[1],r=t[2],t=t[3];return Math.min(n[i],e[i],r[i],t[i])}))}var pa=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.differ=new Xn,t.moveables=[],t.transformOrigin="50% 50%",t}Ce(t,r);var n=t.prototype;return n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(n,t,e){var r,i,o,a,s,u,c,l,f,p,d,h;void 0===e&&(e=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(n,!1,!1)}),r=this.state,o=this.props,i=r.target||o.target,(!t||""!==n&&o.updateGroup)&&(this.rotation=o.defaultGroupRotate,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),t=this.rotation,o=this.scale,a=(u=function(t,n){if(!t.length)return[0,0,0,0];var i,r,o,e,a,s,t=t.map(function(t){return Hi(t.state)}),u=Ae,c=Ae,l=0,f=0;return(n=N(n,_e))%90?(i=n/180*Math.PI,r=Math.tan(i),o=-1/r,e=[Ie,Ae],a=[Ie,Ae],t.forEach(function(t){t.forEach(function(t){var n=t[1]-r*t[0],t=t[1]-o*t[0];e[0]=Math.max(e[0],n),e[1]=Math.min(e[1],n),a[0]=Math.max(a[0],t),a[1]=Math.min(a[1],t)})}),e.forEach(function(e){a.forEach(function(t){var t=(t-e)/(r-o),n=r*t+e;u=Math.min(u,t),c=Math.min(c,n)})}),l=la(s=t.map(function(t){var n=t[0],e=t[1],r=t[2],t=t[3];return[Bn(n,-i),Bn(e,-i),Bn(r,-i),Bn(t,-i)]}),0)-fa(s,0),f=la(s,1)-fa(s,1)):(u=fa(t,0),c=fa(t,1),l=la(t,0)-u,f=la(t,1)-c,n%180&&(s=l,l=f,f=s)),[u,c,l,f]}(this.moveables,t))[0],s=u[1],c=u[2],u=u[3],t="rotate(".concat(t,"deg) scale(").concat(0<=o[0]?1:-1,", ").concat(0<=o[1]?1:-1,")"),i.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(c,"px; height:").concat(u,"px;")+"transform:".concat(t),r.width=c,r.height=u,c=this.getContainer(),c=[(u=Wi(this.controlBox.getElement(),i,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||c)).left,u.top],p=[(p=Un([d=(f=Hi(u))[0],h=f[1],l=f[2],f=f[3]])).minX,p.minY],u.pos1=T(d,p),u.pos2=T(h,p),u.pos3=T(l,p),u.pos4=T(f,p),u.left=a-u.left+p[0],u.top=s-u.top+p[1],u.origin=T(J(c,u.origin),p),u.beforeOrigin=T(J(c,u.beforeOrigin),p),u.originalBeforeOrigin=J(c,u.originalBeforeOrigin),d=u.targetClientRect,h=0<o[0]*o[1]?1:-1,d.top+=u.top-r.top,d.left+=u.left-r.left,i.style.transform="translate(".concat(-p[0],"px, ").concat(-p[1],"px) ").concat(t),this.updateState(w(w({},u),{direction:h,beforeDirection:h}),e))},n.getRect=function(){return w(w({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.triggerEvent=function(t,n,e){if(e||-1<t.indexOf("Group"))return r.prototype.triggerEvent.call(this,t,n);this._emitter.trigger(t,n)},n.updateAbles=function(){r.prototype.updateAbles.call(this,Q(Q([],this.props.ables,!0),[ia],!1),"Group")},n._updateTargets=function(){r.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var t=this.state,n=this.props,e=this._prevTarget,r=n.dragTarget||this.areaElement,e=(e!==r&&(Li(this,"targetGesto"),Li(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=ta(this,r,"Group")),this.controlGesto||(this.controlGesto=na(this,this.controlBox.getElement(),"controlAbles","GroupControl"))),!Zi(t.container,n.container)),r=(e&&(t.container=n.container),this.differ.update(n.targets)),t=r.added,n=r.changed,r=r.removed;(e||t.length||n.length||r.length)&&this.updateRect()},n._updateObserver=function(){},t.defaultProps=w(w({},ra.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(ra),da=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.moveables=[],t}Ce(t,n);var e=t.prototype;return e.render=function(){var e=this,t=this.props,n=t.cspNonce,r=t.cssStyled,t=t.targets;return m(r,{cspNonce:n,ref:x(this,"controlBox"),className:k("control-box")},t.map(function(t,n){return m(ra,w({key:"moveable"+n,ref:s(e,"moveables",n)},e.props,{target:t,wrapperMoveable:e}))}))},e.componentDidUpdate=function(){},e.updateRect=function(n,e,r){void 0===r&&(r=!0),this.moveables.forEach(function(t){t.updateRect(n,e,r)})},e.getRect=function(){return w(w({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},e.dragStart=function(){return this},e.hitTest=function(){return 0},e.isInside=function(){return!1},e.isDragging=function(){return!1},e.updateRenderPoses=function(){},e.checkUpdate=function(){},e.triggerEvent=function(){},e.updateAbles=function(){},e._updateEvents=function(){},e._updateObserver=function(){},t}(ra),ha=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ce(n,t),n.defaultAbles=ca,n}(function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t}Ce(t,n);var e,o,r=t.prototype;return t.makeStyled=function(){var e,n={},t=(this.getTotalAbles().forEach(function(t){t=t.css;t&&t.forEach(function(t){n[t]=!0})}),St(n).join("\n"));this.defaultStyled=Re("div",(e=Be,(ze+t).replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})))},t.getTotalAbles=function(){return Q([Co,ia,ua,yo],this.defaultAbles,!0)},r.render=function(){var n,e,t=this.constructor,r=(t.defaultStyled||t.makeStyled(),this.props),i=r.ables,o=r.props,r=function(t,n){var e={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]]);return e}(r,["ables","props"]),a=this._updateRefs(!0),a=(n=this.selectorMap,e=[],a.forEach(function(t){t&&(st(t)?n[t]&&e.push.apply(e,n[t]):e.push(t))}),e),s=1<a.length,i=Q(Q([],t.getTotalAbles(),!0),i||[],!0),o=w(w(w({},r),o||{}),{ables:i,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return s?r.individualGroupable?m(da,w({key:"individual-group",ref:x(this,"moveable")},o,{target:null,targets:a})):m(pa,w({key:"group",ref:x(this,"moveable")},o,{target:null,targets:a})):m(ra,w({key:"single",ref:x(this,"moveable")},o,{target:a[0]}))},r.componentDidMount=function(){this._updateRefs()},r.componentDidUpdate=function(){this._updateRefs()},r.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.getManager=function(){return this.moveable},r._updateRefs=function(t){var n=this.refTargets,e=ao(this.props.target||this.props.targets),r="undefined"!=typeof document,i=n.length!==e.length||n.some(function(t,n){n=e[n];return!(!t&&!n)&&t!==n}),o=this.selectorMap,a={};return this.refTargets.forEach(function(t){st(t)&&(o[t]?a[t]=o[t]:r&&(i=!0,a[t]=[].slice.call(document.querySelectorAll(t))))}),this.refTargets=e,this.selectorMap=a,!t&&i&&this.forceUpdate(),e},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,e,a):i(n,e))||a);3<o&&a&&Object.defineProperty(n,e,a)}([(e=We,void 0===o&&(o={}),function(n,i){e.forEach(function(r){var t=o[r]||r;t in n||(n[t]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=(e=this[i])[r].apply(e,t);return e===this[i]?this:e})})})],t.prototype,"moveable",void 0),t}(Zt)),ga=function(n){function t(t){t=n.call(this,t)||this;return t.state={},t.state=t.props,t}return e(t,n),t.prototype.render=function(){return t=m(ha,o({ref:x(this,"moveable")},this.state)),n=this.state.parentElement,m(Kt,{element:t,container:n});var t,n},t}(Yt),va=function(t,n){return(va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function ma(t,n){function e(){this.constructor=t}va(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var ba=function(){return(ba=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var xa=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}ma(t,n);var e=t.prototype;return e.render=function(){var t=this.props,n=t.className,n=void 0===n?"":n,e=(t.cspNonce,t.portalContainer),t=function(t,n){var e={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]]);return e}(t,["className","cspNonce","portalContainer"]),r=this.injector.className,i=this.tag,o={};return-1<en.indexOf("simple")&&e&&(o={portalContainer:e}),m(i,ba({ref:x(this,"element"),"data-styled-id":r,className:n+" "+r},o,t))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},t}(Yt);var Ea=function(){return(Ea=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var Sa=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(ot(t))for(var e in t)this.on(e,t[e]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(ot(t))for(var e in t)this.off(e);else{var r,i;n?(r=this._events[t])&&-1<(i=h(r,function(t){return t.listener===n}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},n.once=function(n,t){var e=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(t){e._addEvent(n,t,{once:!0})})},n.emit=function(n,e){var r=this,t=(void 0===e&&(e={}),this._events[n]);if(!n||!t)return!0;var i=!1;return e.eventType=n,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(e),t.once&&r.off(n,t.listener)}),!i},n.trigger=function(t,n){return this.emit(t,n=void 0===n?{}:n)},n._addEvent=function(t,n,e){var r=this._events;r[t]=r[t]||[],r[t].push(Ea({listener:n},e))},t}(),ya=function(t,n){return(ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)};var O=function(){return(O=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function et(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||((r=r||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}function Ma(t,n){var e;return O({events:{},props:((e={})[t]=Boolean,e),name:t},n)}var Ra=bn().browser.webkit,Da=Ra&&(fo="undefined"==typeof window?{userAgent:""}:window.navigator,!!(fo=/applewebkit\/([^\s]+)/g.exec(fo.userAgent.toLowerCase()))&&parseFloat(fo[1])<605),Ca="moveable-",wa=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Oa=1e-4,Pa=1e-7,Ba=["n","w","s","e","nw","ne","sw","se"],za={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Ga={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Ta(t,n,e,r,i){var e=n.gesto.move(e,t.inputEvent),o=e.originalDatas||e.datas,o=o.draggable||(o.draggable={});return O(O({},i?Xu(n,e):e),{isPinch:!!r,parentEvent:!0,datas:o,originalDatas:t.originalDatas})}var _a=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var e=n.originalDatas;return(this.datas=e).draggable||(e.draggable={}),O(O({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var e,r;return this.isFlag?(e=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],e=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=e,clientY:this.prevY=r,inputEvent:n,isDrag:this.isDrag,distX:e-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Aa(t,e,r){var n=r.originalDatas,n=(n.groupable=n.groupable||{},n.groupable),i=(n.childDatas=n.childDatas||[],n.childDatas);return t.moveables.map(function(t,n){return i[n]=i[n]||{},i[n][e]=i[n][e]||{},O(O({},r),{datas:i[n][e],originalDatas:i[n]})})}function Ia(t,o,a,s,n,u){var c=!!a.match(/Start$/g),l=!!a.match(/End$/g),f=n.isPinch,p=n.datas,n=Aa(t,o.name,n),d=t.moveables,t=n.map(function(t,n){var e=d[n],r=e.state,i=t;if(c)i=(new _a).dragStart(s,t);else{if(r.gesto||(r.gesto=p.childGestos[n]),!r.gesto)return;i=Ta(t,r,s,f,u)}n=o[a](e,O(O({},i),{parentFlag:!0}));return l&&(r.gesto=null),n});return c&&(p.childGestos=d.map(function(t){return t.state.gesto})),t}function ka(t,i,o,n,a,s){void 0===a&&(a=function(t,n){return n});var u=!!o.match(/End$/g),n=Aa(t,i.name,n),c=t.moveables;return n.map(function(t,n){var e=c[n],r=a(e,t),r=i[o](e,O(O({},r),{parentFlag:!0}));return r&&s&&s(e,t,r,n),u&&(e.state.gesto=null),r})}function Fa(t,n,r,i){void 0===i&&(i="");var e=t.state,o=e.renderPoses,a=e.rotation,e=e.direction,t=t.props,s=t.renderDirections,n=void 0===s?n:s,u=t.zoom,c={};if(!n)return[];var l=0<e?1:-1,s=!0===n?Ba:n,f=a/Math.PI*180;return s.forEach(function(t){c[t]=!0}),s.map(function(t){var n=za[t];if(!n||!c[t])return null;var e=(N(f,15)+l*Ga[t]+720)%180;return r.createElement("div",{className:X("control","direction",t,i),"data-rotation":e,"data-direction":t,key:"direction-".concat(t),style:Ou.apply(void 0,et([a,u],n.map(function(t){return o[t]}),!1))})})}function Na(t,n,e,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=F(e,r),c=n?N(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(o),className:X.apply(void 0,et(["line","direction",n],a,!1)),"data-rotation":c,"data-line-index":o,"data-direction":n,style:wu(e,r,i,u)})}function Wa(t,n){return Fa(t,Ba,n)}function Ya(t,n){return Fa(t,["nw","ne","sw","se"],n)}function ja(t,n,e,r,i,o){var a=t.state.is3d?4:3,t=H(t.state.rootMatrix,i,a),i=J([o.left,o.top],t);n.startAbsoluteOrigin=i,n.prevDeg=F(i,[e,r])/Math.PI*180,n.defaultDeg=n.prevDeg,n.prevSnapDeg=0,n.loop=0}function qa(t,n,e){var r=e.defaultDeg,i=e.prevDeg,o=i%360,i=Math.floor(i/360),o=(o<0&&(o+=360),t<o&&270<o&&t<90?++i:o<t&&o<90&&270<t&&--i,n*(360*i+t-r));return e.prevDeg=r+o,o}function Xa(t,n,e,r){return qa(F(r.startAbsoluteOrigin,[t,n])/Math.PI*180,e,r)}function Ha(t,n,e,r,i,o){var a=t.props.throttleRotate,a=void 0===a?0:a,s=e.prevSnapDeg,o=(o&&(r=function(t,n,e,r){if(!Ka(t,"rotatable"))return r;var i=n.pos1,o=n.pos2,a=n.pos3,n=n.pos4,s=r*Math.PI/180,i=[i,o,a,n].map(function(t){return T(t,e)}),o=i.map(function(t){return Bn(t,s)}),a=et(et([],function(t,s,n,e,r){if(!t.props.bounds)return[];var u=r*Math.PI/180,r=Es(t),t=r.left,i=r.top,o=r.right,r=r.bottom,t=t-e[0],o=o-e[0],i=i-e[1],r=r-e[1],c={left:t,top:i,right:o,bottom:r};if(!ys(n,c,0))return[];var l=[];return[[t,0],[o,0],[i,1],[r,1]].forEach(function(t){var o=t[0],a=t[1];n.forEach(function(t){var e,n,r,i=F([0,0],t);l.push.apply(l,(n=o,r=a,t=Du(e=t),[t=Math.sqrt(t*t-n*n)||0,-t].sort(function(t,n){return Math.abs(t-e[r?0:1])-Math.abs(n-e[r?0:1])}).map(function(t){return F([0,0],r?[t,n]:[n,t])}).map(function(t){return u+t-i}).filter(function(t){return!ys(s,c,t)}).map(function(t){return N(180*t/Math.PI,Pa)})))})}),l}(t,i,o,e,r),!0),function(t,n,e,r,i){var t=t.props.innerBounds,o=i*Math.PI/180;if(!t)return[];var i=t.left,a=t.top,s=t.width,t=t.height,u=i-r[0],i=i+s-r[0],s=a-r[1],a=a+t-r[1],c=[[u,s],[i,s],[u,a],[i,a]],l=q(e,[0,0]);if(!bs(e,c,l,0))return[];var f=[],p=c.map(function(t){return[Du(t),F([0,0],t)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(t){var e=F([0,0],function(t){var n=t[0],t=t[1],e=t[0]-n[0],t=t[1]-n[1];if(!e)return[n[0],0];if(!t)return[0,n[1]];t/=e,e=-t*n[0]+n[1];return[-e/(t+1/t),e/(t*t+1)]}(t)),r=function(t){var n=t[0],t=t[1],e=t[0]-n[0],t=t[1]-n[1];if(!e)return Math.abs(n[0]);if(!t)return Math.abs(n[1]);t/=e;return Math.abs((-t*n[0]+n[1])/Math.sqrt(Math.pow(t,2)+1))}(t);f.push.apply(f,p.filter(function(t){t=t[0];return t&&r<=t}).map(function(t){var n=t[0],t=t[1],n=Math.acos(n?r/n:0);return[o+(t+n)-e,o+(t-n)-e]}).reduce(function(t,n){return t.push.apply(t,n),t},[]).filter(function(t){return!bs(n,c,l,t)}).map(function(t){return N(180*t/Math.PI,Pa)}))}),f}(t,i,o,e,r),!0);return a.sort(function(t,n){return Math.abs(t-r)-Math.abs(n-r)}),a.length?a[0]:r}(t,n,e.origin,r)),N(i+r,a)),t=o-i;return[(e.prevSnapDeg=t)-s,r,o]}function La(t,n){if(n.isRequest)return"rotatable"===n.requestAble;var e=n.inputEvent.target;if(a(e,X("rotation-control")))return!0;var r,n=t.props.rotationTarget;return!!n&&(r=!0,((t=n)?(function(t){if(!t||!ot(t))return;if(t instanceof Element)return;return at(t)||"length"in t}(t)?[].slice.call(t):[t]).reduce(function(t,n){return st(n)&&r?et(et([],t,!0),[].slice.call(document.querySelectorAll(n)),!0):(t.push($u(n,r)),t)},[]):[]).some(function(t){return!!t&&(e===t||e.contains(t))}))}var po={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,n){var e=t.props,r=e.rotatable,i=e.rotationPosition,o=e.zoom,e=e.renderDirections,a=t.state,s=a.renderPoses,a=a.direction;if(!r)return null;r=function(t,n,e){var r,i,o=n[0],a=n[1],s=n[2],n=n[3];if("none"!==t)return t=(t||"top").split("-"),r=t[0],t=t[1],i=[o,a],"left"===r?i=[s,o]:"right"===r?i=[a,n]:"bottom"===r&&(i=[n,s]),o=[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2],a=Bu(i,e),t&&(n="bottom"===r||"left"===r,o=i[(s="top"===t||"left"===t)&&!n||!s&&n?0:1]),[o,a]}(i,s,a),i=[];return r&&(s=r[0],a=r[1],i.push(n.createElement("div",{key:"rotation",className:X("rotation"),style:{transform:"translate(-50%) translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(a,"rad)")}},n.createElement("div",{className:X("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),n.createElement("div",{className:X("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))),e&&i.push.apply(i,Fa(t,[],n)),i},dragControlCondition:La,dragControlStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,c=t.state,l=c.target,f=c.left,p=c.top,d=c.origin,h=c.beforeOrigin,g=c.direction,v=c.beforeDirection,m=c.targetTransform,c=c.moveableClientRect;if(!u&&!l)return!1;l=t.getRect(),e.rect=l,e.transform=m,e.left=f,e.top=p,e.fixedPosition=au(t,ou(t)),u||s||a?(e.beforeInfo={origin:l.beforeOrigin,prevDeg:m=o||0,defaultDeg:m,prevSnapDeg:0},e.afterInfo=O(O({},e.beforeInfo),{origin:l.origin}),e.absoluteInfo=O(O({},e.beforeInfo),{origin:l.origin,startValue:m})):(e.beforeInfo={origin:l.beforeOrigin},e.afterInfo={origin:l.origin},e.absoluteInfo={origin:l.origin,startValue:l.rotation},ja(t,e.beforeInfo,r,i,h,c),ja(t,e.afterInfo,r,i,d,c),ja(t,e.absoluteInfo,r,i,d,c)),e.direction=g,e.beforeDirection=v,e.startValue=0,e.datas={},Qs(n,"rotate"),f=rt(t,n,O(O({set:function(t){e.startValue=t*Math.PI/180}},Js(n)),{dragStart:j.dragStart(t,(new _a).dragStart([0,0],n))})),p=it(t,"onRotateStart",f);return e.isRotate=!1!==p,t.state.snapRenderInfo={request:n.isRequest},!!e.isRotate&&f},dragControl:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.groupDelta,c=e.beforeDirection,l=e.beforeInfo,f=e.afterInfo,p=e.absoluteInfo,d=e.isRotate,h=e.startValue,g=e.rect;if(d){Xs(n,"rotate");var v,m,b,x,d=c*Ru(n.datas.beforeTransform,[50,50],100,100).direction,E=t.props.parentMoveable,S=180/Math.PI*h,h=p.startValue,y=!1;if(!a&&"parentDist"in n?(v=n.parentDist,x=b=m=v):s||a?(m=qa(o,c,l),b=qa(o,d,f),x=qa(o,d,p)):(m=Xa(r,i,c,l),b=Xa(r,i,d,f),x=Xa(r,i,d,p),y=!0),it(t,"onBeforeRotate",rt(t,n,{beforeRotation:S+m,rotation:S+b,absoluteRotation:h+x,setRotation:function(t){x=m=b=t-S}},!0)),a=(v=Ha(t,g,l,m,S,y))[0],m=v[1],o=v[2],r=(c=Ha(t,g,f,b,S,y))[0],b=c[1],i=c[2],l=(d=Ha(t,g,p,x,h,y))[0],x=d[1],v=d[2],l||r||a||E)return f=Hs(e,"rotate(".concat(i,"deg)"),"rotate(".concat(b,"deg)")),c=b,g=e.fixedPosition,p=e,h=ou(t),d=T(J(u||[0,0],y=iu(t,"rotate(".concat(c,"deg)"),h,g,p)),e.prevInverseDist||[0,0]),e.prevInverseDist=y,e.requestValue=null,E=rt(t,n,O({delta:r,dist:b,rotate:i,rotation:i,beforeDist:m,beforeDelta:a,beforeRotate:o,beforeRotation:o,absoluteDist:x,absoluteDelta:l,absoluteRotate:v,absoluteRotation:v,isPinch:!!s},ru(t,f,d,s,n))),it(t,"onRotate",E),E}},dragControlAfter:function(t,n){n.datas.requestValue},dragControlEnd:function(t,n){var e=n.datas;if(e.isRotate)return e.isRotate=!1,e=Fu(t,n,{}),it(t,"onRotateEnd",e),e},dragGroupControlCondition:La,dragGroupControlStart:function(t,n){var e=n.datas,r=t.state,i=r.left,o=r.top,a=r.beforeOrigin,r=this.dragControlStart(t,n);if(!r)return!1;r.set(e.beforeDirection*t.rotation);n=ka(t,this,"dragControlStart",n,function(t,n){var t=t.state,e=t.left,r=t.top,t=t.beforeOrigin,e=J(T([e,r],[i,o]),T(t,a));return n.datas.groupClient=e,O(O({},n),{parentRotate:0})}),t=it(t,"onRotateGroupStart",O(O({},r),{targets:t.props.targets,events:n}));return e.isRotate=!1!==t,!!e.isRotate&&r},dragGroupControl:function(n,e){var t=e.datas;if(t.isRotate){Nu(n,"onBeforeRotate",function(t){it(n,"onBeforeRotateGroup",rt(n,e,O(O({},t),{targets:n.props.targets}),!0))});var a,s,u,r=this.dragControl(n,e);if(r)return a=t.beforeDirection,s=r.beforeDist,u=r.beforeDelta/180*Math.PI,t=ka(n,this,"dragControl",e,function(t,n){var e=n.datas.groupClient,r=e[0],e=e[1],i=Bn([r,e],u*a),o=i[0],i=i[1],r=[o-r,i-e];return n.datas.groupClient=[o,i],O(O({},n),{parentRotate:s,groupDelta:r})}),n.rotation=a*r.beforeRotation,t=O({targets:n.props.targets,events:t,set:function(t){n.rotation=t},setGroupRotation:function(t){n.rotation=t}},r),it(n,"onRotateGroup",t),t}},dragGroupControlEnd:function(t,n){var e,r=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),e=ka(t,this,"dragControlEnd",n),it(t,"onRotateGroupEnd",Fu(t,n,{targets:t.props.targets,events:e})),r},request:function(t){var n={},e=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaRotate"in t?e+=t.deltaRotate:"rotate"in t&&(e=t.rotate-r),{datas:n,parentDist:e}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},Va=["left","right","center"],Ua=["top","bottom","middle"],$a={start:"left",end:"right",center:"center"},Za={start:"top",end:"bottom",center:"middle"};function Ka(t,n){var e=t.props,r=e.snappable,i=e.bounds,o=e.innerBounds,a=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,e=e.snapGridHeight,t=t.state,c=t.guidelines,t=t.enableSnap;return r&&t&&!(n&&!0!==r&&r.indexOf(n)<0)&&!!(u||e||i||o||c&&c.length||a&&a.length||s&&s.length)}function Ja(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Qa(t,n){var e=function(t,n){var e,r=Ja(t),i={};for(e in r)e in n&&r[e]&&(i[e]=n[e]);return i}(t,n),t=Ua.filter(function(t){return t in e}),n=Va.filter(function(t){return t in e});return{horizontal:t.map(function(t){return e[t]}),vertical:n.map(function(t){return e[t]})}}function ts(t,n,e,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0);var s=[],u=(a=void 0===a?{left:0,top:0,right:0,bottom:0}:a).left,c=a.top,l=a.bottom,f=e+a.right-u,p=r+l-c;return t&&t.forEach(function(t){s.push({type:"horizontal",pos:[u,N(t-o+c,.1)],size:f})}),n&&n.forEach(function(t){s.push({type:"vertical",pos:[N(t-i+u,.1),c],size:p})}),s}function ns(t,n){if(!n.length)return[];var t=t.state,e=t.containerClientRect,r=t.targetClientRect,i=r.top,r=r.left,o=t.rootMatrix,a=t.is3d?4:3,e=(c=H(c=o,[(e=e).clientLeft,e.clientTop],a),[e.left+c[0],e.top+c[1]]),s=e[0],u=e[1],c=Un(Iu(t)),e=T([c.minX,c.minY],qu(o,[r-s,i-u],a)).map(function(t){return t=t,Math.round(t%1==-.5?t-1:t)}),l=e[0],f=e[1];return n.map(function(t){var n=t.element.getBoundingClientRect(),e=n.left-s,r=n.top-u,i=r+n.height,n=e+n.width,e=qu(o,[e,r],a),r=e[0],e=e[1],n=qu(o,[n,i],a),i=n[0],n=n[1];return O(O({},t),{rect:{left:r+l,right:i+l,top:e+f,bottom:n+f,center:(r+i)/2+l,middle:(e+n)/2+f}})})}function es(t){var n,e,r,o,v,u,m,i=t.state,a=i.snapOffset,i=i.containerClientRect,s=i.overflow,c=i.scrollHeight,l=i.scrollWidth,f=i.clientHeight,p=i.clientWidth,d=i.clientLeft,i=i.clientTop,h=t.props,g=h.snapGap,g=void 0===g||g,b=h.verticalGuidelines,x=h.horizontalGuidelines,E=h.snapThreshold,E=void 0===E?5:E,S=h.snapGridWidth,S=void 0===S?0:S,h=h.snapGridHeight,h=void 0===h?0:h,y=et([],function(t){var n=t.state,e=t.props.elementGuidelines;if(!(e=void 0===e?[]:e).length)return n.elementRects=[],[];var r=(n.elementRects||[]).filter(function(t){return!t.refresh}),i=e.map(function(t){return ot(t)&&"element"in t?t:{element:$u(t,!0)}}).filter(function(t){return t.element}),o=(e=Hn(r.map(function(t){return t.element}),i.map(function(t){return t.element}))).maintained,a=e.added,s=[],g=(o.forEach(function(t){var n=t[0],t=t[1];s[t]=r[n]}),ns(t,a.map(function(t){return i[t]})).map(function(t,n){s[a[n]]=t}),n.elementRects=s,Ja(t.props.elementSnapDirections)),v=[];return s.forEach(function(n){var e=n.element,t=n.top,t=void 0===t?g.top:t,r=n.left,r=void 0===r?g.left:r,i=n.right,i=void 0===i?g.right:i,o=n.bottom,o=void 0===o?g.bottom:o,a=n.center,a=void 0===a?g.center:a,s=n.middle,s=void 0===s?g.middle:s,u=n.className,c=n.rect,t=Qa({top:t,right:i,left:r,bottom:o,center:a,middle:s},c),i=t.horizontal,r=t.vertical,l=c.top,f=c.left,p=c.right-f,d=c.bottom-l,h=[p,d];r.forEach(function(t){v.push({type:"vertical",element:e,pos:[N(t,.1),l],size:d,sizes:h,className:u,elementRect:n})}),i.forEach(function(t){v.push({type:"horizontal",element:e,pos:[f,N(t,.1)],size:p,sizes:h,className:u,elementRect:n})})}),v}(t),!0);return g&&(n=(g=yu(Iu(t.state))).top,e=g.left,r=g.bottom,g=g.right,y.push.apply(y,(o={top:n,left:e,bottom:r,right:g,center:(e+g)/2,middle:(n+r)/2},v=E,u=t.state.elementRects,m=[],[["vertical",$a,Za],["horizontal",Za,$a]].forEach(function(t){var f=t[0],p=t[1],a=t[2],d=o[p.start],h=o[p.end],g=o[p.center],e=o[a.start],r=o[a.end];function i(t){t=t.rect;return t[p.end]<d+v?d-t[p.end]:h-v<t[p.start]?t[p.start]-h:-1}var n=u.filter(function(t){var n=t.rect;return!(n[a.start]>r||n[a.end]<e)&&0<i(t)}).sort(function(t,n){return i(t)-i(n)}),s=[];n.forEach(function(o){n.forEach(function(t){var n,e,r,i;o!==t&&(r=o.rect,n=t.rect,e=r[a.start],r=r[a.end],i=n[a.start],n[a.end]<e||r<i||s.push([o,t]))})}),s.forEach(function(t){var n=t[0],t=t[1],e=n.rect,r=t.rect,i=e[p.start],e=e[p.end],o=r[p.start],r=r[p.end],a=0,s=0,u=!1,c=!1,l=!1;if(e<=d&&h<=o){if(c=!0,s=e+(a=(o-e-(h-d))/2)+(h-d)/2,Math.abs(s-g)>v)return}else if(e<o&&r<d+v){if(u=!0,s=r+(a=o-e),Math.abs(s-d)>v)return}else{if(!(e<o&&h-v<i))return;if(l=!0,s=i-(a=o-e),Math.abs(s-h)>v)return}a&&m.push({type:f,pos:"vertical"===f?[s,0]:[0,s],element:t.element,size:0,className:t.className,isStart:u,isCenter:c,isEnd:l,gap:a,hide:!0,gapRects:[n,t]})})}),m))),y.push.apply(y,function(t,n,e,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(n)for(var s=0;s<=r;s+=n)a.push({type:"horizontal",pos:[0,N(s-o,.1)],size:e,hide:!0});if(t)for(s=0;s<=e;s+=t)a.push({type:"vertical",pos:[N(s-i,.1),0],size:r,hide:!0});return a}(S,h,s?l:p,s?c:f,d,i)),y.push.apply(y,ts(x||!1,b||!1,s?l:p,s?c:f,d,i,a)),y}function rs(t,n,e,r){r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.length-1,r=0;r<e;++r){var i=t[r];if(!$(i))return i}return t[e]}(r,t.props.snapThreshold,5);return is(t.state.guidelines,n,e,r)}function is(t,n,e,r){return{vertical:ss(t,"vertical",n,r),horizontal:ss(t,"horizontal",e,r)}}function os(t,n,e){n=Qa(t.props.snapDirections,n);return rs(t,n.vertical,n.horizontal,e)}function as(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=t.posInfos[0],e=t.guidelineInfos[0],r=e.offset,i=e.dist,e=e.guideline;return{isSnap:n,offset:r,dist:i,pos:t.pos,guideline:e}}function ss(r,i,t,o){if(!r||!r.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,t=t.map(function(e,t){var n=r.map(function(t){var n=t.pos,n=e-n[a];return{offset:n,dist:Math.abs(n),guideline:t}}).filter(function(t){var n=t.guideline,t=t.dist;return!(n.type!==i||o<t)}).sort(function(t,n){return t.dist-n.dist});return{pos:e,index:t,guidelineInfos:n}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist}),n=0<t.length;return{isSnap:n,index:n?t[0].index:-1,posInfos:t}}function us(t,n){var e=Math.abs(t.offset),r=Math.abs(n.offset);return t.isBound&&n.isBound?r-e:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?r-e:t.isSnap?-1:n.isSnap||e<Pa?1:r<Pa?-1:e-r}function cs(t,a){return t.slice().sort(function(t,n){var e=t.sign[a],r=n.sign[a],i=t.offset[a],o=n.offset[a];return e?r?us({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function ls(t,n){var e=Rt([n[0][0],n[1][0]]),n=Rt([n[0][1],n[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function fs(t,n){var e,r=n[0],n=n[1],i=n[0]-r[0],n=n[1]-r[1];return Math.abs(i)<Pa&&(i=0),Math.abs(n)<Pa&&(n=0),n=i?(e=n?n/i*(t[0]-r[0])+r[1]:r[1],t[1]):(e=r[0],t[0]),e-n}function ps(t,n,e,r){return void 0===r&&(r=Pa),t.every(function(t){t=fs(t,n);return t<=0===e||Math.abs(t)<=r})}function ds(t,n,e,r,i){return void 0===i&&(i=0),r&&n-i<=t||!r&&t<=e+i?{isBound:!0,offset:r?n-t:e-t}:{isBound:!1,offset:0}}function hs(t,n,e,r,i,o){var a,s,u=n[0],n=n[1],t=t[0],c=e[0],e=e[1],l=Vu(e[1]-c[1]),f=n,p=u,u=-u/n;return Vu(e[0]-c[0])?l||o&&!f?{isBound:!1,offset:0}:p?ds((c[1]-t[1])/u+t[0],c[0],e[0],r,i):(a=c[1]-t[1],{isBound:s=Math.abs(a)<=(i||0),offset:s?a:0}):o&&!p?{isBound:!1,offset:0}:f?ds(u*(c[0]-t[0])+t[1],c[1],e[1],r,i):(a=c[0]-t[0],{isBound:s=Math.abs(a)<=(i||0),offset:s?a:0})}function gs(a,t,s){return t.map(function(t){var n=function(t,n){var e=n.line,r=n.centerSign,i=n.verticalSign,o=n.horizontalSign,n=n.lineConstants;if(!(t=t.props.innerBounds))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=t.left,s=t.top,u=t.width,t=t.height,c=[[a,s],[a,s+t]],l=[[a,s],[a+u,s]],f=[[a+u,s],[a+u,s+t]],p=[[a,s+t],[a+u,s+t]];return ps([[a,s],[a+u,s],[a,s+t],[a+u,s+t]],e,r)?{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]}:(a=hs(e,n,l,i),u=hs(e,n,p,i),s=hs(e,n,c,o),t=hs(e,n,f,o),r=a.isBound&&u.isBound,l=a.isBound||u.isBound,p=s.isBound&&t.isBound,i=s.isBound||t.isBound,c=ju(a.offset,u.offset),e=ju(s.offset,t.offset),f=!(n=[0,0]),{isAllBound:Math.abs(e)<Math.abs(c)?(n=[c,0],f=l,r):(n=[0,e],f=i,p),isVerticalBound:l,isHorizontalBound:i,isBound:f,offset:n})}(a,t),e=n.isBound,r=n.offset,i=n.isVerticalBound,n=n.isHorizontalBound,o=t.multiple,t=Us({datas:s,distX:r[0],distY:r[1]}).map(function(t,n){return t*(o[n]?2/o[n]:0)});return{sign:o,isBound:e,isVerticalBound:i,isHorizontalBound:n,isSnap:!1,offset:t}})}function vs(t,n,e){var r,i,o,a,s,u,t=gs(t,ms(t,n,[0,0],!1).map(function(t){return O(O({},t),{multiple:t.multiple.map(function(t){return 2*Math.abs(t)})})}),e),n=cs(t,0),t=cs(t,1),c=0,l=0,f=n.isVerticalBound||t.isVerticalBound,p=n.isHorizontalBound||t.isHorizontalBound;return(f||p)&&(e={datas:e,distX:-n.offset[0],distY:-t.offset[1]},n=e.datas,t=e.distX,e=e.distY,i=n.beforeMatrix,o=n.matrix,a=n.is3d,s=n.startDragBeforeDist,u=n.startDragDist,n=n.absoluteOrigin,a=a?4:3,c=(i=T(E(r?i:o,J(r?s:u,[t,e]),a),n))[0],l=i[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:p,offset:l}}}function ms(t,l,n,e){var r,i,t=t.state,f=Su(t.allMatrix,100,100,t.is3d?4:3),p=q(f,[0,0]);return t=e,e=[],r=(n=n)[0],i=n[1],r&&i?e.push([[0,2*i],n,[-r,i]],[[2*r,0],n,[r,-i]]):r?(e.push([[2*r,0],[r,1],[r,-1]]),t&&e.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(e.push([[0,2*i],[1,i],[-1,i]]),t&&e.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e.map(function(t){var n,e,r=t[0],i=t[1],t=t[2],o=[q(f,i),q(f,t)],a=(u=(a=o)[0],s=(a=a[1])[0]-u[0],a=a[1]-u[1],Math.abs(s)<A&&(s=0),Math.abs(a)<A&&(a=0),e=n=c=0,e=s?a?(c=-a/s)*u[0]-u[n=1]:-u[n=1]:(c=-1,u[0]),[c,n,e].map(function(t){return N(t,A)})),s=ls(p,o),u=s.vertical,c=s.horizontal;return{multiple:r,centerSign:fs(p,o)<=0,verticalSign:u,horizontalSign:c,lineConstants:a,line:[q(l,i),q(l,t)]}})}function bs(t,e,r,n){t=n?t.map(function(t){return Bn(t,n)}):t;return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].some(function(t){var n=fs(r,t)<=0;return!ps(e,t,n)})}function xs(t,n,e){var t=t||{},r=t.position,i=t.left,o=t.top,a=t.right,t=t.bottom,r={position:void 0===r?"client":r,left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===t?1/0:t};return{vertical:Ss(r,n,!0),horizontal:Ss(r,e,!1)}}function Es(t,n){var e=t.state,r=e.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,r=r.clientTop,e=e.snapOffset,s=e.left,u=e.top,c=e.right,e=e.bottom,n=n||t.props.bounds||{},t="css"===(n.position||"client"),l=n.left,f=n.top,p=n.right,p=void 0===p?t?-1/0:1/0:p,n=n.bottom,n=void 0===n?t?-1/0:1/0:n;return t&&(p=o+c-s-p,n=i+e-u-n),{left:(void 0===l?-1/0:l)+s-a,right:p+s-a,top:(void 0===f?-1/0:f)+u-r,bottom:n+u-r}}function Ss(t,n,e){var r=t[e?"left":"top"],t=t[e?"right":"bottom"],e=Math.min.apply(Math,n),n=Math.max.apply(Math,n),i=[];return e<r+1&&i.push({isBound:!0,offset:e-r,pos:r}),t-1<n&&i.push({isBound:!0,offset:n-t,pos:t}),i.length||i.push({isBound:!1,offset:0,pos:0}),i.sort(function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)})}function ys(t,n,e){return(e?t.map(function(t){return Bn(t,e)}):t).some(function(t){return t[0]<n.left&&.1<Math.abs(t[0]-n.left)||t[0]>n.right&&.1<Math.abs(t[0]-n.right)||t[1]<n.top&&.1<Math.abs(t[1]-n.top)||t[1]>n.bottom&&.1<Math.abs(t[1]-n.bottom)})}function Ms(t,n){return t=O(O({},t),{classNames:et([X("line","guideline",t.direction)],t.classNames,!0).filter(function(t){return t}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(t){return"".concat(N(t,.1),"px")})}),n=n,e=t.direction,r=t.classNames,i=t.size,o=t.pos,a=t.zoom,t=t.key,s=(e="horizontal"===e)?"Y":"X",n.createElement("div",{key:t,className:r.join(" "),style:((n={})[e?"width":"height"]="".concat(i),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(s,"(-50%) scale").concat(s,"(").concat(a,")"),n)});var e,r,i,o,a,s}function Rs(t,i,n,o,a,s,u,c){var l=t.props.zoom;return n.map(function(t,n){var e=t.type,t=t.pos,r=[0,0];return r[u]=o,r[u?0:1]=-a+t,Ms({key:"".concat(i,"TargetGuideline").concat(n),classNames:[X("target","bold",e)],posValue:r,sizeValue:s,zoom:l,direction:i},c)})}function Ds(t,i,n,o,e,a){var t=t.props,s=t.zoom,r=t.isDisplayInnerSnapDigit,u="horizontal"===i?$a:Za,c=e[u.start],l=e[u.end];return n.filter(function(t){var n=t.hide,t=t.elementRect;if(n)return!1;if(r&&t){n=t.rect;if(n[u.start]<=c&&l<=n[u.end])return!1}return!0}).map(function(t,n){var e=t.pos,r=t.size,t=t.element,e=[-o[0]+e[0],-o[1]+e[1]];return Ms({key:"".concat(i,"-default-guideline-").concat(n),classNames:t?[X("bold")]:[],direction:i,posValue:e,sizeValue:r,zoom:s},a)})}function Cs(t,n,e,r,i,o,a,s){var t=t.props,u=t.snapDigit,u=void 0===u?0:u,c=t.isDisplaySnapDigit,c=void 0===c||c,l=t.snapDistFormat,l=void 0===l?function(t){return t}:l,t=t.zoom,f="horizontal"===n?"X":"Y",p="vertical"===n?"height":"width",i=Math.abs(i),c=c?parseFloat(i.toFixed(u)):0;return s.createElement("div",{key:"".concat(n,"-").concat(e,"-guideline-").concat(r),className:X("guideline-group",n),style:((u={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")})[p]="".concat(i,"px"),u)},Ms({direction:n,classNames:[X(e),a],size:"100%",posValue:[0,0],sizeValue:i,zoom:t},s),s.createElement("div",{className:X("size-value","gap"),style:{transform:"translate".concat(f,"(-50%) scale(").concat(t,")")}},0<c?l(c):""))}function ws(y,n,M,R,D){var e=y.props.isDisplayInnerSnapDigit,C=[];return["vertical","horizontal"].forEach(function(a){var u,c,i,o,s,l,f,p,d,h,g,t=n.filter(function(t){return t.type===a}),v="vertical"===a?1:0,m=v?0:1,t=(t=t,c=e,p="vertical"===(u=a)?1:0,h=R[(d=(f="vertical"===u?0:1)?$a:Za).start],g=R[d.end],o=function(t){return t.pos[f]},s=[],l=[],(i=t).forEach(function(t,n){var n=o(t,n,i),e=l.indexOf(n),r=s[e]||[];-1===e&&(l.push(n),s.push(r)),r.push(t)}),s.map(function(t){var a=[],s=[];return t.forEach(function(t){var n,e,r,i=t.element,o=t.elementRect.rect;o[d.end]<h?a.push(t):g<o[d.start]?s.push(t):o[d.start]<=h&&g<=o[d.end]&&c&&(n=t.pos,e={element:i,rect:O(O({},o),((e={})[d.end]=o[d.start],e))},o={element:i,rect:O(O({},o),((i={})[d.start]=o[d.end],i))},i=[0,0],(r=[0,0])[f]=n[f],r[p]=n[p],i[f]=n[f],i[p]=n[p]+t.size,a.push({type:u,pos:r,size:0,elementRect:e}),s.push({type:u,pos:i,size:0,elementRect:o}))}),a.sort(function(t,n){return n.pos[p]-t.pos[p]}),s.sort(function(t,n){return t.pos[p]-n.pos[p]}),{total:t,start:a,end:s,inner:[]}})),b=v?Za:$a,x=v?$a:Za,E=R[b.start],S=R[b.end];t.forEach(function(t){var n=t.total,e=t.start,r=t.end,t=t.inner,o=M[m]+n[0].pos[m]-R[x.start],i=R;e.forEach(function(t){var n,e=t.elementRect.rect,r=i[b.start]-e[b.end];0<r&&((n=[0,0])[v]=M[v]+i[b.start]-E-r,n[m]=o,C.push(Cs(y,a,"dashed",C.length,r,n,t.className,D))),i=e}),i=R,r.forEach(function(t){var n,e=t.elementRect.rect,r=e[b.start]-i[b.end];0<r&&((n=[0,0])[v]=M[v]+i[b.end]-E,n[m]=o,C.push(Cs(y,a,"dashed",C.length,r,n,t.className,D))),i=e}),t.forEach(function(t){var n=t.elementRect.rect,e=E-n[b.start],n=n[b.end]-S,r=[0,0],i=[0,0];r[v]=M[v]-e,r[m]=o,i[v]=M[v]+S-E,i[m]=o,C.push(Cs(y,a,"dashed",C.length,e,r,t.className,D)),C.push(Cs(y,a,"dashed",C.length,n,i,t.className,D))})})}),C}function Os(t,n,e,r,i){o=t,e=e,r=r,a=(u=n)[0]-o[0],s=u[1]-o[1],Math.abs(a)<A&&(a=0),Math.abs(s)<A&&(s=0);var o=a?s?(s/=a,a=o[1]-s*o[0],r?[e,s*(u[0]+e)+a-u[1]]:[(u[1]+e-a)/s-u[0],e]):r?[e,0]:[0,0]:r?[0,0]:[0,e];if(!o)return{isOutside:!1,offset:[0,0]};var a=g(t,n),s=g(o,t),u=g(o,n),r=a<s||a<u,e=Us({datas:i,distX:o[0],distY:o[1]});return{offset:[e[0],e[1]],isOutside:r}}function Ps(t,n){return t.isBound?t.offset:n.isSnap?as(n).offset:0}function Bs(t,n,e,r,i,o){if(!Ka(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,c,l=Au(o.absolutePoses,[n,e]),f=yu(l),p=f.left,d=f.right,h=f.top,f=f.bottom,g={horizontal:l.map(function(t){return t[1]}),vertical:l.map(function(t){return t[0]})},i=zs(t,i,Qa(Ja(t.props.snapDirections),{left:p,right:d,top:h,bottom:f,center:(p+d)/2,middle:(h+f)/2}),g),p=i.vertical,d=i.horizontal,h=vs(t,l,o),f=h.vertical,g=h.horizontal,i=p.isSnap,t=d.isSnap,l=p.isBound||f.isBound,o=d.isBound||g.isBound,h=ju(p.offset,f.offset),p=ju(d.offset,g.offset),v=(f=r,d=[l,o],g=[i,t],r=[h,p],s=(h=[n,e])[0],u=h[1],h=d[0],d=d[1],p=g[0],g=g[1],n=r[0],r=r[1],e=-n,c=-r,f&&s&&u?(c=e=0,v=[],h&&d?v.push([0,r],[n,0]):h?v.push([n,0]):d?v.push([0,r]):p&&g?v.push([0,r],[n,0]):p?v.push([n,0]):g&&v.push([0,r]),v.length&&(v.sort(function(t,n){return Du(T([s,u],t))-Du(T([s,u],n))}),(p=v[0])[0]&&Math.abs(s)>A?(e=-p[0],c=u*Math.abs(s+e)/Math.abs(s)-u):p[1]&&Math.abs(u)>A&&(g=u,c=-p[1],e=s*Math.abs(u+c)/Math.abs(g)-s),f&&d&&h&&(Math.abs(e)>A&&Math.abs(e)<Math.abs(n)?(e*=a=Math.abs(n)/Math.abs(e),c*=a):Math.abs(c)>A&&Math.abs(c)<Math.abs(r)?(e*=a=Math.abs(r)/Math.abs(c),c*=a):(e=ju(-n,e),c=ju(-r,c))))):(e=s||h?-n:0,c=u||d?-r:0),[e,c]);return[{isBound:l,isSnap:i,offset:v[0]},{isBound:o,isSnap:t,offset:v[1]}]}function zs(t,n,e,r){var r=xs(Es(t),(r=void 0===r?e:r).vertical,r.horizontal),i=r.horizontal,r=r.vertical,n=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:rs(t,e.vertical,e.horizontal),t=n.horizontal,e=n.vertical,n=Ps(i[0],t),o=Ps(r[0],e),a=Math.abs(n),s=Math.abs(o);return{horizontal:{isBound:i[0].isBound,isSnap:t.isSnap,snapIndex:t.index,offset:n,dist:a,bounds:i,snap:t},vertical:{isBound:r[0].isBound,isSnap:e.isSnap,snapIndex:e.index,offset:o,dist:s,bounds:r,snap:e}}}function Gs(t,n,e,r,i){var n=xs(n,e,r),o=n.horizontal,n=n.vertical,t=is(t,e,r,i),e=t.horizontal,r=t.vertical,i=Ps(o[0],e),t=Ps(n[0],r),a=Math.abs(i),s=Math.abs(t);return{horizontal:{isBound:o[0].isBound,isSnap:e.isSnap,snapIndex:e.index,offset:i,dist:a,bounds:o,snap:e},vertical:{isBound:n[0].isBound,isSnap:r.isSnap,snapIndex:r.index,offset:t,dist:s,bounds:n,snap:r}}}function Ts(M,R,t,D,C,w){return t.map(function(t){var n=t[0],t=t[1],e=q(R,n),r=q(R,t),i=D?(l=C,u=function(t,n,e){var r,i,o=(t=Es(t)).left,a=t.top,s=t.right,t=t.bottom,u=e[0],c=e[1],l=(n=T(e,n))[0],n=n[1],f=(Math.abs(l)<Pa&&(l=0),0<(n=Math.abs(n)<Pa?0:n)),p=0<l,d={isBound:!1,offset:0,pos:0},h={isBound:!1,offset:0,pos:0};return 0===l&&0===n||(0===l?f?t<c&&(h.pos=t,h.offset=c-t):c<a&&(h.pos=a,h.offset=c-a):0===n?p?s<u&&(d.pos=s,d.offset=u-s):u<o&&(d.pos=o,d.offset=u-o):(n=e[1]-(e=n/l)*u,r=l=0,i=!1,p&&s<=u?(l=e*s+n,r=s,i=!0):!p&&u<=o&&(l=e*o+n,r=o,i=!0),(i=i&&(l<a||t<l)?!1:i)||(f&&t<=c?(r=((l=t)-n)/e,i=!0):!f&&c<=a&&(r=((l=a)-n)/e,i=!0)),i&&(d.isBound=!0,d.pos=r,d.offset=u-r,h.isBound=!0,h.pos=l,h.offset=c-l))),{vertical:d,horizontal:h}}(o=M,c=e,a=r),i=u.horizontal,u=u.vertical,l=l?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,e){var r=e[0],i=e[1],o=n[0],a=n[1],s=(n=T(e,n))[0],u=0<(n=n[1]),c=0<s,s=Vu(s),n=Vu(n),l={isSnap:!1,offset:0,pos:0},f={isSnap:!1,offset:0,pos:0};if(0===s&&0===n)return{vertical:l,horizontal:f};var p,d=(t=rs(t,s?[r]:[],n?[i]:[])).vertical,t=t.horizontal;d.posInfos.filter(function(t){t=t.pos;return c?o<=t:t<=o}),t.posInfos.filter(function(t){t=t.pos;return u?a<=t:t<=a}),d.isSnap=0<d.posInfos.length,t.isSnap=0<t.posInfos.length;var h=(d=as(d)).isSnap,d=d.guideline,g=(t=as(t)).isSnap,t=t.guideline,v=g?t.pos[1]:0,d=h?d.pos[0]:0;return 0===s?g&&(f.isSnap=!0,f.pos=t.pos[1],f.offset=i-f.pos):0===n?h&&(l.isSnap=!0,l.pos=d,l.offset=r-d):(e=e[1]-(t=n/s)*r,s=n=0,p=!1,h?(n=t*(s=d)+e,p=!0):g&&(s=((n=v)-e)/t,p=!0),p&&(l.isSnap=!0,l.pos=s,l.offset=r-s,f.isSnap=!0,f.pos=n,f.offset=i-n)),{vertical:l,horizontal:f}}(o,c,a),o=l.horizontal,c=l.vertical,a=_s(i,o),l=_s(u,c),s=Math.abs(a),f=Math.abs(l),{horizontal:{isBound:i.isBound,isSnap:o.isSnap,offset:a,dist:s},vertical:{isBound:u.isBound,isSnap:c.isSnap,offset:l,dist:f}}):zs(M,C,{vertical:[r[0]],horizontal:[r[1]]}),o=i.horizontal,a=o.offset,s=o.isBound,u=o.isSnap,c=i.vertical,l=c.offset,f=c.isBound,p=c.isSnap,d=T(t,n);if(!l&&!a)return{isBound:f||s,isSnap:p||u,sign:d,offset:[0,0]};E=i,g=D,h=F(h=e,S=r)/Math.PI*180,y=(S=E.vertical).isBound,v=S.isSnap,S=S.dist,m=(E=E.horizontal).isBound,b=E.isSnap,x=(h=h%180)<3||177<h,h=87<h&&h<93;var h,g,v,m,b,x,E=E.dist<S&&(y||v&&!h&&(!g||!x))?"vertical":!m&&(!b||x||g&&h)?"":"horizontal";if(!E)return{sign:d,isBound:!1,isSnap:!1,offset:[0,0]};var S="vertical"==E,y=[0,0];return y=(y=D||1!==Math.abs(t[0])||1!==Math.abs(t[1])||n[0]===t[0]||n[1]===t[1]?Os(e,r,-(S?l:a),S,w).offset:Us({datas:w,distX:-l,distY:-a})).map(function(t,n){return t*(d[n]?2/d[n]:0)}),{sign:d,isBound:S?f:s,isSnap:S?p:u,offset:y}})}function _s(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function As(t){var n,e,r,i,o=t.state;o.guidelines&&o.guidelines.length||(r=t.state.container,i=t.props.snapContainer||r,n=o.containerClientRect,e={left:0,top:0,bottom:0,right:0},r!==i&&(r=$u(i,!0))&&(r=Zu(o,[(i=Tu(r)).left-n.left,i.top-n.top]),i=Zu(o,[i.right-n.right,i.bottom-n.bottom]),e.left=N(r[0],.1),e.top=N(r[1],.1),e.right=N(i[0],.1),e.bottom=N(i[1],.1)),o.snapOffset=e,o.guidelines=es(t),o.enableSnap=!0)}function Is(t,n,e,r,i,o){t=Su(t,n,e,o?4:3);return Au(t,T(i,q(t,r)))}function ks(t,n,e,r,i,o){var a,s,u,c,l=o.fixedDirection,l=(a=e,s=l,c=[],r?(1!==Math.abs(s[0])||1!==Math.abs(s[1])?c.push([s,[-1,-1]],[s,[-1,1]],[s,[1,-1]],[s,[1,1]]):c.push([s,[a[0],-a[1]]],[s,[-a[0],a[1]]]),c.push([s,a])):a[0]&&a[1]||!a[0]&&!a[1]?(u=a[0]?a:[1,1],[1,-1].forEach(function(n){[1,-1].forEach(function(t){t=[n*u[0],t*u[1]];s[0]===t[0]&&s[1]===t[1]||c.push([s,t])})})):a[0]?(1===Math.abs(s[0])?[1]:[1,-1]).forEach(function(t){c.push([[s[0],-1],[t*a[0],-1]],[[s[0],0],[t*a[0],0]],[[s[0],1],[t*a[0],1]])}):a[1]&&(1===Math.abs(s[1])?[1]:[1,-1]).forEach(function(t){c.push([[-1,s[1]],[-1,t*a[1]]],[[0,s[1]],[0,t*a[1]]],[[1,s[1]],[1,t*a[1]]])}),c),e=ms(t,n,e,r),n=et(et([],Ts(t,n,l,r,i,o),!0),gs(t,e,o),!0),l=cs(n,0),r=cs(n,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:r.isBound,offset:r.offset[1]}}}function Fs(t,n,e,r,i,o,a,s){for(var u,c,l,f,p,d,h,g,v,m,b,x,E,S,y,M,I,R,D,C=Iu(t.state),k=t.props.keepRatio,w=0,O=0,P=0;P<2;++P){var B=ks(t,n(w,O),i,k,a,s),z=B.width,B=B.height,G=z.isBound,T=B.isBound,_=z.offset,A=B.offset;if(1===P&&(G||(_=0),T||(A=0)),0===P&&a&&!G&&!T)return[0,0];k&&(z=Math.abs(_)*(e?1/e:1),B=Math.abs(A)*(r?1/r:1),(G&&T?z<B:T||!G&&z<B)?_=e*A/r:A=r*_/e),w+=_,O+=A}return i[0]&&i[1]&&(h=t,g=C,v=o,m=s,y=[-(C=i)[0],-C[1]],M=(o=h.state).width,I=o.height,o=h.props.bounds,D=R=1/0,o&&(h=[[C[0],-C[1]],[-C[0],C[1]]],C=o.left,b=void 0===C?-1/0:C,C=o.top,x=void 0===C?-1/0:C,C=o.right,E=void 0===C?1/0:C,C=o.bottom,S=void 0===C?1/0:C,h.forEach(function(t){var n,e,r=t[0]!==y[0],i=t[1]!==y[1],t=q(g,t),o=360*F(v,t)/Math.PI;i&&(n=t.slice(),(Math.abs(o-360)<2||Math.abs(o-180)<2)&&(n[1]=v[1]),e=(i=Os(v,n,(v[1]<t[1]?S:x)-t[1],!1,m)).offset[1],i=i.isOutside,isNaN(e)||(D=I+(i?1:-1)*Math.abs(e))),r&&(n=t.slice(),(Math.abs(o-90)<2||Math.abs(o-270)<2)&&(n[0]=v[0]),e=(i=Os(v,n,(v[0]<t[0]?E:b)-t[0],!0,m)).offset[0],r=i.isOutside,isNaN(e)||(R=M+(r?1:-1)*Math.abs(e)))})),C=(o={maxWidth:R,maxHeight:D}).maxWidth,h=o.maxHeight,o=t,u=n(w,O).map(function(t){return t.map(function(t){return N(t,Oa)})}),c=e+w,l=r+O,C=C,h=h,p=a,d=s,u=q(u,f=i),p=(o=zs(o,p,{vertical:[u[0]],horizontal:[u[1]]})).horizontal.offset,w+=_=(p=(u=o.vertical.offset)||p?(d=(o=Us({datas:d,distX:-u,distY:-p}))[0],u=o[1],[Math.min(C||1/0,c+f[0]*d)-c,Math.min(h||1/0,l+f[1]*u)-l]):[0,0])[0],O+=A=p[1]),[w,O]}function Ns(t,o,n,e,a){if(!Ka(t,"scalable"))return[0,0];var s=a.startOffsetWidth,u=a.startOffsetHeight,c=a.fixedPosition,l=a.fixedDirection,f=a.is3d,t=Fs(t,function(t,n){return Is((e=a,t=J(o,[t/s,n/u]),n=e.transformOrigin,r=e.offsetMatrix,i=e.is3d,e=e.targetMatrix,Ks(r,K(e,_n(t,i=i?4:3),i),n,i)),s,u,l,c,f);var e,r,i},s,u,n,c,e,a);return[t[0]/s,t[1]/u]}function Ws(t){var n=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){t=t.guideline;-1<n.indexOf(t)||n.push(t)})}),n}function Ys(t,n,e,r,i,o){o=xs(Es(t,o),n,e),n=o.vertical,e=o.horizontal,n.forEach(function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})}),e.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),o=function(t){if(!(e=t.props.innerBounds))return{vertical:[],horizontal:[]};var n=t.getRect(),a=q(n=[n.pos1,n.pos2,n.pos3,n.pos4],[0,0]),s=e.left,u=e.top,c=e.width,l=e.height,f=[[s,u],[s,u+l]],p=[[s,u],[s+c,u]],d=[[s+c,u],[s+c,u+l]],h=[[s,u+l],[s+c,u+l]],e=ms(t,n,[0,0],!1),g=[],v=[],m={top:!1,bottom:!1,left:!1,right:!1};return e.forEach(function(t){var n=t.line,t=t.lineConstants,e=ls(a,n),r=e.horizontal,e=e.vertical,i=hs(n,t,p,e,1,!0),e=hs(n,t,h,e,1,!0),o=hs(n,t,f,r,1,!0),n=hs(n,t,d,r,1,!0);i.isBound&&!m.top&&(g.push(u),m.top=!0),e.isBound&&!m.bottom&&(g.push(u+l),m.bottom=!0),o.isBound&&!m.left&&(v.push(s),m.left=!0),n.isBound&&!m.right&&(v.push(s+c),m.right=!0)}),{horizontal:g,vertical:v}}(t),n=o.vertical,e=o.horizontal;n.forEach(function(e){0<=h(r,function(t){var n=t.type,t=t.pos;return"bounds"===n&&t===e})||r.push({type:"bounds",pos:e})}),e.forEach(function(e){0<=h(i,function(t){var n=t.type,t=t.pos;return"bounds"===n&&t===e})||i.push({type:"bounds",pos:e})})}var vo={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,n){var e=t.state,r=e.top,i=e.left,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,c=e.snapRenderInfo;if(!c||!Ka(t,""))return[];e.guidelines=es(t);var h,g,v,m,b,x,e=Math.min(o[0],a[0],s[0],u[0]),o=Math.min(o[1],a[1],s[1],u[1]),a=c.externalPoses||[],s=Iu(t.state),l=[],f=[],p=[],d=[],u=[],E=yu(s),S=E.width,y=E.height,M=E.top,R=E.left,D=E.bottom,E=E.right,C={left:R,right:E,top:M,bottom:D,center:(R+E)/2,middle:(M+D)/2},w=0<a.length,a=w?yu(a):{},s=(c.request||(c.direction&&u.push(function(t,n,e){var r=[];if(e[0]&&e[1])r=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(t){return q(n,t)});else if(e[0]||e[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(t){return q(n,t)}):1<(r=Zs(n,e)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return rs(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),1)}(t,s,c.direction)),c.snap&&(s=yu(s),c.center&&(s.middle=(s.top+s.bottom)/2,s.center=(s.left+s.right)/2),u.push(os(t,s,1))),w&&(c.center&&(a.middle=(a.top+a.bottom)/2,a.center=(a.left+a.right)/2),u.push(os(t,a,1))),u.forEach(function(t){var n=t.vertical.posInfos,t=t.horizontal.posInfos;l.push.apply(l,n.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),f.push.apply(f,t.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),p.push.apply(p,Ws(n)),d.push.apply(d,Ws(t))})),Ys(t,[R,E],[M,D],l,f),w&&Ys(t,[a.left,a.right],[a.top,a.bottom],l,f,c.externalBounds),et(et([],p,!0),d,!0)),u=s.filter(function(t){return t.element&&!t.gapRects}),R=s.filter(function(t){return t.gapRects});return it(t,"onSnap",{guidelines:s.filter(function(t){return!t.element}),elements:u,gaps:R},!0),et(et(et(et(et(et([],ws(t,u,[e,o],C,n),!0),(h=t,g=R,v=[e,o],m=C,b=n,x=[],["horizontal","vertical"].forEach(function(n){var t=g.filter(function(t){return t.type===n}),a="vertical"===n?0:1,s=a?0:1,u=a?Za:$a,c=a?$a:Za,l=m[u.start],f=m[u.end],p=m[c.start],d=m[c.end];t.forEach(function(t){var e=t.gap,n=t.gapRects,r=t.className,t=Math.max.apply(Math,et([p],n.map(function(t){return t.rect[c.start]}),!1)),i=Math.min.apply(Math,et([d],n.map(function(t){return t.rect[c.end]}),!1)),o=(t+i)/2;t!==i&&o!=(p+d)/2&&n.forEach(function(t){var t=t.rect,n=[v[0],v[1]];if(t[u.end]<l)n[a]+=t[u.end]-l;else{if(!(f<t[u.start]))return;n[a]+=t[u.start]-l-e}n[s]+=o-p,x.push(Cs(h,a?"vertical":"horizontal","gap",x.length,e,n,r,b))})})}),x),!0),Ds(t,"horizontal",d,[i,r],C,n),!0),Ds(t,"vertical",p,[i,r],C,n),!0),Rs(t,"horizontal",f,e,r,S,0,n),!0),Rs(t,"vertical",l,o,i,y,1,n),!0)},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},As(t)},drag:function(t){t.state.guidelines=es(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,n){return!(!Uu(0,n)&&!La(t,n))||(!n.isRequest&&n.inputEvent?a(n.inputEvent.target,X("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,As(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,As(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){t=t.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}},j={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var e=t.props,r=e.throttleDragRotate,e=e.zoom,t=t.state,i=t.dragInfo,t=t.beforeOrigin;if(!r||!i)return[];r=i.dist;if(!r[0]&&!r[1])return[];i=Du(r),r=F(r,[0,0]);return[n.createElement("div",{className:X("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(i,"px"),transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(e,")")}})]},dragStart:function(t,n){var e=n.datas,r=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;i=z(a),e.datas={},e.left=parseFloat(i.left||"")||0,e.top=parseFloat(i.top||"")||0,e.bottom=parseFloat(i.bottom||"")||0,e.right=parseFloat(i.right||"")||0,e.startValue=[0,0],qs(t,n),Qs(n,"translate"),e.absolutePoses=Iu(t.state),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0],a=rt(t,n,O({set:function(t){e.startValue=t}},Js(n)));return!1!==(r||it(t,"onDragStart",a))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,e.isPinch=!1),!!e.isDrag&&a},drag:function(t,n){if(n){Xs(n,"translate");var e=n.datas,r=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.deltaOffset,u=n.distX,c=n.distY,l=e.isDrag,f=e.prevDist,p=e.prevBeforeDist,d=e.startValue;if(l){s&&(u+=s[0],c+=s[1]);var h,l=t.props,g=l.parentMoveable,v=!r&&l.throttleDrag||0,m=!r&&l.throttleDragRotate||0,b=!1,x=0,i=(!r&&0<m&&(u||c)&&(l=N((l=l.startDragRotate||0)+180*F([0,0],[u,c])/Math.PI,m)-l,h=c*Math.abs(Math.cos((l-90)/180*Math.PI)),h=Du([u*Math.abs(Math.cos(l/180*Math.PI)),h]),x=l*Math.PI/180,u=h*Math.cos(x),c=h*Math.sin(x)),o||r||i||m&&!u&&!c||(h=(l=Bs(t,u,c,m,a||s,e))[0],x=l[1],i=h.isSnap,a=h.isBound,s=h.offset,l=x.isSnap,h=x.isBound,b=i||l||a||h,u+=s,c+=x.offset),J(Vs({datas:e,distX:u,distY:c}),d)),s=J((a=(l={datas:e,distX:u,distY:c}).datas,h=l.distX,l=l.distY,h=Vs({datas:a,distX:h,distY:l}),l=h[0],h=h[1],E(Ls(a,Sn([l,h],4)),yn([0,0,0],4),4)),d),x=(m||b||(Ct(s,v),Ct(i,v)),T(i,d)),u=T(s,d),c=T(u,f),a=T(x,p),l=(e.prevDist=u,e.prevBeforeDist=x,e.passDelta=c,e.passDist=u,e.left+x[0]),m=e.top+x[1],b=e.right-x[0],v=e.bottom-x[1],d=Hs(e,"translate(".concat(s[0],"px, ").concat(s[1],"px)"),"translate(".concat(u[0],"px, ").concat(u[1],"px)"));if(nu(n,d),t.state.dragInfo.dist=r?[0,0]:u,r||g||!c.every(function(t){return!t})||!a.some(function(t){return!t}))return p=rt(t,n,{transform:d,dist:u,delta:c,translate:s,beforeDist:x,beforeDelta:a,beforeTranslate:i,left:l,top:m,right:b,bottom:v,width:(f=t.state).width,height:f.height,isPinch:o}),r||it(t,"onDrag",p),p}}},dragAfter:function(t,n){var e=n.datas,r=e.deltaOffset;return!(!r[0]&&!r[1])&&(e.deltaOffset=[0,0],this.drag(t,O(O({},n),{deltaOffset:r})))},dragEnd:function(t,n){var e=n.parentEvent,r=n.datas;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,r=Fu(t,n,{}),e||it(t,"onDragEnd",r),r},dragGroupStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;r=Ia(t,this,"dragStart",[r||0,i||0],n,!1),i=it(t,"onDragGroupStart",O(O({},o),{targets:t.props.targets,events:r}));return e.isDrag=!1!==i,!!e.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var e=this.drag(t,n),n=Ia(t,this,"drag",n.datas.passDelta,n,!1);if(e)return it(t,"onDragGroup",t=O({targets:t.props.targets,events:n},e)),t}},dragGroupEnd:function(t,n){var e,r=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),e=Ia(t,this,"dragEnd",[0,0],n,!1),it(t,"onDragGroupEnd",Fu(t,n,{targets:t.props.targets,events:e})),r},request:function(t){var n={},e=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:r,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function js(t,n){var e=n.clientX,r=n.clientY,n=n.datas,t=t.state,i=t.moveableClientRect,o=t.rootMatrix,a=t.is3d,t=t.pos1,o=T(qu(o,[e-i.left,r-i.top],a?4:3),t),e=Us({datas:n,distX:o[0],distY:o[1]});return[e[0],e[1]]}function qs(t,n){var n=n.datas,t=t.state,e=t.allMatrix,r=t.beforeMatrix,i=t.is3d,o=t.left,a=t.top,s=t.origin,u=t.offsetMatrix,c=t.targetMatrix,t=t.transformOrigin,l=i?4:3;n.is3d=i,n.matrix=e,n.targetMatrix=c,n.beforeMatrix=r,n.offsetMatrix=u,n.transformOrigin=t,n.inverseMatrix=y(e,l),n.inverseBeforeMatrix=y(r,l),n.absoluteOrigin=yn(J([o,a],s),l),n.startDragBeforeDist=E(n.inverseBeforeMatrix,n.absoluteOrigin,l),n.startDragDist=E(n.inverseMatrix,n.absoluteOrigin,l)}function Xs(t,n){var e,r,i,o,a,s,u,c,l,f,p,d,h,g=t.datas,t=t.originalDatas.beforeRenderable,v=g.transformIndex,m=t.nextTransforms,b=t.nextTransformAppendedIndexes,x=0,m=(-1===v?(x=m.length,g.transformIndex=x):x=v+b.filter(function(t){return t<v}).length,e=x,r=(m=m).slice(0,e<0?void 0:e),i=m.slice(0,e<0?void 0:e+1),o=m[e]||"",a=e<0?[]:m.slice(e),e=e<0?[]:m.slice(e+1),s=Wn(r),u=Wn(i),c=Wn([o]),l=Wn(a),f=Wn(e),E=Nn(s),S=Nn(u),p=Nn(l),d=Nn(f),h=K(E,p,4),{transforms:m,beforeFunctionMatrix:E,beforeFunctionMatrix2:S,targetFunctionMatrix:Nn(c),afterFunctionMatrix:p,afterFunctionMatrix2:d,allFunctionMatrix:h,beforeFunctions:s,beforeFunctions2:u,targetFunction:c[0],afterFunctions:l,afterFunctions2:f,beforeFunctionTexts:r,beforeFunctionTexts2:i,targetFunctionText:o,afterFunctionTexts:a,afterFunctionTexts2:e}),E=m.targetFunction,S="rotate"===n?"rotateZ":n;g.beforeFunctionTexts=m.beforeFunctionTexts,g.afterFunctionTexts=m.afterFunctionTexts,g.beforeTransform=m.beforeFunctionMatrix,g.beforeTransform2=m.beforeFunctionMatrix2,g.targetTansform=m.targetFunctionMatrix,g.afterTransform=m.afterFunctionMatrix,g.afterTransform2=m.afterFunctionMatrix2,g.targetAllTransform=m.allFunctionMatrix,E.functionName===S?(g.afterFunctionTexts.splice(0,1),g.isAppendTransform=!1):(g.isAppendTransform=!0,t.nextTransformAppendedIndexes=et(et([],b,!0),[x],!1))}function Hs(t,n,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:n," ").concat(t.afterFunctionTexts.join(" "))}function Ls(t,n,e){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,t=t.targetAllTransform,n=e?K(t,n,4):K(n,t,4),t=K(y(e?o:r,4),n,4);return K(t,y(e?a:i,4),4)}function Vs(t){var n=t.datas,e=t.distX,t=t.distY,r=n.inverseBeforeMatrix,i=n.is3d,o=n.startDragBeforeDist,i=i?4:3;return T(E(r,J(n.absoluteOrigin,[e,t]),i),o)}function Us(t,n){var e=t.datas,r=t.distX,t=t.distY,i=e.inverseBeforeMatrix,o=e.inverseMatrix,a=e.is3d,s=e.startDragBeforeDist,u=e.startDragDist,a=a?4:3;return T(E(n?i:o,J(e.absoluteOrigin,[r,t]),a),n?s:u)}function $s(t){var n=[];return 0<=t[1]&&(0<=t[0]&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(0<=t[0]&&n.push(1),t[0]<=0&&n.push(0)),n}function Zs(n,t){return $s(t).map(function(t){return n[t]})}function q(t,n){t=Zs(t,n);return[Rt(t.map(function(t){return t[0]})),Rt(t.map(function(t){return t[1]}))]}function Ks(t,n,e,r){return K(t,cu(n,r,e),r)}function Js(e){var r=e.originalDatas.beforeRenderable;return{setTransform:function(t,n){void 0===n&&(n=-1),r.startTransforms=at(t)?t:S(t),tu(e,n)},setTransformIndex:function(t){tu(e,t)}}}function Qs(t,n){tu(t,h(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf("".concat(n,"("))}))}function tu(t,n){var e=t.originalDatas.beforeRenderable,t=t.datas;-1!==(t.transformIndex=n)&&(e=e.startTransforms[n])&&(n=Wn([e]),t.startValue=n[0].functionValue)}function nu(t,n){t.originalDatas.beforeRenderable.nextTransforms=S(n)}function eu(t){return t.originalDatas.beforeRenderable.nextTransforms.join(" ")}function ru(t,n,e,r,i){return nu(i,n),{transform:n,drag:j.drag(t,Ta(i,t.state,e,r,!1))}}function iu(t,n,e,r,i){var o=t.state,a=o.left,o=o.top,s=t.props.groupable;u=t.state,c=i,l=u.transformOrigin,f=u.offsetMatrix,u=u.is3d,p=i.beforeTransform,c=i.afterTransform,u=u?4:3;var u,c,l,f,p,i=s?a:0,a=s?o:0,s=T(r,au(t,e,Ks(f,P(K(K(p,kn([n]),4),c,4),4,u),l,u)));return T(s,[i,a])}function ou(t){var t=t.state,n=t.width,e=t.height,t=t.transformOrigin;return[t[0]/(n/2)-1,t[1]/(e/2)-1]}function au(t,n,e){void 0===e&&(e=t.state.allMatrix);var t=t.state,r=t.width,i=t.height,t=t.is3d;return H(e,[r/2*(1+n[0]),i/2*(1+n[1])],t?4:3)}function su(t,n,e,r,i,o){var a=t.props.groupable,t=t.state,s=t.transformOrigin,u=t.targetMatrix,c=t.offsetMatrix,l=t.is3d,f=t.width,p=t.height,d=t.left,t=t.top,l=l?4:3;h=n,g=e,void 0===(v=f)&&(v=h),void 0===(m=p)&&(m=g),void 0===(b=s)&&(b=[0,0]);var h,g,v,m,b,f=a?d:0,p=a?t:0,d=Ks(c,u,(s=o)?s.map(function(t,n){var e=gt(t),r=e.value,e=e.unit,i=n?m:v,o=n?g:h;return"%"===t||isNaN(r)?o*(i?b[n]/i:0):"%"!==e?r:o*r/100}):b,l);return a=i,t=r,c=q(Su(c=d,n,e,l),t),T([a[0]-c[0],a[1]-c[1]],[f,p])}function uu(t,n){return q(Iu(t.state),n)}function X(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i.apply(void 0,et([Ca],t,!1))}function cu(t,n,e){return Mn(n,An(e,n),t,An(e.map(function(t){return-t}),n))}function lu(r){return fu(z(r,":before")).map(function(t,n){var t=gt(t),e=t.value,t=t.unit;return e*(e=r,n=0===n,"%"===t?Eu(e.ownerSVGElement)[n?"width":"height"]/100:1)})}function fu(t){t=t.transformOrigin;return t?t.split(" "):["0","0"]}function pu(t,n){var e=(n=void 0===n?z(t):n).transform;if(e&&"none"!==e)return n.transform;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var i=r.length;if(!i)return"";for(var o=[],a=0;a<i;++a)!function(t){var n=r[t].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(t){return n[t]}).join(", "),")"))}(a);return o.join(" ")}return""}function du(t,n,e){for(var r=document.body,i=!t||e?t:t.parentElement,o=t===n||i===n,a="relative";i&&i!==r;){n===i&&(o=!0);var s=z(i),u=i.tagName.toLowerCase(),c=pu(i,s),a=s.position;if("svg"===u||"static"!==a||c&&"none"!==c)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function hu(t,n){var e,r,i=t.tagName.toLowerCase(),o=t.offsetLeft,a=t.offsetTop,s=$(o),u=!s;return u||"svg"===i?r=(e=fu(n).map(function(t){return parseFloat(t)})).slice():(r=(e=Da?lu(t):fu(n).map(function(t){return parseFloat(t)})).slice(),u=!0,o=(n=function(t,n){if(!t.getBBox||"g"===t.tagName.toLowerCase())return[0,0,0,0];var e=t.getBBox(),t=Eu(t.ownerSVGElement),r=e.x-t.x,e=e.y-t.y;return[r,e,n[0]-r,n[1]-e]}(t,e))[0],a=n[1],e[0]=n[2],e[1]=n[3]),{tagName:i,isSVG:s,hasOffset:u,offset:[o||0,a||0],origin:e,targetOrigin:r}}function gu(t,n,e){void 0===e&&(e=z(t));var t=z(document.body),r=t.position;if(!(n||r&&"static"!==r))return[0,0];n=parseInt(t.marginLeft,10),r=parseInt(t.marginTop,10);return"absolute"===e.position&&("auto"===e.top&&"auto"===e.bottom||(r=0),"auto"===e.left&&"auto"===e.right||(n=0)),[n,r]}function vu(t){t.forEach(function(t){var n=t.matrix;n&&(t.matrix=P(n,3,4))})}function mu(t,n,e){for(var r,i,o,a=t,s=[],u=!e&&t===n||t===document.body,c=u,l=!1,f=3,p=!1,d=du(n,n,!0).offsetParent;a&&!c;){var c=u,h=z(a),g=h.position,v=pu(a,h),v=Rn((v=v)&&"none"!==v?ot(v)?v:kn(v):[1,0,0,1,0,0]),m="fixed"===g,b={hasTransform:!1,fixedContainer:null},x=(m&&(p=!0,d=(b=function(t){for(var n=t.parentElement,e=!1;n;){var r=z(n).transform;if(r&&"none"!==r){e=!0;break}if(n===document.body)break;n=n.parentElement}return{fixedContainer:n||document.body,hasTransform:e}}(a)).fixedContainer),v.length),x=(l||16!==x||(l=!0,f=4,vu(s),o=o&&P(o,3,4)),l&&9===x&&(v=P(v,3,4)),hu(a,h)),E=x.tagName,S=x.hasOffset,y=x.isSVG,M=x.origin,R=x.targetOrigin,x=x.offset,D=x[0],x=x[1],E=("svg"===E&&o?(s.push({type:"target",target:a,matrix:function(t,n){var e=Eu(t),r=e.width,i=e.height,o=e.clientWidth,e=e.clientHeight,a=o/r,s=e/i,t=t.preserveAspectRatio.baseVal,u=t.align,t=t.meetOrSlice,c=[0,0],l=[a,s],f=[0,0];{var p;1!==u&&(p=(u-2)%3,u=Math.floor((u-2)/3),c[0]=r*p/2,c[1]=i*u/2,t=2===t?Math.max(s,a):Math.min(a,s),l[0]=t,l[1]=t,f[0]=(o-r)/2*p,f[1]=(e-i)/2*u)}a=_n(l,n);return a[n*(n-1)]=f[0],a[n*(n-1)+1]=f[1],cu(a,n,c)}(a,f)}),s.push({type:"offset",target:a,matrix:I(f)})):"g"===E&&t!==a&&(x=D=0),void 0),C=!1,w=!1,O=(m?(E=b.fixedContainer,C=!0):(E=(O=du(a,n)).offsetParent,C=O.isEnd,w=O.isStatic),Ra&&S&&!y&&w&&("relative"===g||"static"===g)&&(D-=E.offsetLeft,x-=E.offsetTop,u=u||C),0),y=0,w=0,g=0;if(m?S&&b.hasTransform&&(w=E.clientLeft,g=E.clientTop):(S&&d!==E&&(O=E.clientLeft,y=E.clientTop),S&&E===document.body&&(D+=(b=gu(a,!1,h))[0],x+=b[1])),s.push({type:"target",target:a,matrix:cu(v,f,M)}),S?s.push({type:"offset",target:a,matrix:An([D-a.scrollLeft+O-w,x-a.scrollTop+y-g],f)}):s.push({type:"offset",target:a,origin:M}),o=o||v,r=r||M,i=i||R,c||m)break;a=E,u=C,e&&a!==document.body||(c=u)}return{offsetContainer:d,matrixes:s,targetMatrix:o=o||I(f),transformOrigin:r=r||[0,0],targetOrigin:i=i||[0,0],is3d:l,hasFixed:p}}function bu(t,n,e,r){void 0===e&&(e=n);var i,o=0,a=0,s=0,u={},e=(t&&(o=(i=Pu(t)).offsetWidth,a=i.offsetHeight),t&&(t=Ru((i=function(t,n,e,r){void 0===e&&(e=n);var n=mu(t,n),i=n.matrixes,o=n.is3d,a=n.targetMatrix,s=n.transformOrigin,u=n.targetOrigin,c=n.offsetContainer,n=n.hasFixed,c=mu(c,e,!0),l=c.matrixes,c=c.is3d,r=r||c||o,f=r?4:3,t="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,p=I(f),d=I(f),h=I(f),g=I(f),v=i.length;l.reverse(),i.reverse(),!o&&r&&(a=P(a,3,4),vu(i));!c&&r&&vu(l);l.forEach(function(t){d=K(d,t.matrix,f)});var c=e||document.body,m=(null==(e=l[0])?void 0:e.target)||du(c,c,!0).offsetParent,b=l.slice(1).reduce(function(t,n){return K(t,n.matrix,f)},I(f)),e=(i.forEach(function(t,n){v-2===n&&(h=p.slice()),v-1===n&&(g=p.slice()),t.matrix||(n=function(t,n,e,r,i){var o=t.target,t=t.origin,a=n.matrix,n=Pu(o),s=n.offsetWidth,u=n.offsetHeight,n=e.getBoundingClientRect(),c=[0,0];e===document.body&&(c=gu(o,!0));var o=o.getBoundingClientRect(),l=o.left-n.left+e.scrollLeft-(e.clientLeft||0)+c[0],f=o.top-n.top+e.scrollTop-(e.clientTop||0)+c[1],n=o.width,e=o.height,c=Mn(r,i,a),o=Mu(c,s,u,r),p=o.left,d=o.top,h=o.width,o=o.height,g=H(c,t,r),c=T(g,[p,d]),v=[l+c[0]*n/h,f+c[1]*e/o],m=[0,0],b=0;for(;++b<10;){var x=y(i,r);x=T(H(x,v,r),H(x,g,r)),m[0]=x[0],m[1]=x[1];var x=Mu(Mn(r,i,An(m,r),a),s,u,r),E=x.left,x=x.top,E=E-l,x=x-f;if(Math.abs(E)<2&&Math.abs(x)<2)break;v[0]-=E,v[1]-=x}return m.map(function(t){return Math.round(t)})}(t,i[n+1],m,f,K(b,p,f)),t.matrix=An(n,f)),p=K(p,t.matrix,f)}),!t&&o);a=a||I(e?4:3);c=xu(t&&16===a.length?P(a,4,3):a,e);return d=xn(d,f,f),{hasFixed:n,rootMatrix:d,beforeMatrix:h,offsetMatrix:g,allMatrix:p,targetMatrix:a,targetTransform:c,transformOrigin:s,targetOrigin:u,is3d:r}}(t,n,e,r)).allMatrix,i.transformOrigin,o,a),u=O(O({},i),t),s=Bu([(n=Ru(i.allMatrix,[50,50],100,100)).pos1,n.pos2],n.direction)),r?4:3);return O({width:o,height:a,rotation:s,rootMatrix:I(e),beforeMatrix:I(e),offsetMatrix:I(e),allMatrix:I(e),targetMatrix:I(e),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1},u)}function xu(t,n){return void 0===n&&(n=9<t.length),"".concat(n?"matrix3d":"matrix","(").concat(Dn(t,!n).join(","),")")}function Eu(t){var n=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:n,clientHeight:e};t=t.viewBox,t=t&&t.baseVal||{x:0,y:0,width:0,height:0};return{x:t.x,y:t.y,width:t.width||n,height:t.height||e,clientWidth:n,clientHeight:e}}function H(t,n,e){return E(t,yn(n,e),e)}function Su(n,t,e,r){return[[0,0],[t,0],[0,e],[t,e]].map(function(t){return H(n,t,r)})}function yu(t){var n=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]}),e=Math.min.apply(Math,n),r=Math.min.apply(Math,t),n=Math.max.apply(Math,n),t=Math.max.apply(Math,t);return{left:e,top:r,right:n,bottom:t,width:n-e,height:t-r}}function Mu(t,n,e,r){return yu(Su(t,n,e,r))}function Ru(t,n,e,r){var i=16===t.length?4:3,e=Su(t,e,r,i),r=e[0],o=r[0],r=r[1],a=e[1],s=a[0],a=a[1],u=e[2],c=u[0],u=u[1],l=e[3],f=l[0],l=l[1],t=H(t,n,i),n=t[0],i=t[1],t=Math.min(o,s,c,f),p=Math.min(r,a,u,l);return{left:t,top:p,right:Math.max(o,s,c,f),bottom:Math.max(r,a,u,l),origin:[n-t||0,i-p||0],pos1:[o-t||0,r-p||0],pos2:[s-t||0,a-p||0],pos3:[c-t||0,u-p||0],pos4:[f-t||0,l-p||0],direction:Dt(e)}}function Du(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Cu(t,n){return Du([n[0]-t[0],n[1]-t[1]])}function wu(t,n,e,r){void 0===e&&(e=1),void 0===r&&(r=F(t,n));n=Cu(t,n);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(e,")"),width:"".concat(n,"px")}}function Ou(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=e.length,o=e.reduce(function(t,n){return t+n[0]},0)/i,i=e.reduce(function(t,n){return t+n[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(i,"px) rotate(").concat(t,"rad) scale(").concat(n,")")}}function Pu(t,n){var e,r,i,o,a,s,u,c,l,f,p,d;return void 0===n&&(n=z(t)),!$(t.offsetWidth)||"svg"===t.tagName.toLowerCase()?(e="border-box"===n.boxSizing,u=parseFloat(n.borderLeftWidth)||0,l=parseFloat(n.borderRightWidth)||0,r=parseFloat(n.borderTopWidth)||0,i=parseFloat(n.borderBottomWidth)||0,s=parseFloat(n.paddingLeft)||0,c=parseFloat(n.paddingRight)||0,f=parseFloat(n.paddingTop)||0,o=parseFloat(n.paddingBottom)||0,p=a=parseFloat(n.width),d=n=parseFloat(n.height),c=(s=s+c)+(u+l),l=(u=f+o)+(r+i),e?(a=p-c,n=d-l):(p=a+c,d=n+l),{svg:!1,offsetWidth:p,offsetHeight:d,clientWidth:a+s,clientHeight:n+u,cssWidth:a,cssHeight:n}):{svg:!0,offsetWidth:p=(f=t.getBBox()).width,offsetHeight:d=f.height,clientWidth:p,clientHeight:d,cssWidth:p,cssHeight:d}}function Bu(t,n){return F(0<n?t[0]:t[1],0<n?t[1]:t[0])}function zu(t,n,e,r,i){var o=1,a=[0,0],s=Gu(),u=Gu(),c=Gu(),e=bu(n,e,i,!1);return n&&(i=e.is3d?4:3,o=(i=Ru(e.offsetMatrix,J(e.transformOrigin,En(e.targetMatrix,i)),e.width,e.height)).direction,a=J(i.origin,[i.left-e.left,i.top-e.top]),s=Tu(n),u=Tu(du(r,r,!0).offsetParent||document.body,!0),t&&(c=Tu(t))),O({targetClientRect:s,containerClientRect:u,moveableClientRect:c,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:n},e)}function Gu(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Tu(t,n){var e=0,r=0,i=0,o=0,a=(t===document.body||t===document.documentElement?(i=window.innerWidth,o=window.innerHeight,e=(a=[-(a=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop])[0],-a[1]])[0],r=a[1]):(e=(a=t.getBoundingClientRect()).left,r=a.top,i=a.width,o=a.height),{left:e,right:e+i,top:r,bottom:r+o,width:i,height:o});return n&&(a.clientLeft=t.clientLeft,a.clientTop=t.clientTop,a.clientWidth=t.clientWidth,a.clientHeight=t.clientHeight,a.scrollWidth=t.scrollWidth,a.scrollHeight=t.scrollHeight,a.overflow="visible"!==z(t).overflow),a}function _u(t){if(t){var n,t=t.getAttribute("data-direction");if(t)return n=[0,0],-1<t.indexOf("w")&&(n[0]=-1),-1<t.indexOf("e")&&(n[0]=1),-1<t.indexOf("n")&&(n[1]=-1),-1<t.indexOf("s")&&(n[1]=1),n}}function Au(t,n){return[J(n,t[0]),J(n,t[1]),J(n,t[2]),J(n,t[3])]}function Iu(t){var n=t.left,e=t.top;return Au([t.pos1,t.pos2,t.pos3,t.pos4],[n,e])}function ku(t,n){var e;null!=(e=t[n])&&e.unset(),t[n]=null}function rt(t,n,e,r){var i=n.datas,e=(i.datas||(i.datas={}),O(O({},e),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,moveable:t,datas:i.datas}));return i.isStartEvent?r||(i.lastEvent=e):i.isStartEvent=!0,e}function Fu(t,n,e){var r=n.datas,i=("isDrag"in e?e:n).isDrag;return r.datas||(r.datas={}),O(O({isDrag:i},e),{moveable:t,target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:n.isDouble,datas:r.datas})}function Nu(t,n,e){t._emitter.on(n,e)}function it(t,n,e,r){return t.triggerEvent(n,e,r)}function z(t,n){return window.getComputedStyle(t,n)}function Wu(t,e,r){var i={},o={};return t.filter(function(n){var t=n.name;if(i[t]||!e.some(function(t){return n[t]}))return!1;if(!r&&n.ableGroup){if(o[n.ableGroup])return!1;o[n.ableGroup]=!0}return i[t]=!0})}function Yu(t,n){return t===n||null==t&&null==n}function ju(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(n)-Math.abs(t)}),t[0]}function qu(t,n,e){return E(y(t,e),yn(n,e),e)}function Xu(t,n){var e=t.is3d,t=qu(t.rootMatrix,[n.distX,n.distY],e?4:3);return n.distX=t[0],n.distY=t[1],n}function Hu(t,n,e,r,i){return T(H(t,J(e,n),i),r)}function Lu(t,n,e){return e?"".concat(t/n*100,"%"):"".concat(t,"px")}function Vu(t){return Math.abs(t)<=Pa?0:t}function Uu(t,n){return n.isRequest?("resizable"===n.requestAble||"scalable"===n.requestAble)&&n.parentDirection:a(n.inputEvent.target,X("direction"))}function $u(t,n){return t?st(t)?n?document.querySelector(t):t:ct(t)?t():"current"in t?t.current:t:null}function Zu(t,n){var e=t.rootMatrix,t=t.is3d,e=y(e,t?4:3);return(e=t?e:P(e,3,4))[12]=0,e[13]=0,e[14]=0,Fn(e,n)}function Ku(t,n,e,r,i){var o,a,s=t[0],t=t[1],u=0,c=0;return i&&s&&t?(i=F([0,0],n),o=F([0,0],r),a=Du(n),i=Math.cos(i-o)*a,r[0]?c=r[1]?(o=2*r[0]*s,a=2*r[1]*t,s=Du([o+n[0],a+n[1]])-Du([o,a]),t=F([0,0],[e,1]),u=Math.cos(t)*s,Math.sin(t)*s):(u=i)/e:u=(c=i)*e):(u=r[0]*n[0],c=r[1]*n[1]),[u,c]}function Ju(e,t,n,r){var i,o=n.ratio,a=n.startOffsetWidth,s=n.startOffsetHeight,u=0,c=0,l=r.distX,f=r.distY,p=r.parentDistance,d=r.parentDist,h=r.parentScale,r=r.isPinch,g=n.fixedDirection;return d?(u=d[0],c=d[1],t&&(u?c=c||u/o:u=c*o)):h?(u=(h[0]-1)*a,c=(h[1]-1)*s):r?p&&(c=(u=p)*s/a):(i=Us({datas:n,distX:l,distY:f}),u=(d=Ku([a,s],i=[0,1].map(function(t){var n=Math.abs(e[t]-g[t]);return i[t]*(n=0!==n?2/n:n)}),o,e,t))[0],c=d[1]),{distWidth:u,distHeight:c}}Do=Ma("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(e,r){var t=r.datas,n=r.targets,i=r.angle,o=r.originalDatas,a=e.props,s=a.pinchable,a=a.ables;if(!s)return!1;var u="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),a=(!0===s?e.controlAbles:a.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),l=rt(e,r,{}),n=(n&&(l.targets=n),it(e,u,l)),u=(t.isPinch=!1!==n,t.ables=a,t.isPinch);return!!u&&(a.forEach(function(t){var n;o[t.name]=o[t.name]||{},t[c]&&(n=O(O({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](e,n))}),e.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},u)},pinch:function(n,e){var r,i,t=e.datas,o=e.scale,a=e.distance,s=e.originalDatas,u=e.inputEvent,c=e.targets,l=e.angle;if(t.isPinch)return r=a*(1-1/o),a=rt(n,e,{}),c&&(a.targets=c),o="onPinch".concat(c?"Group":""),it(n,o,a),o=t.ables,i="drag".concat(c?"Group":"","Control"),o.forEach(function(t){t[i]&&t[i](n,O(O({},e),{datas:s[t.name],inputEvent:u,parentDistance:r,parentRotate:l,isPinch:!0}))}),a},pinchEnd:function(n,e){var t,r,i,o=e.datas,a=e.isPinch,s=e.inputEvent,u=e.targets,c=e.originalDatas;if(o.isPinch)return r="onPinch".concat(u?"Group":"","End"),t=Fu(n,e,{isDrag:a}),u&&(t.targets=u),it(n,r,t),r=o.ables,i="drag".concat(u?"Group":"","ControlEnd"),r.forEach(function(t){t[i]&&t[i](n,O(O({},e),{isDrag:a,datas:c[t.name],inputEvent:s,isPinch:!0}))}),a},pinchGroupStart:function(t,n){return this.pinchStart(t,O(O({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,O(O({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,O(O({},n),{targets:t.props.targets}))}}),wo={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,e=e.edge;if(r)return(e?Ya:Wa)(t,n)},dragControlCondition:Uu,dragControlStart:function(t,n){var e=n.inputEvent,r=n.isPinch,i=n.parentDirection,o=n.datas,a=n.parentFlag,i=i||(r?[0,0]:_u(e.target)),e=t.state,s=e.target,u=e.width,e=e.height;if(!i||!s)return!1;r||qs(t,n),o.datas={},o.direction=i,o.startOffsetWidth=u,o.startOffsetHeight=e,o.prevWidth=0,o.prevHeight=0,r=z(r=s),r=[parseFloat(r.width),parseFloat(r.height)],o.startWidth=r[0],o.startHeight=r[1];var c,l,f,p,d,r=[Math.max(0,u-o.startWidth),Math.max(0,e-o.startHeight)],s=(o.minSize=r,o.maxSize=[1/0,1/0],a||(v=(a=z(s)).position,c=a.minWidth,l=a.minHeight,f=a.maxWidth,a=a.maxHeight,p=u,d=e,(s=(v="static"===v||"relative"===v)?s.parentElement:s.offsetParent)&&(p=s.clientWidth,d=s.clientHeight,v&&(v=z(s),p-=parseFloat(v.paddingLeft)||0,d-=parseFloat(v.paddingTop)||0)),o.minSize=J([Z(c,p)||0,Z(l,d)||0],r),o.maxSize=J([Z(f,p)||1/0,Z(a,d)||1/0],r)),t.props.transformOrigin||"% %");function h(t){o.ratio=t&&isFinite(t)?t:0}function g(t){o.fixedDirection=t,o.fixedPosition=q(o.startPositions,t)}o.transformOrigin=s&&st(s)?s.split(" "):s,o.isWidth=!i[0]&&!i[1]||i[0]||!i[1],o.startPositions=Iu(t.state),h(u/e),g([-i[0],-i[1]]);var v=rt(t,n,{direction:i,set:function(t){var n=t[0],t=t[1];o.startWidth=n,o.startHeight=t},setMin:function(t){o.minSize=[Z("".concat(t[0]),0)||0,Z("".concat(t[1]),0)||0]},setMax:function(t){t=[t[0]||1/0,t[1]||1/0];ut(t[0])&&!isFinite(t[0])||(t[0]=Z("".concat(t[0]),0)||1/0),ut(t[1])&&!isFinite(t[1])||(t[1]=Z("".concat(t[1]),0)||1/0),o.maxSize=t},setRatio:h,setFixedDirection:o.setFixedDirection=g,setOrigin:function(t){o.transformOrigin=t},dragStart:j.dragStart(t,(new _a).dragStart([0,0],n))});return!1!==it(t,"onResizeStart",v)&&(o.isResize=!0,t.state.snapRenderInfo={request:n.isRequest,direction:i}),!!o.isResize&&v},dragControl:function(t,e){var r=e.datas,n=e.parentFlag,i=e.isPinch,o=e.parentKeepRatio,a=e.dragClient,s=e.parentDist,u=e.isRequest,c=r.isResize,l=r.transformOrigin,f=r.startWidth,p=r.startHeight,d=r.prevWidth,h=r.prevHeight,g=r.minSize,v=r.maxSize,m=r.ratio,b=r.isWidth,x=r.startOffsetWidth,E=r.startOffsetHeight;if(c){var c=t.props,S=c.resizeFormat,y=c.throttleResize,M=void 0===y?1:y,y=c.parentMoveable,R=r.direction,D=R,C=0,w=0,O=(R[0]||R[1]||(D=[1,1]),m&&(null!=o?o:c.keepRatio)||!1),o=z(),P=o[0],B=o[1],c=(r.setFixedDirection(r.fixedDirection),it(t,"onBeforeResize",rt(t,e,{setFixedDirection:function(t){return r.setFixedDirection(t),t=z(),P=t[0],B=t[1],[P,B]},boundingWidth:P,boundingHeight:B,setSize:function(t){P=t[0],B=t[1]}},!0)),a),o=(a||(c=!n&&i?uu(t,[0,0]):r.fixedPosition),[0,0]),u=(i||(o=function(t,e,r,n,i,o,a){if(!Ka(t,"resizable"))return[0,0];var s=a.fixedDirection,u=t.state,c=u.allMatrix,l=u.is3d;return Fs(t,function(t,n){return Is(c,e+t,r+n,s,i,l)},e,r,n,i,o,a)}(t,P,B,R,c,u,r)),s&&(s[0]||(o[0]=0),s[1]||(o[1]=0)),O?(D[0]&&D[1]&&o[0]&&o[1]&&(Math.abs(o[0])>Math.abs(o[1])?o[1]=0:o[0]=0),(a=!o[0]&&!o[1])&&G(),D[0]&&!D[1]||o[0]&&!o[1]||a&&b?(P+=o[0],B=P/m):(!D[0]&&D[1]||!o[0]&&o[1]||a&&!b)&&(B+=o[1],P=B*m)):(P+=o[0],B+=o[1],P=Math.max(0,P),B=Math.max(0,B)),n=Mt([P,B],g,v,m),P=n[0],B=n[1],G(),[(C=P-x)-d,(w=B-E)-h]),s=(r.prevWidth=C,r.prevHeight=w,su(t,P,B,r.fixedDirection,c,l));if(y||!u.every(function(t){return!t})||!s.every(function(t){return!t}))return it(t,"onResize",a=rt(t,e,{width:f+C,height:p+w,offsetWidth:Math.round(P),offsetHeight:Math.round(B),boundingWidth:P,boundingHeight:B,direction:R,dist:[C,w],delta:u,isPinch:!!i,drag:j.drag(t,Ta(e,t.state,s,!!i,!1))})),a}function z(){var t=Ju(D,O,r,e),t=(C=t.distWidth,w=t.distHeight,D[0]||O?Math.max(x+C,Pa):x),n=D[1]||O?Math.max(E+w,Pa):E;return O&&x&&E&&(b?n=t/m:t=n*m),[t,n]}function G(){var t;S&&(t=S([P,B]),P=t[0],B=t[1]),P=N(P,M),B=N(B,M)}},dragControlAfter:function(t,n){var e=n.datas,r=e.isResize,i=e.startOffsetWidth,o=e.startOffsetHeight,a=e.prevWidth,s=e.prevHeight;if(r)return r=t.state,i=r.width-(i+a),a=r.height-(o+s),r=3<Math.abs(i),o=3<Math.abs(a),r&&(e.startWidth+=i,e.startOffsetWidth+=i,e.prevWidth+=i),o&&(e.startHeight+=a,e.startOffsetHeight+=a,e.prevHeight+=a),r||o?this.dragControl(t,n):void 0},dragControlEnd:function(t,n){var e=n.datas;if(e.isResize)return e.isResize=!1,e=Fu(t,n,{}),it(t,"onResizeEnd",e),e},dragGroupControlCondition:Uu,dragGroupControlStart:function(i,t){var o=t.datas,n=this.dragControlStart(i,t);if(!n)return!1;var r=Aa(i,"resizable",t);function a(t,n){var e=o.fixedDirection,r=o.fixedPosition,t=q(n.datas.startPositions||Iu(t.state),e),e=E(Tn(-i.rotation/180*Math.PI,3),[t[0]-r[0],t[1]-r[1],1],3),t=e[0],r=e[1];return n.datas.originalX=t,n.datas.originalY=r,n}function e(e){n.setFixedDirection(e),s.forEach(function(t,n){t.setFixedDirection(e),a(t.moveable,r[n])})}var s=ka(i,this,"dragControlStart",t,a),t=(o.setFixedDirection=e,O(O({},n),{targets:i.props.targets,events:s,setFixedDirection:e})),t=it(i,"onResizeGroupStart",t);return o.isResize=!1!==t,!!o.isResize&&n},dragGroupControl:function(i,n){var t=n.datas;if(t.isResize){Nu(i,"onBeforeResize",function(t){it(i,"onBeforeResizeGroup",rt(i,n,O(O({},t),{targets:i.props.targets}),!0))});var e,o,a,s,r,u,c=this.dragControl(i,n);if(c)return r=c.boundingWidth,u=c.boundingHeight,e=c.dist,o=i.props.keepRatio,a=[r/(r-e[0]),u/(u-e[1])],s=t.fixedPosition,r=ka(i,this,"dragControl",n,function(t,n){var e=E(Tn(i.rotation/180*Math.PI,3),[n.datas.originalX*a[0],n.datas.originalY*a[1],1],3),r=e[0],e=e[1];return O(O({},n),{parentDist:null,parentScale:a,dragClient:J(s,[r,e]),parentKeepRatio:o})}),u=O({targets:i.props.targets,events:r},c),it(i,"onResizeGroup",u),u}},dragGroupControlEnd:function(t,n){var e,r=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),e=ka(t,this,"dragControlEnd",n),it(t,"onResizeGroupEnd",Fu(t,n,{targets:t.props.targets,events:e})),r},request:function(t){var n={},e=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?e=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(e+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:n,parentDist:[e,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},Mo={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,e=e.edge;if(!r&&i)return(e?Ya:Wa)(t,n)},dragControlCondition:Uu,dragControlStart:function(t,n){var e=n.datas,r=n.isPinch,i=n.inputEvent,i=n.parentDirection||(r?[0,0]:_u(i.target)),o=t.state,a=o.width,s=o.height,u=o.targetTransform,c=o.target,l=o.pos1,f=o.pos2,o=o.pos4;if(!i||!c)return!1;r||qs(t,n),e.datas={},e.transform=u,e.prevDist=[1,1],e.direction=i,e.startOffsetWidth=a,e.startOffsetHeight=s,e.startValue=[1,1];c=g(l,f),r=g(f,o),u=!i[0]&&!i[1]||i[0]||!i[1];function p(t){e.ratio=t&&isFinite(t)?t:0}function d(t){e.fixedDirection=t,e.fixedPosition=q(e.startPositions,t)}e.scaleWidth=c,e.scaleHeight=r,e.scaleXRatio=c/a,e.scaleYRatio=r/s,Qs(n,"scale"),e.isWidth=u,e.startPositions=Iu(t.state),e.setFixedDirection=d,p(g(l,f)/g(f,o)),d([-i[0],-i[1]]);c=rt(t,n,O(O({direction:i,set:function(t){e.startValue=t},setRatio:p,setFixedDirection:d},Js(n)),{dragStart:j.dragStart(t,(new _a).dragStart([0,0],n))}));return!1!==it(t,"onScaleStart",c)&&(e.isScale=!0,t.state.snapRenderInfo={request:n.isRequest,direction:i}),!!e.isScale&&c},dragControl:function(t,e){Xs(e,"scale");var r=e.datas,n=e.parentKeepRatio,i=e.parentFlag,o=e.isPinch,a=e.dragClient,s=e.isRequest,u=r.prevDist,c=r.direction,l=r.startOffsetWidth,f=r.startOffsetHeight,p=r.isScale,d=r.startValue,h=r.isWidth,g=r.ratio;if(!p)return!1;var p=t.props,v=p.throttleScale,m=p.parentMoveable,b=c,x=(c[0]||c[1]||(b=[1,1]),g&&(null!=n?n:p.keepRatio)||!1),n=t.state;function E(){var t=Ju(b,x,r,e),n=t.distWidth,t=t.distHeight,n=(l+n)/l,t=(f+t)/f,n=b[0]||x?n*d[0]:d[0],t=b[1]||x?t*d[1]:d[1];return[n=0===n?1e-9*(0<u[0]?1:-1):n,t=0===t?1e-9*(0<u[1]?1:-1):t]}var S=E(),p=(o||!t.props.groupable||at(p=(n.snapRenderInfo||{}).direction)&&(p[0]||p[1])&&(n.snapRenderInfo={direction:c,request:e.isRequest}),it(t,"onBeforeScale",rt(t,e,{scale:S,setFixedDirection:function(t){return r.setFixedDirection(t),S=E()},setScale:function(t){S=t}},!0)),[S[0]/d[0],S[1]/d[1]]),n=a,y=[0,0],i=(a||(n=!i&&o?uu(t,[0,0]):r.fixedPosition),o||(y=Ns(t,p,c,s,r)),x?(b[0]&&b[1]&&y[0]&&y[1]&&(Math.abs(y[0]*l)>Math.abs(y[1]*f)?y[1]=0:y[0]=0),(a=!y[0]&&!y[1])&&(h?p[0]=N(p[0]*d[0],v)/d[0]:p[1]=N(p[1]*d[1],v)/d[1]),b[0]&&!b[1]||y[0]&&!y[1]||a&&h?(p[0]+=y[0],i=l*p[0]*d[0]/g,p[1]=i/f/d[1]):(!b[0]&&b[1]||!y[0]&&y[1]||a&&!h)&&(p[1]+=y[1],s=f*p[1]*d[1]*g,p[0]=s/l/d[0])):(p[0]+=y[0],p[1]+=y[1],y[0]||(p[0]=N(p[0]*d[0],v)/d[0]),y[1]||(p[1]=N(p[1]*d[1],v)/d[1])),0===p[0]&&(p[0]=1e-9*(0<u[0]?1:-1)),0===p[1]&&(p[1]=1e-9*(0<u[1]?1:-1)),[p[0]/u[0],p[1]/u[1]]),s=(S=[p[0]*d[0],p[1]*d[1]],a=r.fixedDirection,h=n,g=r,iu(t,"scale(".concat(p.join(", "),")"),a,h,g)),y=T(s,r.prevInverseDist||[0,0]);if(r.prevDist=p,r.prevInverseDist=s,S[0]===u[0]&&S[1]===u[1]&&y.every(function(t){return!t})&&!m)return!1;v=Hs(r,"scale(".concat(S.join(", "),")"),"scale(".concat(p.join(", "),")")),n=rt(t,e,O({offsetWidth:l,offsetHeight:f,direction:c,scale:S,dist:p,delta:i,isPinch:!!o},ru(t,v,y,o,e)));return it(t,"onScale",n),n},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isScale&&(e.isScale=!1,it(t,"onScaleEnd",Fu(t,n,{})),r)},dragGroupControlCondition:Uu,dragGroupControlStart:function(i,t){var o=t.datas,n=this.dragControlStart(i,t);if(!n)return!1;var r=Aa(i,"resizable",t);function a(t,n){var e=o.fixedDirection,r=o.fixedPosition,t=q(n.datas.startPositions||Iu(t.state),e),e=E(Tn(-i.rotation/180*Math.PI,3),[t[0]-r[0],t[1]-r[1],1],3),t=e[0],r=e[1];return n.datas.originalX=t,n.datas.originalY=r,n}o.moveableScale=i.scale;function e(e){n.setFixedDirection(e),s.forEach(function(t,n){t.setFixedDirection(e),a(t.moveable,r[n])})}var s=ka(i,this,"dragControlStart",t,a),t=(o.setFixedDirection=e,O(O({},n),{targets:i.props.targets,events:s,setFixedDirection:e})),u=it(i,"onScaleGroupStart",t);return o.isScale=!1!==u,!!o.isScale&&t},dragGroupControl:function(i,n){var t=n.datas;if(t.isScale){Nu(i,"onBeforeScale",function(t){it(i,"onBeforeScaleGroup",rt(i,n,O(O({},t),{targets:i.props.targets}),!0))});var o,a,s,u,e,r=this.dragControl(i,n);if(r)return e=t.moveableScale,i.scale=[r.scale[0]*e[0],r.scale[1]*e[1]],o=i.props.keepRatio,a=r.dist,s=r.scale,u=t.fixedPosition,e=ka(i,this,"dragControl",n,function(t,n){var e=E(Tn(i.rotation/180*Math.PI,3),[n.datas.originalX*a[0],n.datas.originalY*a[1],1],3),r=e[0],e=e[1];return O(O({},n),{parentDist:null,parentScale:s,parentKeepRatio:o,dragClient:J(u,[r,e])})}),t=O({targets:i.props.targets,events:e},r),it(i,"onScaleGroup",t),t}},dragGroupControlEnd:function(t,n){var e,r=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),e=ka(t,this,"dragControlEnd",n),it(t,"onScaleGroupEnd",Fu(t,n,{targets:t.props.targets,events:e})),r},request:function(){var n={},e=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return e+=t.deltaWidth,r+=t.deltaHeight,{datas:n,parentDist:[e,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Qu(t,e){return t.map(function(t,n){return U(t,e[n],1,2)})}function tc(t,n,e){n=F(t,n),t=F(t,e)-n;return 0<=t?t:t+2*Math.PI}var Vo={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.warpable,e=e.zoom;if(r||i||!o)return[];var r=t.state,i=r.pos1,o=r.pos2,a=r.pos3,r=r.pos4,s=Qu(i,o),u=Qu(o,i),c=Qu(i,a),i=Qu(a,i),l=Qu(a,r),a=Qu(r,a),f=Qu(o,r),r=Qu(r,o);return et([n.createElement("div",{className:X("line"),key:"middeLine1",style:wu(s,l,e)}),n.createElement("div",{className:X("line"),key:"middeLine2",style:wu(u,a,e)}),n.createElement("div",{className:X("line"),key:"middeLine3",style:wu(c,f,e)}),n.createElement("div",{className:X("line"),key:"middeLine4",style:wu(i,r,e)})],Wa(t,n),!0)},dragControlCondition:function(t,n){return!n.isRequest&&a(n.inputEvent.target,X("direction"))},dragControlStart:function(t,n){var e=n.datas,r=n.inputEvent,i=t.props.target,r=_u(r.target);if(!r||!i)return!1;var i=t.state,o=i.transformOrigin,a=i.is3d,s=i.targetTransform,u=i.targetMatrix,c=i.width,l=i.height,f=i.left,p=i.top;return e.datas={},e.targetTransform=s,e.warpTargetMatrix=a?u:P(u,3,4),e.targetInverseMatrix=xn(y(e.warpTargetMatrix,4),3,4),e.direction=r,e.left=f,e.top=p,e.poses=[[0,0],[c,0],[0,l],[c,l]].map(function(t){return T(t,o)}),e.nextPoses=e.poses.map(function(t){var n=t[0],t=t[1];return E(e.warpTargetMatrix,[n,t,0,1],4)}),e.startValue=I(4),e.prevMatrix=I(4),e.absolutePoses=Iu(i),e.posIndexes=$s(r),qs(t,n),Qs(n,"matrix3d"),!(i.snapRenderInfo={request:n.isRequest,direction:r})!==it(t,"onWarpStart",rt(t,n,O({set:function(t){e.startValue=t}},Js(n))))&&(e.isWarp=!0),e.isWarp},dragControl:function(t,n){var e=n.datas,r=n.isRequest,i=n.distX,o=n.distY,a=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,c=e.startValue,l=e.poses,f=e.posIndexes,p=e.absolutePoses;if(!u)return!1;Xs(n,"matrix3d"),Ka(t,"warpable")&&(1<(u=f.map(function(t){return p[t]})).length&&u.push([(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]),u=(r=zs(t,r,{horizontal:u.map(function(t){return t[1]+o}),vertical:u.map(function(t){return t[0]+i})})).horizontal,r=r.vertical,o-=u.offset,i-=r.offset);var d=Us({datas:e,distX:i,distY:o},!0),h=e.nextPoses.slice();if(f.forEach(function(t){h[t]=J(h[t],d)}),!wa.every(function(t){return n=t.map(function(t){return l[t]}),t=t.map(function(t){return h[t]}),n=tc(n[0],n[1],n[2]),t=tc(t[0],t[1],t[2]),!((e=Math.PI)<=n&&t<=e||n<=e&&e<=t);var n,e}))return!1;u=In(l[0],l[2],l[1],l[3],h[0],h[2],h[1],h[3]);if(!u.length)return!1;r=Ls(e,K(a,u,4),!0),f=K(y(s,4),r,4),a=K(c,e.prevMatrix=r,4),u=Hs(e,"matrix3d(".concat(a.join(", "),")"),"matrix3d(".concat(r.join(", "),")"));return nu(n,u),it(t,"onWarp",rt(t,n,{delta:f,matrix:a,dist:r,multiply:K,transform:u})),!0},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isWarp&&(e.isWarp=!1,it(t,"onWarpEnd",Fu(t,n,{})),r)}},nc=X("area-pieces"),ec=X("area-piece"),rc=X("avoid");function ic(t){var n,e=t.areaElement;e&&(n=(t=t.state).width,t=t.height,Ot(e,rc),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(t,"px"))}function oc(t){return t.createElement("div",{key:"area_pieces",className:nc},t.createElement("div",{className:ec}),t.createElement("div",{className:ec}),t.createElement("div",{className:ec}),t.createElement("div",{className:ec}))}Lo={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var e=t.props,r=e.target,i=e.dragArea,o=e.groupable,e=e.passDragArea,a=t.state,s=a.width,u=a.height,a=a.renderPoses,e=e?X("area","pass"):X("area");if(o)return[n.createElement("div",{key:"area",ref:x(t,"areaElement"),className:e}),oc(n)];if(!r||!i)return[];o=In([0,0],[s,0],[0,u],[s,u],a[0],a[1],a[2],a[3]),r=o.length?xu(o,!0):"none";return[n.createElement("div",{key:"area",ref:x(t,"areaElement"),className:e,style:{top:"0px",left:"0px",width:"".concat(s,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:r}}),oc(n)]},dragStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;e.isDragArea=!1;var n=t.areaElement,e=t.state,t=e.moveableClientRect,o=e.renderPoses,a=e.rootMatrix,s=e.is3d,u=t.left,t=t.top,o=yu(o),c=o.left,l=o.top,f=o.width,o=o.height,a=qu(a,[r-u,i-t],s?4:3),r=a[0],u=a[1],i=[{left:c,top:l,width:f,height:(u-=l)-10},{left:c,top:l,width:(r-=c)-10,height:o},{left:c,top:l+u+10,width:f,height:o-u-10},{left:c+r+10,top:l,width:f-r-10,height:o}],p=[].slice.call(n.nextElementSibling.children);i.forEach(function(t,n){p[n].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")}),wt(n,rc),e.disableNativeEvent=!0},drag:function(t,n){var e=n.datas,n=n.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,ic(t))},dragEnd:function(t,n){this.enableNativeEvent(t);var e=n.inputEvent,n=n.datas;if(!e)return!1;n.isDragArea||ic(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){ic(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var n=t.state;n.disableNativeEvent&&xt(function(){n.disableNativeEvent=!1})}},Zo=Ma("origin",{render:function(t,n){var e=t.props.zoom,t=t.state,r=t.beforeOrigin,t=t.rotation;return[n.createElement("div",{className:X("control","origin"),style:Ou(t,e,r),key:"beforeOrigin"})]}});function ac(t){t=t.scrollContainer;return[t.scrollLeft,t.scrollTop]}var oa={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(e,r){var t=e.props.scrollContainer,t=void 0===t?e.getContainer():t,n=new ae,t=$u(t,!0),i=(r.datas.dragScroll=n,r.isControl?"controlGesto":"targetGesto"),o=r.targets;n.on("scroll",function(t){var n=t.container,t=t.direction,n=rt(e,r,{scrollContainer:n,direction:t}),t=o?"onScrollGroup":"onScroll";o&&(n.targets=o),it(e,t,n)}).on("move",function(t){var n=t.offsetX,t=t.offsetY;e[i].scrollBy(n,t,r.inputEvent,!1)}),n.dragStart(r,{container:t})},checkScroll:function(t,n){var e,r,i,o=n.datas.dragScroll;if(o)return r=t.props,e=r.scrollContainer,t=void 0===e?t.getContainer():e,e=r.scrollThreshold,r=r.getScrollPosition,i=void 0===r?ac:r,o.drag(n,{container:t,threshold:void 0===e?0:e,getScrollPosition:function(t){return i({scrollContainer:t.container,direction:t.direction})}}),!0},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,O(O({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,O(O({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,O(O({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,O(O({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,O(O({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,O(O({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,O(O({},n),{targets:t.props.targets}))}},Zr={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},lo=Ma("padding",{render:function(t,r){var n=t.props;if(n.dragArea)return[];var n=n.padding||{},e=n.left,i=n.top,i=void 0===i?0:i,o=n.right,o=void 0===o?0:o,n=n.bottom,n=void 0===n?0:n,t=t.state,a=t.renderPoses,s=[t.pos1,t.pos2,t.pos3,t.pos4],t=[];return 0<(void 0===e?0:e)&&t.push([0,2]),0<i&&t.push([0,1]),0<o&&t.push([1,3]),0<n&&t.push([2,3]),t.map(function(t,n){var e=t[0],t=t[1],e=In([0,0],[100,0],[0,100],[100,100],s[e],s[t],a[e],a[t]);if(e.length)return r.createElement("div",{key:"padding".concat(n),className:X("padding"),style:{transform:xu(e,!0)}})})}}),sc=["nw","ne","se","sw"];function uc(t,n){var e=t[0]+t[1],e=n<e?n/e:1;return t[0]*=e,t[1]=n-t[1]*e,t}var cc=[1,2,5,6],lc=[0,3,4,7],fc=[1,-1,-1,1],pc=[1,1,-1,-1];function dc(t,i,o,a,s,u,c,l,f){void 0===u&&(u=0),void 0===c&&(c=0),void 0===l&&(l=a),void 0===f&&(f=s);var p=[],d=!1,t=t.map(function(t,n){var e,n=i[n],r=n.horizontal,n=n.vertical;return n&&!d&&(d=!0,p.push("/")),d?(e=Math.max(0,1===n?t[1]-c:f-t[1]),p.push(Lu(e,s,o))):(e=Math.max(0,1===r?t[0]-u:l-t[0]),p.push(Lu(e,a,o))),e});return{styles:p,raws:t}}function hc(t){for(var n=[0,0],e=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,e[0]=i+1),o.vertical&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:n,verticalRange:e}}function gc(t,r,i,o,a,n){void 0===n&&(n=[0,0]);var e=t.indexOf("/"),e=(-1<e?t.slice(0,e):t).length,s=t.slice(0,e),t=t.slice(e+1),e=s[0],e=void 0===e?"0px":e,u=s[1],u=void 0===u?e:u,c=s[2],c=void 0===c?e:c,l=s[3],l=void 0===l?u:l,f=t[0],f=void 0===f?e:f,p=t[1],p=void 0===p?f:p,d=t[2],d=void 0===d?f:d,h=t[3],h=void 0===h?p:h,g=[e,u,c,l].map(function(t){return Z(t,r)}),v=[f,p,d,h].map(function(t){return Z(t,i)}),e=g.slice(),u=v.slice(),c=uc([e[0],e[1]],r),d=(e[0]=c[0],e[1]=c[1],l=uc([e[3],e[2]],r),e[3]=l[0],e[2]=l[1],f=uc([u[0],u[3]],i),u[0]=f[0],u[3]=f[1],p=uc([u[1],u[2]],i),u[1]=p[0],u[2]=p[1],e.slice(0,Math.max(n[0],s.length))),h=u.slice(0,Math.max(n[1],t.length));return et(et([],d.map(function(t,n){var e=sc[n];return{horizontal:fc[n],vertical:0,pos:[o+t,a+(-1===pc[n]?i:0)],sub:!0,raw:g[n],direction:e}}),!0),h.map(function(t,n){var e=sc[n];return{horizontal:0,vertical:pc[n],pos:[o+(-1===fc[n]?r:0),a+t],sub:!0,raw:v[n],direction:e}}),!0)}function vc(t,n,e,r,i){void 0===i&&(i=n.length);var o=hc(t.slice(r)),a=o.horizontalRange,o=o.verticalRange,r=e-r,s=0;if(0==r)s=i;else if(0<r&&r<a[1])s=a[1]-r;else{if(!(r>=o[0]))return;s=o[0]+o[1]-r}t.splice(e,s),n.splice(e,s)}function mc(t,n,e,r,i,o,a,s,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var f=hc(t.slice(e)),p=f.horizontalRange,f=f.verticalRange;if(-1<r)for(var d=1===fc[r]?o-c:s-o,h=p[1];h<=r;++h){var g=1===pc[h]?l:u,v=0;if(r===h?v=o:0===h?v=c+d:-1===fc[h]&&(v=s-(n[e][0]-c)),t.splice(e+h,0,{horizontal:fc[h],vertical:0,pos:[v,g]}),n.splice(e+h,0,[v,g]),0===h)break}else if(-1<i)for(var m=1===pc[i]?a-l:u-a,b=(0===p[1]&&0===f[1]&&(t.push({horizontal:fc[0],vertical:0,pos:p=[c+m,l]}),n.push(p)),f[0]),h=f[1];h<=i;++h){v=1===fc[h]?c:s,g=0;if(i===h?g=a:0===h?g=l+m:1===pc[h]?g=n[e+b][1]:-1===pc[h]&&(g=u-(n[e+b][1]-l)),t.push({horizontal:0,vertical:pc[h],pos:[v,g]}),n.push([v,g]),0===h)break}}function bc(t,e){return void 0===e&&(e=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?e[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?e[n]:null}).filter(function(t){return null!=t})}}var xc=[[0,-1,"n"],[1,0,"e"]],Ec=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Sc(t,n,e){var r=t.props.clipRelative,t=t.state,i=t.width,o=t.height,t=n.type,n=n.poses,a="rect"===t,s="circle"===t;if("polygon"===t)return e.map(function(t){return"".concat(Lu(t[0],i,r)," ").concat(Lu(t[1],o,r))});if(a||"inset"===t){var u=e[1][1],c=e[3][0],l=e[7][0],f=e[5][1];if(a)return[u,c,f,l].map(function(t){return"".concat(t,"px")});var p,d=[u,i-c,o-f,l].map(function(t,n){return Lu(t,n%2?i:o,r)});return 8<e.length&&(p=(a=T(e[4],e[0]))[0],a=a[1],d.push.apply(d,et(["round"],dc(e.slice(8),n.slice(8),r,p,a,l,u,c,f).styles,!1))),d}return s||"ellipse"===t?(n=e[0],p=Lu(Math.abs(e[1][1]-n[1]),s?Math.sqrt((i*i+o*o)/2):o,r),(d=s?[p]:[Lu(Math.abs(e[2][0]-n[0]),i,r),p]).push("at",Lu(n[0],i,r),Lu(n[1],o,r)),d):void 0}function yc(t,n,e,r){var o=[r,(r+n)/2,n],a=[t,(t+e)/2,e];return Ec.map(function(t){var n=t[0],e=t[1],t=t[2],r=o[n+1],i=a[e+1];return{vertical:Math.abs(e),horizontal:Math.abs(n),direction:t,pos:[r,i]}})}function Mc(t){var n=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(t){t=t.pos;n[0]=Math.min(n[0],t[0]),n[1]=Math.max(n[1],t[0]),e[0]=Math.min(e[0],t[1]),e[1]=Math.max(e[1],t[1])}),[Math.abs(n[1]-n[0]),Math.abs(e[1]-e[0])]}function Rc(t,e,r,n,i){var o,a,s,u,c,l,f,p,d,h,g,v,m,b,x,E;if((i=i?i:"none"!==(o=(t=z(t)).clipPath)?o:t.clip)&&"none"!==i&&"auto"!==i||(i=n))return o=ht(i),t=o.prefix,n=void 0===t?i:t,t=o.value,o=void 0===t?"":t,t="circle"===n,a=" ","polygon"===n?(a=",",{type:n,clipText:i,poses:E=(h=dt(o||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var t=t.split(" "),n=t[0],t=t[1];return{vertical:1,horizontal:1,pos:[Z(n,e),Z(t,r)]}}),splitter:a}):t||"ellipse"===n?(f=d="",u=s=0,h=S(o),u=t?(p=h[0],d=void 0===(l=h[2])?"50%":l,f=void 0===(l=h[3])?"50%":l,s=Z(void 0===p?"50%":p,Math.sqrt((e*e+r*r)/2))):(l="",p=h[0],l=void 0===(g=h[1])?"50%":g,d=void 0===(g=h[3])?"50%":g,f=void 0===(g=h[4])?"50%":g,s=Z(void 0===p?"50%":p,e),Z(l,r)),E=et([{vertical:1,horizontal:1,pos:c=[Z(d,e),Z(f,r)],direction:"nesw"}],xc.slice(0,t?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[c[0]+t[0]*s,c[1]+t[1]*u]}}),!0),{type:n,clipText:i,radiusX:s,radiusY:u,left:c[0]-s,top:c[1]-u,poses:E,splitter:a}):"inset"===n?(p=(-1<(g=(h=S(o||"0 0 0 0")).indexOf("round"))?h.slice(0,g):h).length,l=h.slice(p+1),f=(d=h.slice(0,p))[0],g=void 0===(t=d[1])?f:t,p=d[2],d=void 0===(t=d[3])?g:t,v=(t=[f,void 0===p?f:p].map(function(t){return Z(t,r)}))[0],b=t[1],x=(f=[d,g].map(function(t){return Z(t,e)}))[0],m=f[1],d=gc(l,(p=e-m)-x,(t=r-b)-v,x,v),{type:"inset",clipText:i,poses:E=et(et([],yc(v,p,t,x),!0),d,!0),top:v,left:x,right:p,bottom:t,radius:l,splitter:a}):"rect"===n?(a=",",{type:"rect",clipText:i,poses:E=yc(v=(g=(h=dt(o||"0px, ".concat(e,"px, ").concat(r,"px, 0px"))).map(function(t){return gt(t).value}))[0],m=g[1],b=g[2],x=g[3]),top:v,right:m,bottom:b,left:x,values:h,splitter:a}):void 0}Yt={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,o){var n=t.props,e=n.customClipPath,r=n.defaultClipPath,i=n.clipArea,a=n.zoom,n=t.state,t=n.target,s=n.width,u=n.height,c=n.allMatrix,l=n.is3d,f=n.left,p=n.top,d=n.pos1,h=n.pos2,g=n.pos3,v=n.pos4,m=n.clipPathState,b=n.snapBoundInfos,x=n.rotation;if(!t)return[];n=Rc(t,s,u,r||"inset",m||e);if(!n)return[];var E,S,y,M=l?4:3,t=n.type,r=n.poses.map(function(t){t=H(c,t.pos,M);return[t[0]-f,t[1]-p]}),m=[],R=[],e="rect"===t,l="inset"===t,D="polygon"===t;if((e||l||D)&&(E=l?r.slice(0,8):r,R=E.map(function(t,n){var e=0===n?E[E.length-1]:E[n-1],r=F(e,t),t=Cu(e,t);return o.createElement("div",{key:"clipLine".concat(n),className:X("line","clip-line","snap-control"),"data-clip-index":n,style:{width:"".concat(t,"px"),transform:"translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(r,"rad) scaleY(").concat(a,")")}})})),m=r.map(function(t,n){return o.createElement("div",{key:"clipControl".concat(n),className:X("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(x,"rad) scale(").concat(a,")")}})}),l&&m.push.apply(m,r.slice(8).map(function(t,n){return o.createElement("div",{key:"clipRadiusControl".concat(n),className:X("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(x,"rad) scale(").concat(a,")")}})})),"circle"===t||"ellipse"===t){var t=n.left,C=n.top,w=n.radiusX,O=n.radiusY,n=T(H(c,[t,C],M),H(c,[0,0],M)),t=n[0],C=n[1],n="none";if(!i){for(var P=Math.max(10,w/5,O/5),B=[],z=0;z<=P;++z){var G=2*Math.PI/P*z;B.push([w+(w-a)*Math.cos(G),O+(O-a)*Math.sin(G)])}B.push([w,-2]),B.push([-2,-2]),B.push([-2,2*O+2]),B.push([2*w+2,2*O+2]),B.push([2*w+2,-2]),B.push([w,-2]),n="polygon(".concat(B.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(", "),")")}m.push(o.createElement("div",{key:"clipEllipse",className:X("clip-ellipse","snap-control"),style:{width:"".concat(2*w,"px"),height:"".concat(2*O,"px"),clipPath:n,transform:"translate(".concat(-f+t,"px, ").concat(-p+C,"px) ").concat(xu(c))}}))}return i&&(t=(n=yu(et([d,h,g,v],r,!0))).width,C=n.height,S=n.left,y=n.top,(D||e||l)&&(B=l?r.slice(0,8):r,m.push(o.createElement("div",{key:"clipArea",className:X("clip-area","snap-control"),style:{width:"".concat(t,"px"),height:"".concat(C,"px"),transform:"translate(".concat(S,"px, ").concat(y,"px)"),clipPath:"polygon(".concat(B.map(function(t){return"".concat(t[0]-S,"px ").concat(t[1]-y,"px")}).join(", "),")")}})))),b&&["vertical","horizontal"].forEach(function(r){var t=b[r],i="horizontal"===r;t.isSnap&&R.push.apply(R,t.snap.posInfos.map(function(t,n){var t=t.pos,e=T(H(c,i?[0,t]:[t,0],M),[f,p]),t=T(H(c,i?[s,t]:[t,u],M),[f,p]);return Na(o,"",e,t,a,"clip".concat(r,"snap").concat(n),"guideline")})),t.isBound&&R.push.apply(R,t.bounds.map(function(t,n){var t=t.pos,e=T(H(c,i?[0,t]:[t,0],M),[f,p]),t=T(H(c,i?[s,t]:[t,u],M),[f,p]);return Na(o,"",e,t,a,"clip".concat(r,"bounds").concat(n),"guideline","bounds","bold")}))}),et(et([],m,!0),R,!0)},dragControlCondition:function(t,n){return n.inputEvent&&-1<(n.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,n){var e=t.props.dragWithClip;return void 0!==e&&!e&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,O(O({},n),{isDragTarget:!0}))},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var e=t.state,r=t.props,i=r.defaultClipPath,r=r.customClipPath,o=e.target,a=e.width,s=e.height,u=n.inputEvent?n.inputEvent.target:null,c=u&&u.getAttribute("class")||"",l=n.datas,o=Rc(o,a,s,i||"inset",r);if(!o)return!1;a=o.clipText;return!1===it(t,"onClipStart",rt(t,n,{clipType:o.type,clipStyle:a,poses:o.poses.map(function(t){return t.pos})}))?l.isClipStart=!1:(l.isControl=c&&-1<c.indexOf("clip-control"),l.isLine=-1<c.indexOf("clip-line"),l.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),l.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,l.clipPath=o,l.isClipStart=!0,e.clipPathState=a,qs(t,n),!0)},dragControl:function(t,n){var e=n.datas,r=n.originalDatas,I=n.isDragTarget;if(!e.isClipStart)return!1;var i=e.isControl,o=e.isLine,a=e.isArea,s=e.clipIndex,e=e.clipPath;if(!e)return!1;var u,c,k,F,N,l,f,p,W,d,h,g,v,Y,j,m=t.props.keepRatio,b=0,x=0,r=r.draggable,q=Us(n),x=I&&r?(X=r.prevBeforeDist,b=X[0],X[1]):(b=q[0],q[1]),X=[b,x],H=t.props,E=t.state,L=E.width,V=E.height,a=!a&&!i&&!o,o=e.type,S=e.poses,U=e.splitter,y=S.map(function(t){return t.pos}),a=(a&&(b=-b,x=-x),!i||"nesw"===S[s].direction),$="inset"===o||"rect"===o,M=S.map(function(){return[0,0]}),R=(i&&!a?(f=(C=S[s]).horizontal,C=C.vertical,f=[b*Math.abs(f),x*Math.abs(C)],c=f,C=$,f=m,P=(B=(u=S)[G=s]).direction,B=B.sub,l=u.map(function(){return[0,0]}),z=P?P.split(""):[],C&&G<8?(C=z.filter(function(t){return"w"===t||"e"===t}),w=z.filter(function(t){return"n"===t||"s"===t}),k=C[0],F=w[0],l[G]=c,w=(C=Mc(u))[0],C=C[1],(R=w&&C?w/C:0)&&f?(f=u[(G+4)%8].pos,D=[0,0],-1<P.indexOf("w")?D[0]=-1:-1<P.indexOf("e")&&(D[0]=1),-1<P.indexOf("n")?D[1]=-1:-1<P.indexOf("s")&&(D[1]=1),R=w+(w=Ku([w,C],c,R,D,!0))[0],C=C+w[1],w=f[1],p=f[1],O=f[0],f=f[0],-1===D[0]?O=f-R:1===D[0]?f=O+R:(O-=R/2,f+=R/2),-1===D[1]?w=p-C:p=1===D[1]?w+C:(w=p-C/2)+C,N=yc(w,f,p,O),u.forEach(function(t,n){l[n][0]=N[n].pos[0]-t.pos[0],l[n][1]=N[n].pos[1]-t.pos[1]})):(u.forEach(function(t,n){t=t.direction;t&&(-1<t.indexOf(k)&&(l[n][0]=c[0]),-1<t.indexOf(F)&&(l[n][1]=c[1]))}),k&&(l[1][0]=c[0]/2,l[5][0]=c[0]/2),F&&(l[3][1]=c[1]/2,l[7][1]=c[1]/2))):P&&!B?z.forEach(function(i){var o="n"===i||"s"===i;u.forEach(function(t,n){var e=t.direction,r=t.horizontal,t=t.vertical;e&&-1!==e.indexOf(i)&&(l[n]=[o||!r?0:c[0],o&&t?c[1]:0])})}):l[G]=c,M=l):a&&(M=y.map(function(){return[b,x]})),y.map(function(t,n){return J(t,M[n])})),D=et([],R,!0),C=(E.snapBoundInfos=null,"circle"===e.type),w="ellipse"===e.type,O=((C||w)&&(d=yu(R),f=Math.abs(d.bottom-d.top),p=Math.abs(w?d.right-d.left:f),h=R[0][1]+f,g=R[0][0]-p,v=R[0][0]+p,C&&(D.push([v,d.bottom]),M.push([1,0])),D.push([d.left,h]),M.push([0,1]),D.push([g,d.bottom]),M.push([1,0])),ts((H.clipHorizontalGuidelines||[]).map(function(t){return Z("".concat(t),V)}),(H.clipVerticalGuidelines||[]).map(function(t){return Z("".concat(t),L)}),L,V)),P=[],B=[],z=(B=C||w?(P=[D[4][0],D[2][0]],[D[1][1],D[3][1]]):$?(j=[D[0],D[2],D[4],D[6]],W=[M[0],M[2],M[4],M[6]],P=j.filter(function(t,n){return W[n][0]}).map(function(t){return t[0]}),j.filter(function(t,n){return W[n][1]}).map(function(t){return t[1]})):(P=D.filter(function(t,n){return M[n][0]}).map(function(t){return t[0]}),D.filter(function(t,n){return M[n][1]}).map(function(t){return t[1]})),[0,0]),G=Gs(O,H.clipTargetBounds&&{left:0,top:0,right:L,bottom:V},P,B,5),a=G.horizontal,y=G.vertical,T=a.offset,_=y.offset,a=(a.isBound&&(z[1]+=T),y.isBound&&(z[0]+=_),(w||C)&&0===M[0][0]&&0===M[0][1]?(A=(d=yu(R)).bottom-d.top,d=w?d.right-d.left:A,d-=y.isBound?Math.abs(_):0===y.snapIndex?-_:_,A-=a.isBound?Math.abs(T):0===a.snapIndex?-T:T,C&&(d=A=0<us(y,a)?A:d),y=D[0],D[1][1]=y[1]-A,D[2][0]=y[0]+d,D[3][1]=y[1]+A,D[4][0]=y[0]-d):$&&m&&i?(A=(a=Mc(S))[0],y=a[1],d=A&&y?A/y:0,m=S[s].direction||"",i=D[1][1],h=D[5][1],g=D[7][0],v=D[3][0],T<=_?T=_/d:_=T*d,-1<m.indexOf("w")?g-=_:-1<m.indexOf("e")?v-=_:(g+=_/2,v-=_/2),-1<m.indexOf("n")?i-=T:-1<m.indexOf("s")?h-=T:(i+=T/2,h-=T/2),Y=yc(i,v,h,g),D.forEach(function(t,n){n=Y[n].pos;t[0]=n[0],t[1]=n[1]})):D.forEach(function(t,n){n=M[n];n[0]&&(t[0]-=_),n[1]&&(t[1]-=T)}),Sc(t,e,R)),A="".concat(o,"(").concat(a.join(U),")");return E.clipPathState=A,B=C||w?(P=[D[4][0],D[2][0]],[D[1][1],D[3][1]]):$?(P=(j=[D[0],D[2],D[4],D[6]]).map(function(t){return t[0]}),j.map(function(t){return t[1]})):(P=D.map(function(t){return t[0]}),D.map(function(t){return t[1]})),E.snapBoundInfos=Gs(O,H.clipTargetBounds&&{left:0,top:0,right:L,bottom:V},P,B,1),r&&(y=E.is3d,S=E.allMatrix,s=z,I&&(s=[X[0]+z[0]-q[0],X[1]+z[1]-q[1]]),r.deltaOffset=K(S,[s[0],s[1],0,0],y?4:3)),it(t,"onClip",rt(t,n,{clipEventType:"changed",clipType:o,poses:R,clipStyle:A,clipStyles:a,distX:b,distY:x})),!0},dragControlEnd:function(t,n){this.unset(t);var e=n.isDrag,r=n.datas,i=n.isDouble,o=r.isLine,a=r.isClipStart,r=r.isControl;return!!a&&(it(t,"onClipEnd",Fu(t,n,{})),i&&(r?function(t,n){var e=(r=n.datas).clipPath,r=r.clipIndex,i=e.type,o=e.poses,a=e.splitter,s=o.map(function(t){return t.pos}),u=s.length;if("polygon"===i)o.splice(r,1),s.splice(r,1);else{if("inset"!==i)return;if(r<8)return;if(vc(o,s,r,8,u),u===o.length)return}r=Sc(t,e,s),it(t,"onClip",rt(t,n,{clipEventType:"removed",clipType:i,poses:s,clipStyles:r,clipStyle:"".concat(i,"(").concat(r.join(a),")"),distX:0,distY:0}))}(t,n):o&&function(t,n){var e=(r=js(t,n))[0],r=r[1],i=(o=n.datas).clipPath,o=o.clipIndex,a=i.type,s=i.poses,u=i.splitter,c=s.map(function(t){return t.pos});if("polygon"===a)c.splice(o,0,[e,r]);else{if("inset"!==a)return;var l=cc.indexOf(o),o=lc.indexOf(o),f=s.length;if(mc(s,c,8,l,o,e,r,c[4][0],c[4][1],c[0][0],c[0][1]),f===s.length)return}l=Sc(t,i,c),it(t,"onClip",rt(t,n,{clipEventType:"added",clipType:a,poses:c,clipStyles:l,clipStyle:"".concat(a,"(").concat(l.join(u),")"),distX:0,distY:0}))}(t,n)),i||e)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},fo={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,n){return n.isRequest?"originDraggable"===n.requestAble:a(n.inputEvent.target,X("origin"))},dragControlStart:function(t,n){var e=n.datas,n=(qs(t,n),rt(t,n,{dragStart:j.dragStart(t,(new _a).dragStart([0,0],n))})),r=it(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],!(e.isDragOrigin=!0)===r?e.isDragOrigin=!1:n},dragControl:function(t,n){var e=n.datas,r=n.isPinch,i=n.isRequest;if(!e.isDragOrigin)return!1;var o=Us(n),a=o[0],o=o[1],s=t.state,u=s.width,c=s.height,l=s.offsetMatrix,f=s.targetMatrix,s=s.is3d,p=t.props.originRelative,p=void 0===p||p,s=s?4:3,a=[a,o],i=(!i||((o=n.distOrigin)[0]||o[1])&&(a=o),J(e.startOrigin,a)),o=J(e.startTargetOrigin,a),d=T(a,e.prevOrigin),l=Ks(l,f,i,s),f=t.getRect(),l=yu(Su(l,u,c,s)),s=[f.left-l.left,f.top-l.top],f=rt(t,n,{width:u,height:c,origin:i,dist:e.prevOrigin=a,delta:d,transformOrigin:[Lu(o[0],u,p),Lu(o[1],c,p)].join(" "),drag:j.drag(t,Ta(n,t.state,s,!!r,!1))});return it(t,"onDragOrigin",f),f},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(it(t,"onDragOriginEnd",Fu(t,n,{})),!0)},dragGroupControlCondition:function(t,n){return this.dragControlCondition(t,n)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){n=this.dragControl(t,n);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var n={},e=t.getRect(),r=0,i=0,o=e.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Dc(t,n,e,r,i){void 0===r&&(r=[0,0]);return gc(!(t=i||(t=z(t))&&t.borderRadius||"")||!i&&"0px"===t?[]:S(t),n,e,0,0,r)}function Cc(t,n,e,r,i,o){var a=t.state,s=a.width,u=a.height,o=dc(o,i,t.props.roundRelative,s,u),c=o.raws,o=o.styles,i=bc(i,c),c=i.horizontals,i=i.verticals,o=o.join(" ");it(t,"onRound",rt(t,n,{horizontals:c,verticals:i,borderRadius:a.borderRadiusState=o,width:s,height:u,delta:r,dist:e}))}var wc={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,r){var n=t.state,e=n.target,i=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,c=n.top,n=n.borderRadiusState,t=t.props,l=t.minRoundControls,f=t.maxRoundControls,p=void 0===f?[4,4]:f,d=t.zoom;if(!e)return null;var h=s?4:3,f=Dc(e,i,o,void 0===l?[0,0]:l,n);if(!f)return null;var g=0,v=0;return f.map(function(t,n){v+=Math.abs(t.horizontal),g+=Math.abs(t.vertical);var e=T(H(a,t.pos,h),[u,c]),t=t.vertical?g<=p[1]:v<=p[0];return r.createElement("div",{key:"borderRadiusControl".concat(n),className:X("control","border-radius"),"data-radius-index":n,style:{display:t?"block":"none",transform:"translate(".concat(e[0],"px, ").concat(e[1],"px) scale(").concat(d,")")}})})},dragControlCondition:function(t,n){if(!n.inputEvent||n.isRequest)return!1;n=n.inputEvent.target.getAttribute("class")||"";return-1<n.indexOf("border-radius")||-1<n.indexOf("moveable-line")&&-1<n.indexOf("moveable-direction")},dragControlStart:function(t,n){var e=n.inputEvent,r=n.datas,e=e.target,i=e.getAttribute("class")||"",o=-1<i.indexOf("border-radius"),i=-1<i.indexOf("moveable-line")&&-1<i.indexOf("moveable-direction"),a=o?parseInt(e.getAttribute("data-radius-index"),10):-1,e=i?parseInt(e.getAttribute("data-line-index"),10):-1;if(!o&&!i)return!1;if(!1===it(t,"onRoundStart",rt(t,n,{})))return!1;r.lineIndex=e,r.controlIndex=a,r.isControl=o,r.isLine=i,qs(t,n);e=t.props,a=e.roundRelative,o=e.minRoundControls,i=void 0===o?[0,0]:o,n=t.state,e=n.target,o=n.width,t=n.height,r.isRound=!0,r.prevDist=[0,0],e=Dc(e,o,t,i)||[];return r.controlPoses=e,n.borderRadiusState=dc(e.map(function(t){return t.pos}),e,a,o,t).styles.join(" "),!0},dragControl:function(t,n){var e=n.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var r=e.controlIndex,i=e.controlPoses,o=Us(n),a=o[0],o=o[1],s=[a,o],u=T(s,e.prevDist),c=t.props.maxRoundControls,l=void 0===c?[4,4]:c,c=t.state,f=c.width,p=c.height,c=i[r],d=c.vertical,h=c.horizontal,g=i.map(function(t){var n=t.horizontal,t=t.vertical,e=[n*h*s[0],t*d*s[1]];if(n){if(1===l[0])return e;if(l[0]<4&&n!==h)return e}else{if(0===l[1])return e[1]=t*h*s[0]/f*p,e;if(d){if(1===l[1])return e;if(l[1]<4&&t!==d)return e}}return[0,0]}),c=(g[r]=s,i.map(function(t,n){return J(t.pos,g[n])}));return e.prevDist=[a,o],Cc(t,n,s,u,i,c),!0},dragControlEnd:function(t,n){var e=t.state,r=(e.borderRadiusState="",n.datas),i=n.isDouble;if(!r.isRound)return!1;var o,a,s,u=e.width,c=e.height,l=r.isControl,f=r.controlIndex,p=r.isLine,d=r.lineIndex,r=r.controlPoses,h=r.map(function(t){return t.pos}),g=h.length,v=t.props.roundClickable;return i&&(void 0===v||v)&&(l?vc(r,h,f,0):p&&(v=(i=js(t,n))[0],l=i[1],f=h,p=d,i=v,d=l,v=u,l=c,o=(c=bc(u=r)).horizontals,c=c.verticals,o=o.length,c=c.length,s=a=-1,0===p?0===o?a=0:1===o&&(a=1):3===p&&(o<=2?a=2:o<=3&&(a=3)),2===p?0===c?s=0:c<4&&(s=3):1===p&&(c<=1?s=1:c<=2&&(s=2)),mc(u,f,0,a,s,i,d,v,l)),g!==r.length&&Cc(t,n,[0,0],[0,0],r,h)),it(t,"onRoundEnd",Fu(t,n,{})),!(e.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}};var Oc={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,n){var t=t.state,e=t.is3d,r=t.target,t=t.targetMatrix,r=null==r?void 0:r.style.transform,t=e?"matrix3d(".concat(t.join(","),")"):"matrix(".concat(Dn(t,!0),")"),r=r&&"none"!==r?r:t;n.datas.startTransforms=(t=r)===(e?"matrix3d(".concat(I(4)):"matrix(".concat(I(3),")"))||"matrix(1,0,0,1,0,0)"===t?[]:S(r)},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return rt(t,n,{setTransform:function(t){n.datas.startTransforms=at(t)?t:S(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return rt(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),it(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(n),it(t,"onBeforeRender",rt(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){it(t,"onBeforeRenderEnd",rt(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var e=this,r=(this.dragStart(t,n),Aa(t,"beforeRenderable",n)),i=t.moveables,r=r.map(function(t,n){n=i[n];return e.setTransform(n,t),e.fillDragStartParams(n,t)});it(t,"onBeforeRenderGroupStart",rt(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:r}))},dragGroup:function(t,n){var e=this,r=(this.drag(t,n),Aa(t,"beforeRenderable",n)),i=t.moveables,r=r.map(function(t,n){n=i[n];return e.resetTransform(t),e.fillDragParams(n,t)});it(t,"onBeforeRenderGroup",rt(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:r}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),it(t,"onBeforeRenderGroupEnd",rt(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},Pc={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,n){it(t,"onRenderStart",rt(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){it(t,"onRender",this.fillDragParams(t,n))},dragAfter:function(t,n){if(n.resultCount)return this.drag(t,n)},dragEnd:function(t,n){it(t,"onRenderEnd",this.fillDragEndParams(t,n))},dragGroupStart:function(t,n){it(t,"onRenderGroupStart",rt(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){var e=this,r=Aa(t,"beforeRenderable",n),i=t.moveables,r=r.map(function(t,n){n=i[n];return e.fillDragParams(n,t)});it(t,"onRenderGroup",rt(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,transform:eu(n),events:r}))},dragGroupEnd:function(t,n){var e=this,r=Aa(t,"beforeRenderable",n),i=t.moveables,r=r.map(function(t,n){n=i[n];return e.fillDragEndParams(n,t)});it(t,"onRenderGroupEnd",rt(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets,events:r}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlAfter:function(t,n){return this.dragAfter(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)},fillDragParams:function(t,n){return rt(t,n,{isPinch:!!n.isPinch,transform:eu(n)})},fillDragEndParams:function(t,n){return rt(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag})}};function Bc(e,t,n,r,i,o,a){var s="Start"===i,u=e.state.target,c=o.isRequest;if(!u||s&&-1<r.indexOf("Control")&&!c&&e.areaElement===o.inputEvent.target)return!1;var l,f="".concat(n).concat(r).concat(i),p="".concat(n).concat(r,"Condition"),u="End"===i,d="After"===i,h=!(!s||e.targetGesto&&e.controlGesto&&e.targetGesto.isFlag()&&e.controlGesto.isFlag()),g=(h&&e.updateRect(i,!0,!1),""!==i||c||Xu(e.state,o),et([],e[t],!0));if(c&&(l=o.requestAble,g.some(function(t){return t.name===l})||g.push.apply(g,e.props.ables.filter(function(t){return t.name===l}))),!g.length)return!1;var v,g=et(et([Oc],g,!0),[Pc],!1).filter(function(t){return t[f]}),m=o.datas,b=(h&&g.forEach(function(t){t.unset&&t.unset(e)}),o.inputEvent),x=(u&&b&&(v=document.elementFromPoint(o.clientX,o.clientY)||b.target),0),b=g.filter(function(t){var n=t.name,n=m[n]||(m[n]={});return s&&(n.isEventStart=!t[p]||t[p](e,o)),!!n.isEventStart&&(t=t[f](e,O(O({},o),{resultCount:x,datas:n,originalDatas:m,inputTarget:v})),e._emitter.off(),s&&!1===t&&(n.isEventStart=!1),x+=t?1:0,t)}).length,E=!1;return s&&g.length&&!b&&(E=0===g.filter(function(t){var n=t.name,n=m[n];return!!n.isEventStart&&("strong"!==t.dragRelation||(n.isEventStart=!1))}).length),(u||E)&&(e.state.gesto=null,e.moveables&&e.moveables.forEach(function(t){t.state.gesto=null})),h&&E&&g.forEach(function(t){t.unset&&t.unset(e)}),s&&!c&&b&&null!=o&&o.preventDefault(),!e.isUnmounted&&!E&&((!s&&b&&!a||u)&&(e.updateRect(u?i:"",!0,!1),e.forceUpdate()),s||u||d||!b||a||Bc(e,t,n,r,i+"After",o),!0)}function zc(n,t,e){function r(t){return(t=t.inputEvent.target)===n.areaElement||!n.isMoveableElement(t)&&!n.controlBox.getElement().contains(t)||a(t,"moveable-area")||a(t,"moveable-padding")}var i=n.controlBox.getElement(),o=[];o.push(i),n.props.dragArea&&!n.props.dragTarget||o.push(t);return Gc(n,o,"targetAbles",e,{dragStart:r,pinchStart:r})}function Gc(i,t,o,a,s){void 0===s&&(s={});var n=i.props,e=n.pinchOutside,n=n.pinchThreshold,n={preventDefault:!1,container:window,pinchThreshold:n,pinchOutside:e},u=new ve(t,n);return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){u.on("".concat(r).concat(e),function(t){var n=t.eventType;(!s[n]||s[n](t))&&Bc(i,o,r,a,e,t)||t.stop()})})}),u}var Tc=function(){function t(t,n,e){var i=this;this.target=t,this.moveable=n,this.eventName=e,this.ables=[],this._onEvent=function(n){var e=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach(function(t){t[e](r,{inputEvent:n})})},t.addEventListener(e.toLowerCase(),this._onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}(),_c=function(t){var n=i,e=t;if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}function i(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=O({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},zu(null)),n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new Sa,n._prevTarget=null,n._prevDragArea=!1,n._observer=null,n._observerId=0,n.onPreventClick=function(t){t.stopPropagation(),v(window,"click",n.onPreventClick,!0)},n.checkUpdateRect=function(){var t;n.isDragging()||((t=n.props.parentMoveable)?t.checkUpdateRect():(Et(n._observerId),n._observerId=xt(function(){n.isDragging()||n.updateRect()})))},n}ya(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r);e=i.prototype;return e.render=function(){var t=this.props,n=this.state,e=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,c=t.portalContainer,e=(this.checkUpdate(),this.updateRenderPoses(),e||{left:0,top:0}),l=e.left,e=e.top,f=n.left,p=n.top,d=n.target,h=n.direction,n=n.hasFixed,t=t.targets,t=(t&&t.length||i)&&d,i=this.isDragging(),g={};return this.getEnabledAbles().forEach(function(t){g["data-able-".concat(t.name.toLowerCase())]=!0}),m(u,O({cspNonce:a,ref:x(this,"controlBox"),className:"".concat(X("control-box",-1===h?"reverse":"",i?"dragging":"")," ").concat(r)},g,{onClick:this.onPreventClick,portalContainer:c,style:{position:n?"fixed":"absolute",display:t?"block":"none",transform:"translate3d(".concat(f-l,"px, ").concat(p-e,"px, ").concat(s,")"),"--zoom":o,"--zoompx":"".concat(o,"px")}}),this.renderAbles(),this._renderLines())},e.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,n=t.parentMoveable,e=t.container,t=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),e||n||t||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},e.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},e.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),ku(this,"targetGesto"),ku(this,"controlGesto");var t,n=this.events;for(t in n){var e=n[t];e&&e.destroy()}},e.getContainer=function(){var t=this.props,n=t.parentMoveable,e=t.wrapperMoveable;return t.container||e&&e.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Ca)},e.dragStart=function(t){var n=this.targetGesto;return n&&!n.isFlag()&&n.triggerDragStart(t),this},e.hitTest=function(t){var n=this.state,e=n.target,r=n.pos1,i=n.pos2,o=n.pos3,a=n.pos4,n=n.targetClientRect;if(!e)return 0;var t=(e=t instanceof Element?{left:(e=t.getBoundingClientRect()).left,top:e.top,width:e.width,height:e.height}:O({width:0,height:0},t)).left,s=e.top,u=e.width,e=e.height,r=Vn([r,i,a,o],n),i=te(r,[[t,s],[t+u,s],[t+u,s+e],[t,s+e]]),a=Ln(r);return i&&a?Math.min(100,i/a*100):0},e.isInside=function(t,n){var e=this.state,r=e.target,i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,e=e.targetClientRect;return!!r&&$n([t,n],Vn([i,o,s,a],e))},e.updateRect=function(t,n,e){void 0===e&&(e=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),r=(i?i.props:r).rootContainer;this.updateState(zu(this.controlBox&&this.controlBox.getElement(),o,a,a,r||a),!i&&e)},e.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},e.updateTarget=function(t){this.updateRect(t,!0)},e.getRect=function(){var t=this.state,n=Iu(this.state),e=n[0],r=n[1],i=n[2],o=n[3],n=yu(n),a=t.width,s=t.height,u=n.width,c=n.height,l=n.left,n=n.top,f=[t.left,t.top],p=J(f,t.origin);return{width:u,height:c,left:l,top:n,pos1:e,pos2:r,pos3:i,pos4:o,offsetWidth:a,offsetHeight:s,beforeOrigin:J(f,t.beforeOrigin),origin:p,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.getManager=function(){return this},e.getRotation=function(){var t=this.state,n=t.pos1,e=t.pos2,t=t.direction;return t=t,n=F(n=n,e)/Math.PI*180,n=0<=(n=0<=t?n:180-n)?n:360+n},e.request=function(n,t,e){void 0===t&&(t={});var r=this.props,i=r.ables,r=r.groupable,i=i.filter(function(t){return t.name===n})[0];if(this.isDragging()||!i||!i.request)return{request:function(){return this},requestEnd:function(){return this}};var o=this,a=i.request(this),s=e||t.isInstant,u=a.isControl?"controlAbles":"targetAbles",c="".concat(r?"Group":"").concat(a.isControl?"Control":""),i={request:function(t){return Bc(o,u,"drag",c,"",O(O({},a.request(t)),{requestAble:n,isRequest:!0}),s),this},requestEnd:function(){return Bc(o,u,"drag",c,"End",O(O({},a.requestEnd()),{requestAble:n,isRequest:!0}),s),this}};return Bc(o,u,"drag",c,"Start",O(O({},a.requestStart(t)),{requestAble:n,isRequest:!0}),s),s?i.request(t).requestEnd():i},e.destroy=function(){this.componentWillUnmount()},e.updateRenderPoses=function(){var t=this.state,n=this.props,e=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,l=t.left,f=t.top,p=n.padding||{},d=p.left,d=void 0===d?0:d,h=p.top,h=void 0===h?0:h,g=p.bottom,g=void 0===g?0:g,p=p.right,p=void 0===p?0:p,o=o?4:3,n=n.groupable?e:J(e,[l,f]);t.renderPoses=[J(a,Hu(i,[-d,-h],r,n,o)),J(s,Hu(i,[p,-h],r,n,o)),J(u,Hu(i,[-d,g],r,n,o)),J(c,Hu(i,[p,g],r,n,o))]},e.checkUpdate=function(){var t=this.props,n=t.target,e=t.container,t=t.parentMoveable,r=this.state,i=r.target,r=r.container;(i||n)&&(this.updateAbles(),Yu(i,n)&&Yu(r,e)||((i=e||this.controlBox)&&this.unsetAbles(),this.updateState({target:n,container:e}),!t&&i&&this.updateRect("End",!1,!1)))},e.triggerEvent=function(t,n){this._emitter.trigger(t,n);t=this.props[t];return t&&t(n)},e.useCSS=function(t,n){var e,r,i=this.props.customStyledMap,o=t+n;return i[o]||(i[o]=(e=t,r=xe(n),function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=r,t.tag=e,t}return ma(t,n),t}(xa))),i[o]},e.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(t){t.unset&&t.unset(n)})},e.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var e=this.props,r=e.triggerAblesSimultaneously,t=t.filter(function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])}),i="drag".concat(n,"Start"),o="pinch".concat(n,"Start"),n="drag".concat(n,"ControlStart"),i=Wu(t,[i,o],r),o=Wu(t,[n],r);this.enabledAbles=t,this.targetAbles=i,this.controlAbles=o},e.updateState=function(t,n){if(n)this.isUnmounted||this.setState(t);else{var e,r=this.state;for(e in t)r[e]=t[e]}},e.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(t){return t&&n[t.name]})},e.renderAbles=function(){var r,i,o,a,n=this,t=this.props.triggerAblesSimultaneously,e={createElement:m};return t=Wu(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(n,e)||[]}),r=t.reduce(function(t,n){return t.concat(n)},[]).filter(function(t){return t}),i=function(t){return t.key},o=[],a={},r.forEach(function(t,n){var n=i(t,n,r),e=a[n];e||(a[n]=e=[],o.push(e)),e.push(t)}),o.map(function(t){return t[0]})},e.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e._updateObserver=function(t){var n=this.props,e=n.target;window.ResizeObserver&&e&&n.useResizeObserver?t.target===e&&this._observer||((n=new ResizeObserver(this.checkUpdateRect)).observe(e,{box:"border-box"}),this._observer=n):null!=(t=this._observer)&&t.disconnect()},e._updateEvents=function(){var t=this.controlBox.getElement(),n=this.targetAbles.length,e=this.controlAbles.length,r=this.props,r=r.dragTarget||r.target;(!n&&this.targetGesto||this._isTargetChanged(!0))&&(ku(this,"targetGesto"),this.updateState({gesto:null})),e||ku(this,"controlGesto"),r&&n&&!this.targetGesto&&(this.targetGesto=zc(this,r,"")),!this.controlGesto&&e&&(this.controlGesto=Gc(this,t,"controlAbles","Control"))},e._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},e._renderLines=function(){var t=this.props,n=t.edge,e=t.zoom;if(t.hideDefaultLines)return[];var t=this.state.renderPoses,r={createElement:m};return[Na(r,n?"n":"",t[0],t[1],e,0),Na(r,n?"e":"",t[1],t[3],e,1),Na(r,n?"w":"",t[0],t[2],e,2),Na(r,n?"s":"",t[2],t[3],e,3)]},e._isTargetChanged=function(t){var n=this.props,e=n.dragTarget||n.target,r=this._prevTarget,i=this._prevDragArea,n=n.dragArea;return!n&&r!==e||(t||n)&&i!==n},e._updateNativeEvents=function(){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,t=St(s);if(this._isTargetChanged())for(var n in s){var e=s[n];e&&e.destroy(),s[n]=null}a&&(i=this.enabledAbles,t.forEach(function(t){var n=Wu(i,[t]),e=0<n.length,r=s[t];e?(r||(r=new Tc(a,o,t),s[t]=r),r.setAbles(n)):r&&(r.destroy(),s[t]=null)}))},i.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},i}(Zt),Zt={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(e,r){var t=e.props.targets||[],n=(e.moveables=[],e.state),i={left:n.left,top:n.top},o=e.props;return t.map(function(t,n){return r.createElement(_c,{key:"moveable"+n,ref:s(e,"moveables",n),target:t,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,parentMoveable:e,parentPosition:i})})}},Ac=Ma("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,n){n.isRequest||Pt(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,n){this.dragStart(t,n)},dragGroupStart:function(t,n){this.dragStart(t,n),n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){this.endEvent(t);var e=t.state.target,r=n.inputEvent,i=n.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);n.isDrag&&!o||this.unset(t),!r||!i||n.isDrag||t.isMoveableElement(i)||o||(r=e.contains(i),it(t,"onClick",rt(t,n,{isDouble:n.isDouble,inputTarget:i,isTarget:e===i,containsTarget:r})))},dragGroupEnd:function(t,n){this.endEvent(t);var e,r,i,o=n.inputEvent,a=n.inputTarget;o&&a&&!n.isDrag&&!t.isMoveableElement(a)&&n.datas.inputTarget!==a&&(r=-1<(e=(o=t.props.targets).indexOf(a)),i=!1,-1===e&&(i=-1<(e=h(o,function(t){return t.contains(a)}))),it(t,"onClickGroup",rt(t,n,{isDouble:n.isDouble,targets:o,inputTarget:a,targetIndex:e,isTarget:r,containsTarget:i})))},dragControlEnd:function(t,n){this.dragEnd(t,n)},dragGroupControlEnd:function(t,n){this.dragEnd(t,n)},endEvent:function(t){var n=this;xt(function(){n.unset(t)})},unset:function(t){v(window,"click",t.onPreventClick,!0)}});function Ic(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),O(O({},t),{datas:n})}var kc=Ma("edgeDraggable",{dragControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;t=n.inputEvent.target;return a(t,X("direction"))&&a(t,X("line"))},dragControlStart:function(t,n){return j.dragStart(t,Ic(n))},dragControl:function(t,n){return j.drag(t,Ic(n))},dragControlEnd:function(t,n){return j.dragEnd(t,Ic(n))},dragGroupControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;t=n.inputEvent.target;return a(t,X("direction"))&&a(t,X("line"))},dragGroupControlStart:function(t,n){return j.dragGroupStart(t,Ic(n))},dragGroupControl:function(t,n){return j.dragGroup(t,Ic(n))},dragGroupControlEnd:function(t,n){return j.dragGroupEnd(t,Ic(n))},unset:function(t){return j.unset(t)}}),Fc={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Nc=t,Wc=We,Yc=sa,t=[Oc,Zr,vo,Do,j,kc,po,wo,Mo,Vo,oa,lo,Zo,fo,Yt,wc,Zt,Fc,Ac,Lo,Pc].reduce(function(t,n){return O(O({},t),n.props)},{}),jc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n}(function(i){function t(t,n){void 0===n&&(n={});var e=i.call(this)||this,n=(e.tempElement=document.createElement("div"),o({},n)),r={},t=(Yc.forEach(function(n){r["on ".concat(n).replace(/[\s-_]([a-z])/g,function(t,n){return n.toUpperCase()})]=function(t){return e.trigger(n,t)}}),nn(m(ga,o({ref:x(e,"innerMoveable"),parentElement:t},n,r)),e.tempElement),n.target);return at(t)&&1<t.length&&e.updateRect(),e}e(t,i);var n=t.prototype;return n.setState=function(t,n){this.innerMoveable.setState(t,n)},n.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},n.dragStart=function(t){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t)},n.destroy=function(){nn(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,e,a):i(n,e))||a);return 3<o&&a&&Object.defineProperty(n,e,a),a}([u(Wc,function(t,r){t[r]||(t[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=this.getMoveable();if(e&&e[r])return e[r].apply(e,t)})}),u(Nc,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})})],t)}(ee));var qc,Xc={__proto__:null,default:jc,PROPERTIES:Nc,METHODS:Wc,EVENTS:Yc,PROPS_MAP:t,getElementInfo:function(t,n,e){return wi(t,t=n,n=void 0===(n=e)?t:n,!0)},makeAble:we};for(qc in Xc)jc[qc]=Xc[qc];return jc});
//# sourceMappingURL=moveable.min.js.map
