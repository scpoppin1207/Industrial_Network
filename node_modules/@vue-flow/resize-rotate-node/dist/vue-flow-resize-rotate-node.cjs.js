"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var j=require("vue"),Qr=require("@vue-flow/core");function bo(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.map(function(n){return n.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function So(t,r){return r.replace(/([^}{]*){/gm,function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function At(t,r){return function(e){e&&(t[r]=e)}}function ka(t,r,e){return function(n){n&&(t[r][e]=n)}}function ea(t,r){return function(e){var n=e.prototype;t.forEach(function(a){r(n,a)})}}function Eo(t,r){return r===void 0&&(r={}),function(e,n){t.forEach(function(a){var i=r[a]||a;i in e||(e[i]=function(){for(var o,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var f=(o=this[n])[a].apply(o,s);return f===this[n]?this:f})})}}var xo=function(){function t(){this.keys=[],this.values=[]}var r=t.prototype;return r.get=function(e){return this.values[this.keys.indexOf(e)]},r.set=function(e,n){var a=this.keys,i=this.values,o=a.indexOf(e),s=o===-1?a.length:o;a[s]=e,i[s]=n},t}(),yo=function(){function t(){this.object={}}var r=t.prototype;return r.get=function(e){return this.object[e]},r.set=function(e,n){this.object[e]=n},t}(),Mo=typeof Map=="function",_o=function(){function t(){}var r=t.prototype;return r.connect=function(e,n){this.prev=e,this.next=n,e&&(e.next=this),n&&(n.prev=this)},r.disconnect=function(){var e=this.prev,n=this.next;e&&(e.next=n),n&&(n.prev=e)},r.getIndex=function(){for(var e=this,n=-1;e;)e=e.prev,++n;return n},t}();function Do(t,r){var e=[],n=[];return t.forEach(function(a){var i=a[0],o=a[1],s=new _o;e[i]=s,n[o]=s}),e.forEach(function(a,i){a.connect(e[i-1])}),t.filter(function(a,i){return!r[i]}).map(function(a,i){var o=a[0],s=a[1];if(o===s)return[0,0];var u=e[o],f=n[s-1],l=u.getIndex();u.disconnect(),f?u.connect(f,f.next):u.connect(void 0,e[0]);var c=u.getIndex();return[l,c]})}var Co=function(){function t(e,n,a,i,o,s,u,f){this.prevList=e,this.list=n,this.added=a,this.removed=i,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=f}var r=t.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var e=Do(this.changedBeforeAdded,this.fixed),n=this.changed,a=[];this.cacheOrdered=e.filter(function(i,o){var s=i[0],u=i[1],f=n[o],l=f[0],c=f[1];if(s!==u)return a.push([l,c]),!0}),this.cachePureChanged=a},t}();function ve(t,r,e){var n=Mo?Map:e?yo:xo,a=e||function(b){return b},i=[],o=[],s=[],u=t.map(a),f=r.map(a),l=new n,c=new n,v=[],d=[],p={},h=[],g=0,m=0;return u.forEach(function(b,S){l.set(b,S)}),f.forEach(function(b,S){c.set(b,S)}),u.forEach(function(b,S){var E=c.get(b);typeof E=="undefined"?(++m,o.push(S)):p[E]=m}),f.forEach(function(b,S){var E=l.get(b);typeof E=="undefined"?(i.push(S),++g):(s.push([E,S]),m=p[S]||0,v.push([E-m,S-g]),d.push(S===E),E!==S&&h.push([E,S]))}),o.reverse(),new Co(t,r,i,o,h,s,v,d)}var Ro=function(){function t(e,n){e===void 0&&(e=[]),this.findKeyCallback=n,this.list=[].slice.call(e)}var r=t.prototype;return r.update=function(e){var n=[].slice.call(e),a=ve(this.list,n,this.findKeyCallback);return this.list=n,a},t}(),wo="function",Oo="object",Po="string",To="number",Fa="undefined",Na=typeof window!==Fa,Bo=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],vt=1e-7,Vr={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,r){return t*r/100},vw:function(t,r){return r===void 0&&(r=window.innerWidth),t/100*r},vh:function(t,r){return r===void 0&&(r=window.innerHeight),t/100*r},vmax:function(t,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),t/100*r},vmin:function(t,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),t/100*r}};function zo(t,r,e,n){return(t*n+r*e)/(e+n)}function zr(t){return typeof t===Fa}function Ft(t){return t&&typeof t===Oo}function nr(t){return Array.isArray(t)}function Gt(t){return typeof t===Po}function Xe(t){return typeof t===To}function La(t){return typeof t===wo}function Io(t,r){var e=t===""||t==" ",n=r===""||r==" ";return n&&e||t===r}function Ya(t,r,e,n,a){var i=bn(t,r,e);return i?e:Go(t,r,e+1,n,a)}function bn(t,r,e){if(!t.ignore)return null;var n=r.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(n)}function Go(t,r,e,n,a){for(var i=function(f){var l=r[f].trim();if(l===t.close&&!bn(t,r,f))return{value:f};var c=f,v=Rr(a,function(d){var p=d.open;return p===l});if(v&&(c=Ya(v,r,f,n,a)),c===-1)return o=f,"break";f=c,o=f},o,s=e;s<n;++s){var u=i(s);if(s=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Xa(t,r){var e=Gt(r)?{separator:r}:r,n=e.separator,a=n===void 0?",":n,i=e.isSeparateFirst,o=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,u=s===void 0?o:s,f=e.openCloseCharacters,l=f===void 0?Bo:f,c=l.map(function(x){var C=x.open,D=x.close;return C===D?C:C+"|"+D}).join("|"),v="(\\s*"+a+"\\s*|"+c+"|\\s+)",d=new RegExp(v,"g"),p=t.split(d).filter(Boolean),h=p.length,g=[],m=[];function b(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var S=function(x){var C=p[x].trim(),D=x,_=Rr(l,function(R){var T=R.open;return T===C}),w=Rr(l,function(R){var T=R.close;return T===C});if(_){if(D=Ya(_,p,x,h,l),D!==-1&&u)return b()&&i||(g.push(p.slice(x,D+1).join("")),x=D,i)?(E=x,"break"):(E=x,"continue")}else{if(w&&!bn(w,p,x))throw new Error("invalid format: "+w.close);if(Io(C,a)&&!o)return b(),i?(E=x,"break"):(E=x,"continue")}D===-1&&(D=h-1),m.push(p.slice(x,D+1).join("")),x=D,E=x},E,M=0;M<h;++M){var y=S(M);if(M=E,y==="break")break}return m.length&&g.push(m.join("")),g}function Ut(t){return Xa(t,"")}function er(t){return Xa(t,",")}function Va(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function Ir(t){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!r)return{prefix:"",unit:"",value:NaN};var e=r[1],n=r[2],a=r[3];return{prefix:e,unit:a,value:parseFloat(n)}}function Ao(t){return t.replace(/[\s-_]([a-z])/g,function(r,e){return e.toUpperCase()})}function we(t,r){return r===void 0&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(e,n,a){return""+n+r+a.toLowerCase()})}function ne(){return Date.now?Date.now():new Date().getTime()}function Nt(t,r,e){e===void 0&&(e=-1);for(var n=t.length,a=0;a<n;++a)if(r(t[a],a,t))return a;return e}function Rr(t,r,e){var n=Nt(t,r);return n>-1?t[n]:e}var Sn=function(){var t=ne(),r=Na&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return r?r.bind(window):function(e){var n=ne(),a=window.setTimeout(function(){e(n-t)},1e3/60);return a}}(),ko=function(){var t=Na&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(r){clearTimeout(r)}}();function Wa(t){if(Object.keys)return Object.keys(t);var r=[];for(var e in r)r.push(e);return r}function ut(t,r){var e=Ir(t),n=e.value,a=e.unit;if(Ft(r)){var i=r[a];if(i){if(La(i))return i(n);if(Vr[a])return Vr[a](n,i)}}else if(a==="%")return n*r/100;return Vr[a]?Vr[a](n):n}function Fo(t,r,e){return Math.max(r,Math.min(t,e))}function na(t,r,e,n){return n===void 0&&(n=t[0]/t[1]),[[q(r[0],vt),q(r[0]/n,vt)],[q(r[1]*n,vt),q(r[1],vt)]].filter(function(a){return a.every(function(i,o){var s=r[o],u=q(s,vt);return e?i<=s||i<=u:i>=s||i>=u})})[0]||t}function No(t,r,e,n){if(!n)return t.map(function(d,p){return Fo(d,r[p],e[p])});var a=t[0],i=t[1],o=n===!0?a/i:n,s=na(t,r,!1,o),u=s[0],f=s[1],l=na(t,e,!0,o),c=l[0],v=l[1];return a<u||i<f?(a=u,i=f):(a>c||i>v)&&(a=c,i=v),[a,i]}function Lo(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return e}function wr(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return r?e/r:0}function ot(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function Yo(t){return[0,1].map(function(r){return wr(t.map(function(e){return e[r]}))})}function Ve(t){var r=Yo(t),e=ot(r,t[0]),n=ot(r,t[1]);return e<n&&n-e<Math.PI||e>n&&n-e<-Math.PI?1:-1}function Xt(t,r){return Math.sqrt(Math.pow((r?r[0]:0)-t[0],2)+Math.pow((r?r[1]:0)-t[1],2))}function q(t,r){if(!r)return t;var e=1/r;return Math.round(t/r)/e}function aa(t,r){return t.forEach(function(e,n){t[n]=q(t[n],r)}),t}function It(t,r){return t.classList?t.classList.contains(r):!!t.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function Xo(t,r){t.classList?t.classList.add(r):t.className+=" "+r}function Vo(t,r){if(t.classList)t.classList.remove(r);else{var e=new RegExp("(\\s|^)"+r+"(\\s|$)");t.className=t.className.replace(e," ")}}function Bt(t,r,e,n){t.addEventListener(r,e,n)}function Mt(t,r,e,n){t.removeEventListener(r,e,n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var We=function(t,r){return We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},We(t,r)};function ar(t,r){We(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var qt=function(){return qt=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},qt.apply(this,arguments)};function Ha(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function Wo(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function He(t,r){if(t===r)return!1;for(var e in t)if(!(e in r))return!0;for(var e in r)if(t[e]!==r[e])return!0;return!1}function En(t,r){var e=Object.keys(t),n=Object.keys(r),a=ve(e,n,function(u){return u}),i={},o={},s={};return a.added.forEach(function(u){var f=n[u];i[f]=r[f]}),a.removed.forEach(function(u){var f=e[u];o[f]=t[f]}),a.maintained.forEach(function(u){var f=u[0],l=e[f],c=[t[l],r[l]];t[l]!==r[l]&&(s[l]=c)}),{added:i,removed:o,changed:s}}function qa(t){t.forEach(function(r){r()})}function ia(t){var r=0;return t.map(function(e){return e==null?"$compat"+ ++r:""+e})}function oa(t,r,e,n){if(Gt(t)||Xe(t))return new $o("text_"+t,r,e,n,null,{});var a=typeof t.type=="string"?Uo:t.type.prototype.render?Zo:Ko;return new a(t.type,r,e,n,t.ref,t.props)}function ja(t){var r=[];return t.forEach(function(e){r=r.concat(nr(e)?ja(e):e)}),r}function sa(t){var r=t.className,e=Ha(t,["className"]);return r!=null&&(e.class=r),delete e.style,delete e.children,e}function Oe(t,r){if(!r)return t;for(var e in r)zr(t[e])&&(t[e]=r[e]);return t}function Ot(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=r||{},i=a.key,o=a.ref,s=Ha(a,["key","ref"]);return{type:t,key:i,ref:o,props:qt(qt({},s),{children:ja(e).filter(function(u){return u!=null&&u!==!1})})}}var Gr=function(){function t(e,n,a,i,o,s){s===void 0&&(s={}),this.type=e,this.key=n,this.index=a,this.container=i,this.ref=o,this.props=s,this._providers=[]}var r=t.prototype;return r._should=function(e,n){return!0},r._update=function(e,n,a,i){if(this.base&&!Gt(n)&&!i&&!this._should(n.props,a))return!1;this.original=n,this._setState(a);var o=this.props;return Gt(n)||(this.props=n.props,this.ref=n.ref),this._render(e,this.base?o:{},a),!0},r._mounted=function(){var e=this.ref;e&&e(this.base)},r._setState=function(e){},r._updated=function(){var e=this.ref;e&&e(this.base)},r._destroy=function(){var e=this.ref;e&&e(null)},t}();function Ho(t,r,e){var n=En(t,r),a=n.added,i=n.removed,o=n.changed;for(var s in a)e.setAttribute(s,a[s]);for(var s in o)e.setAttribute(s,o[s][1]);for(var s in i)e.removeAttribute(s)}function qo(t,r,e){var n=En(t,r),a=n.added,i=n.removed,o=n.changed;for(var s in i)e.removeEventListener(s);for(var s in a)e.addEventListener(s,a[s]);for(var s in o)e.removeEventListener(s),e.addEventListener(s,o[s][1]);for(var s in i)e.removeEventListener(s)}function jo(t,r,e){var n=e.style,a=En(t,r),i=a.added,o=a.removed,s=a.changed;for(var u in i){var f=we(u,"-");n.setProperty?n.setProperty(f,i[u]):n[f]=i[u]}for(var u in s){var f=we(u,"-");n.setProperty?n.setProperty(f,s[u][1]):n[f]=s[u][1]}for(var u in o){var f=we(u,"-");n.removeProperty?n.removeProperty(f):n[f]=""}}function ua(t){var r={},e={};for(var n in t)n.indexOf("on")===0?e[n.replace("on","").toLowerCase()]=t[n]:r[n]=t[n];return{attributes:r,events:e}}var $o=function(t){ar(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e._render=function(n){var a=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),n.push(function(){i?a._mounted():a._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},r}(Gr),Uo=function(t){ar(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.events={},n._isSVG=!1,n}var e=r.prototype;return e.addEventListener=function(n,a){var i=this.events;i[n]=function(o){o.nativeEvent=o,a(o)},this.base.addEventListener(n,i[n])},e.removeEventListener=function(n){var a=this.events;this.base.removeEventListener(n,a[n]),delete a[n]},e._should=function(n){return He(this.props,n)},e._render=function(n,a){var i=this,o=!this.base;if(o){var s=this._hasSVG();this._isSVG=s;var u=this.props.portalContainer;if(!u){var f=this.type;s?u=document.createElementNS("http://www.w3.org/2000/svg",f):u=document.createElement(f)}this.base=u}Ar(this,this._providers,this.props.children,n,null);var l=this.base,c=ua(a),v=c.attributes,d=c.events,p=ua(this.props),h=p.attributes,g=p.events;return Ho(sa(v),sa(h),l),qo(d,g,this),jo(a.style||{},this.props.style||{},l),n.push(function(){o?i._mounted():i._updated()}),!0},e._unmount=function(){var n=this.events,a=this.base;for(var i in n)a.removeEventListener(i,n[i]);this._providers.forEach(function(o){o._unmount()}),this.events={},this.props.portalContainer||a.parentNode.removeChild(a)},e._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var n=xn(this.container);return n&&"ownerSVGElement"in n},r}(Gr);function xn(t){if(!t)return null;var r=t.base;return r instanceof Node?r:xn(t.container)}function Or(t){if(!t)return null;if(t instanceof Node)return t;var r=t.$_provider._providers;return r.length?Or(r[0].base):null}var Ko=function(t){ar(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e._render=function(n){var a=this.type(this.props);return Ar(this,this._providers,a?[a]:[],n),!0},e._unmount=function(){this._providers.forEach(function(n){n._unmount()})},r}(Gr),$a=function(t){ar(r,t);function r(n){var a=t.call(this,"container","container",0,null)||this;return a.base=n,a}var e=r.prototype;return e._render=function(){return!0},e._unmount=function(){},r}(Gr),Zo=function(t){ar(r,t);function r(n,a,i,o,s,u){return u===void 0&&(u={}),t.call(this,n,a,i,o,s,Oe(u,n.defaultProps))||this}var e=r.prototype;return e._should=function(n,a){return this.base.shouldComponentUpdate(Oe(n,this.type.defaultProps),a||this.base.state)},e._render=function(n,a){var i=this;this.props=Oe(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var s=this.base,u=s.state,f=s.render();f&&f.props&&!f.props.children.length&&(f.props.children=this.props.children),Ar(this,this._providers,f?[f]:[],n),n.push(function(){o?(i._mounted(),s.componentDidMount()):(i._updated(),s.componentDidUpdate(a,u))})},e._setState=function(n){var a=this.base;!a||!n||(a.state=n)},e._unmount=function(){this._providers.forEach(function(n){n._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},r}(Gr),yn=function(){function t(e){e===void 0&&(e={}),this.props=e,this.state={},this.$_timer=0,this.$_state={}}var r=t.prototype;return r.shouldComponentUpdate=function(e,n){return!0},r.render=function(){return null},r.setState=function(e,n,a){var i=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=qt(qt({},this.$_state),e),a?this.$_setState(n,a):this.$_timer=setTimeout(function(){i.$_timer=0,i.$_setState(n,a)})},r.forceUpdate=function(e){this.setState({},e,!0)},r.componentDidMount=function(){},r.componentDidUpdate=function(e,n){},r.componentWillUnmount=function(){},r.$_setState=function(e,n){var a=[],i=this.$_provider,o=Ar(i.container,[i],[i.original],a,qt(qt({},this.state),this.$_state),n);o&&(e&&a.push(e),qa(a))},t}(),Mn=function(t){ar(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e.shouldComponentUpdate=function(n,a){return He(this.props,n)||He(this.state,a)},r}(yn),Jo=function(t){ar(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e.componentDidMount=function(){var n=this.props,a=n.element,i=n.container;this._portalProvider=new $a(i),te(a,i,this._portalProvider)},e.componentDidUpdate=function(){var n=this.props,a=n.element,i=n.container;te(a,i,this._portalProvider)},e.componentWillUnmount=function(){var n=this.props.container;te(null,n,this._portalProvider),this._portalProvider=null},r}(Mn);function Qo(t,r,e){var n=[];Ar(t,t._providers,r,n,e),qa(n)}function ts(t,r){for(var e=t._providers,n=e.length,a=r.index+1;a<n;++a){var i=Or(e[a].base);if(i)return i}return null}function rs(t,r,e){var n=e.map(function(u){return Gt(u)?null:u.key}),a=ia(r.map(function(u){return u.key})),i=ia(n),o=ve(a,i,function(u){return u});o.removed.forEach(function(u){r.splice(u,1)[0]._unmount()}),o.ordered.forEach(function(u){var f=u[0],l=u[1],c=r.splice(f,1)[0];r.splice(l,0,c);var v=Or(c.base),d=Or(r[l+1]&&r[l+1].base);v&&v.parentNode.insertBefore(v,d)}),o.added.forEach(function(u){r.splice(u,0,oa(e[u],n[u],u,t))});var s=o.maintained.filter(function(u){u[0];var f=u[1],l=e[f],c=r[f],v=Gt(l)?"text_"+l:l.type;return v!==c.type?(c._unmount(),r.splice(f,1,oa(l,n[f],f,t)),!0):(c.index=f,!1)});return Wo(o.added,s.map(function(u){u[0];var f=u[1];return f}))}function Ar(t,r,e,n,a,i){var o=rs(t,r,e),s=r.filter(function(f,l){return f._update(n,e[l],a,i)}),u=xn(t);return u&&o.reverse().forEach(function(f){var l=r[f],c=Or(l.base);if(!!c&&u!==c&&!c.parentNode){var v=ts(t,l);u.insertBefore(c,v)}}),s.length>0}function te(t,r,e){e===void 0&&(e=r.__REACT_COMPAT__);var n=!!e;return e||(e=new $a(r)),Qo(e,t?[t]:[]),n||(r.__REACT_COMPAT__=e),e}function fa(t,r,e){var n=r.__REACT_COMPAT__;t&&!n&&(r.innerHTML=""),te(t,r,n),e&&e()}function es(t,r){return Ot(Jo,{element:t,container:r})}var ns="simple-1.1.0";function _n(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return!0;return!1}function Ua(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return t[n];return null}function Ka(t){var r=t;if(typeof r=="undefined"){if(typeof navigator=="undefined"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function Dn(t,r){try{return new RegExp(t,"g").exec(r)}catch{return null}}function as(){if(typeof navigator=="undefined"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,r=t.brands||t.uaList;return!!(r&&r.length)}function is(t,r){var e=Dn("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return e?e[3]:""}function qe(t){return t.replace(/_/g,".")}function Er(t,r){var e=null,n="-1";return _n(t,function(a){var i=Dn("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!i||a.brand?!1:(e=a,n=i[3]||"-1",a.versionAlias?n=a.versionAlias:a.versionTest&&(n=is(a.versionTest.toLowerCase(),r)||n),n=qe(n),!0)}),{preset:e,version:n}}function Sr(t,r){var e={brand:"",version:"-1"};return _n(t,function(n){var a=Za(r,n);return a?(e.brand=n.id,e.version=n.versionAlias||a.version,e.version!=="-1"):!1}),e}function Za(t,r){return Ua(t,function(e){var n=e.brand;return Dn(""+r.test,n.toLowerCase())})}var je=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Ja=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],$e=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Qa=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],ti=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function ri(t){return!!Er(Qa,t).preset}function os(t){var r=Ka(t),e=!!/mobi/g.exec(r),n={name:"unknown",version:"-1",majorVersion:-1,webview:ri(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=Er(je,r),o=i.preset,s=i.version,u=Er(ti,r),f=u.preset,l=u.version,c=Er(Ja,r);if(n.chromium=!!c.preset,n.chromiumVersion=c.version,!n.chromium){var v=Er($e,r);n.webkit=!!v.preset,n.webkitVersion=v.version}return f&&(a.name=f.id,a.version=l,a.majorVersion=parseInt(l,10)),o&&(n.name=o.id,n.version=s,n.webview&&a.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:e,isHints:!1}}function ss(t){var r=navigator.userAgentData,e=(r.uaList||r.brands).slice(),n=t&&t.fullVersionList,a=r.mobile||!1,i=e[0],o=(t&&t.platform||r.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Sr(Qa,e).brand||ri(Ka())},u={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&_n($e,function(p){return Za(e,p)});var f=Sr(Ja,e);if(s.chromium=!!f.brand,s.chromiumVersion=f.version,!s.chromium){var l=Sr($e,e);s.webkit=!!l.brand,s.webkitVersion=l.version}var c=Ua(ti,function(p){return new RegExp(""+p.test,"g").exec(o)});if(u.name=c?c.id:"",t&&(u.version=t.platformVersion),n&&n.length){var v=Sr(je,n);s.name=v.brand||s.name,s.version=v.version||s.version}else{var d=Sr(je,e);s.name=d.brand||s.name,s.version=d.brand&&t?t.uaFullVersion:d.version}return s.webkit&&(u.name=a?"ios":"mac"),u.name==="ios"&&s.webview&&(s.version="-1"),u.version=qe(u.version),s.version=qe(s.version),u.majorVersion=parseInt(u.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:u,isMobile:a,isHints:!0}}function us(t){return typeof t=="undefined"&&as()?ss():os(t)}function fs(t,r,e,n,a,i){for(var o=0;o<a;++o){var s=e+o*a,u=n+o*a;t[s]+=t[u]*i,r[s]+=r[u]*i}}function ls(t,r,e,n,a){for(var i=0;i<a;++i){var o=e+i*a,s=n+i*a,u=t[o],f=r[o];t[o]=t[s],t[s]=u,r[o]=r[s],r[s]=f}}function cs(t,r,e,n,a){for(var i=0;i<n;++i){var o=e+i*n;t[o]/=a,r[o]/=a}}function ei(t,r,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),a=0;a<e;++a)n[a*e+r-1]=0,n[(r-1)*e+a]=0;return n[(r-1)*(e+1)]=1,n}function Lt(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=t.slice(),n=et(r),a=0;a<r;++a){var i=r*a+a;if(!q(e[i],vt)){for(var o=a+1;o<r;++o)if(e[r*a+o]){ls(e,n,a,o,r);break}}if(!q(e[i],vt))return[];cs(e,n,a,r,e[i]);for(var o=0;o<r;++o){var s=o,u=o+a*r,f=e[u];!q(f,vt)||a===o||fs(e,n,s,a,r,-f)}}return n}function vs(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r;++n)for(var a=0;a<r;++a)e[a*r+n]=t[r*n+a];return e}function ds(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=t[r*r-1],a=0;a<r-1;++a)e[a]=t[r*(r-1)+a]/n;return e[r-1]=0,e}function ps(t,r){for(var e=et(r),n=0;n<r-1;++n)e[r*(r-1)+n]=t[n]||0;return e}function kr(t,r){for(var e=t.slice(),n=t.length;n<r-1;++n)e[n]=0;return e[r-1]=1,e}function Wt(t,r,e){if(r===void 0&&(r=Math.sqrt(t.length)),r===e)return t;for(var n=et(e),a=Math.min(r,e),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)n[i*e+o]=t[i*r+o];n[(i+1)*e-1]=t[(i+1)*r-1],n[(e-1)*e+i]=t[(r-1)*r+i]}return n[e*e-1]=t[r*r-1],n}function Ue(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=et(t);return r.forEach(function(a){n=Z(n,a,t)}),n}function Z(t,r,e){e===void 0&&(e=Math.sqrt(t.length));var n=[],a=t.length/e,i=r.length/a;if(a){if(!i)return t}else return r;for(var o=0;o<e;++o)for(var s=0;s<i;++s){n[s*e+o]=0;for(var u=0;u<a;++u)n[s*e+o]+=t[u*e+o]*r[s*a+u]}return n}function H(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]+r[a];return n}function X(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]-r[a];return n}function hs(t,r){return r===void 0&&(r=t.length===6),r?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function ni(t,r){return r===void 0&&(r=t.length===9),r?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function xt(t,r,e){e===void 0&&(e=r.length);var n=Z(t,r,e),a=n[e-1];return n.map(function(i){return i/a})}function gs(t,r){return Z(t,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function ms(t,r){return Z(t,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function bs(t,r){return Z(t,dr(r,4))}function Wr(t,r){var e=r[0],n=e===void 0?1:e,a=r[1],i=a===void 0?1:a,o=r[2],s=o===void 0?1:o;return Z(t,[n,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],4)}function jt(t,r){return xt(dr(r,3),kr(t,3))}function Pe(t,r){var e=r[0],n=e===void 0?0:e,a=r[1],i=a===void 0?0:a,o=r[2],s=o===void 0?0:o;return Z(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,i,s,1],4)}function la(t,r){return Z(t,r,4)}function dr(t,r){var e=Math.cos(t),n=Math.sin(t),a=et(r);return a[0]=e,a[1]=n,a[r]=-n,a[r+1]=e,a}function et(t){for(var r=t*t,e=[],n=0;n<r;++n)e[n]=n%(t+1)?0:1;return e}function ai(t,r){for(var e=et(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[(r+1)*a]=t[a];return e}function Pr(t,r){for(var e=et(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[r*(r-1)+a]=t[a];return e}function Cn(t,r,e,n,a,i,o,s){var u=t[0],f=t[1],l=r[0],c=r[1],v=e[0],d=e[1],p=n[0],h=n[1],g=a[0],m=a[1],b=i[0],S=i[1],E=o[0],M=o[1],y=s[0],x=s[1],C=[u,0,l,0,v,0,p,0,f,0,c,0,d,0,h,0,1,0,1,0,1,0,1,0,0,u,0,l,0,v,0,p,0,f,0,c,0,d,0,h,0,1,0,1,0,1,0,1,-g*u,-m*u,-b*l,-S*l,-E*v,-M*v,-y*p,-x*p,-g*f,-m*f,-b*c,-S*c,-E*d,-M*d,-y*h,-x*h],D=Lt(C,8);if(!D.length)return[];var _=Z(D,[g,m,b,S,E,M,y,x],8);return _[8]=1,Wt(vs(_),3,4)}function Ss(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ii(t){return ur(Qt(t))}function Es(t,r){var e=xt(t,[r[0],r[1]||0,r[2]||0,1],4),n=e[3]||1;return[e[0]/n,e[1]/n,e[2]/n]}function ur(t){var r=Ss();return t.forEach(function(e){var n=e.matrixFunction,a=e.functionValue;!n||(r=n(r,a))}),r}function Qt(t){var r=nr(t)?t:Ut(t);return r.map(function(e){var n=Va(e),a=n.prefix,i=n.value,o=null,s=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=er(i).map(function(_){return parseFloat(_)}),l=f[0],c=f[1],v=c===void 0?0:c,d=f[2],p=d===void 0?0:d;o=Pe,u=[l,v,p]}else if(a==="translateY"){var v=parseFloat(i);o=Pe,u=[0,v,0]}else if(a==="translateZ"){var p=parseFloat(i);o=Pe,u=[0,0,p]}else if(a==="scale"||a==="scale3d"){var h=er(i).map(function(_){return parseFloat(_)}),g=h[0],m=h[1],b=m===void 0?g:m,S=h[2],E=S===void 0?1:S;o=Wr,u=[g,b,E]}else if(a==="scaleX"){var g=parseFloat(i);o=Wr,u=[g,1,1]}else if(a==="scaleY"){var b=parseFloat(i);o=Wr,u=[1,b,1]}else if(a==="scaleZ"){var E=parseFloat(i);o=Wr,u=[1,1,E]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var M=Ir(i),y=M.unit,x=M.value,C=y==="rad"?x:x*Math.PI/180;a==="rotate"||a==="rotateZ"?(s="rotateZ",o=bs):a==="rotateX"?o=gs:a==="rotateY"&&(o=ms),u=C}else if(a==="matrix3d")o=la,u=er(i).map(function(_){return parseFloat(_)});else if(a==="matrix"){var D=er(i).map(function(_){return parseFloat(_)});o=la,u=[D[0],D[1],0,0,D[2],D[3],0,0,0,0,1,0,D[4],D[5],0,1]}else s="";return{name:a,functionName:s,value:i,matrixFunction:o,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ke=function(t,r){return Ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},Ke(t,r)};function xs(t,r){Ke(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var oi=typeof Map=="function"?void 0:function(){var t=0;return function(r){return r.__DIFF_KEY__||(r.__DIFF_KEY__=++t)}}(),ys=function(t){xs(r,t);function r(e){return e===void 0&&(e=[]),t.call(this,e,oi)||this}return r}(Ro);function Ms(t,r){return ve(t,r,oi)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _s(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function _t(t){return q(t,vt)}function Ds(t,r){return t.every(function(e,n){return _t(e-r[n])===0})}function Cs(t,r){return!_t(t[0]-r[0])&&!_t(t[1]-r[1])}function si(t){return t.length<3?0:Math.abs(Lo(t.map(function(r,e){var n=t[e+1]||t[0];return r[0]*n[1]-n[0]*r[1]})))/2}function ca(t,r){var e=r.width,n=r.height,a=r.left,i=r.top,o=de(t),s=o.minX,u=o.minY,f=o.maxX,l=o.maxY,c=e/(f-s),v=n/(l-u);return t.map(function(d){return[a+(d[0]-s)*c,i+(d[1]-u)*v]})}function de(t){var r=t.map(function(n){return n[0]}),e=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,r),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,e)}}function Ze(t,r,e){var n=t[0],a=t[1],i=de(r),o=i.minX,s=i.maxX,u=[[o,a],[s,a]],f=ae(u[0],u[1]),l=Je(r),c=[];if(l.forEach(function(p){var h=ae(p[0],p[1]),g=p[0];if(Ds(f,h))c.push({pos:t,line:p,type:"line"});else{var m=fi(ui(f,h),[u,p]);m.forEach(function(b){p.some(function(S){return Cs(S,b)})?c.push({pos:b,line:p,type:"point"}):_t(g[1]-a)!==0&&c.push({pos:b,line:p,type:"intersection"})})}}),!e&&Rr(c,function(p){return p[0]===n}))return!0;var v=0,d={};return c.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>n))if(g==="intersection")++v;else{if(g==="line")return;if(g==="point"){var b=Rr(m,function(M){return M[1]!==a}),S=d[h[0]],E=b[1]>a?1:-1;S?S!==E&&++v:d[h[0]]=E}}}),v%2===1}function ae(t,r){var e=t[0],n=t[1],a=r[0],i=r[1],o=a-e,s=i-n;Math.abs(o)<vt&&(o=0),Math.abs(s)<vt&&(s=0);var u=0,f=0,l=0;return o?s?(u=-s/o,f=1,l=-u*e-n):(f=1,l=-n):s&&(u=-1,l=e),[u,f,l]}function ui(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],o=r[1],s=r[2],u=e===0&&i===0,f=n===0&&o===0,l=[];if(u&&f)return[];if(u){var c=-a/n,v=-s/o;return c!==v?[]:[[-1/0,c],[1/0,c]]}else if(f){var d=-a/e,p=-s/i;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(e===0){var h=-a/n,g=-(o*h+s)/i;l=[[g,h]]}else if(i===0){var h=-s/o,g=-(n*h+a)/e;l=[[g,h]]}else if(n===0){var g=-a/e,h=-(i*g+s)/o;l=[[g,h]]}else if(o===0){var g=-s/i,h=-(e*g+a)/n;l=[[g,h]]}else{var g=(n*s-o*a)/(o*e-n*i),h=-(e*g+a)/n;l=[[g,h]]}return l.map(function(m){return[m[0],m[1]]})}function fi(t,r){var e=r.map(function(c){return[0,1].map(function(v){return[Math.min(c[0][v],c[1][v]),Math.max(c[0][v],c[1][v])]})}),n=[];if(t.length===2){var a=t[0],i=a[0],o=a[1];if(_t(i-t[1][0])){if(!_t(o-t[1][1])){var f=Math.max.apply(Math,e.map(function(c){return c[0][0]})),l=Math.min.apply(Math,e.map(function(c){return c[0][1]}));if(_t(f-l)>0)return[];n=[[f,o],[l,o]]}}else{var s=Math.max.apply(Math,e.map(function(c){return c[1][0]})),u=Math.min.apply(Math,e.map(function(c){return c[1][1]}));if(_t(s-u)>0)return[];n=[[i,s],[i,u]]}}return n.length||(n=t.filter(function(c){var v=c[0],d=c[1];return e.every(function(p){return 0<=_t(v-p[0][0])&&0<=_t(p[0][1]-v)&&0<=_t(d-p[1][0])&&0<=_t(p[1][1]-d)})})),n.map(function(c){return[_t(c[0]),_t(c[1])]})}function Je(t){return _s(t.slice(1),[t[0]]).map(function(r,e){return[t[e],r]})}function Rs(t,r){var e=t.slice(),n=r.slice();Ve(e)===-1&&e.reverse(),Ve(n)===-1&&n.reverse();var a=Je(e),i=Je(n),o=a.map(function(l){return ae(l[0],l[1])}),s=i.map(function(l){return ae(l[0],l[1])}),u=[];o.forEach(function(l,c){var v=a[c],d=[];s.forEach(function(p,h){var g=ui(l,p),m=fi(g,[v,i[h]]);d.push.apply(d,m.map(function(b){return{index1:c,index2:h,pos:b,type:"intersection"}}))}),d.sort(function(p,h){return Xt(v[0],p.pos)-Xt(v[0],h.pos)}),u.push.apply(u,d),Ze(v[1],n)&&u.push({index1:c,index2:-1,pos:v[1],type:"inside"})}),i.forEach(function(l,c){if(!!Ze(l[1],e)){var v=!1,d=Nt(u,function(p){var h=p.index2;return h===c?(v=!0,!1):!!v});d===-1&&(v=!1,d=Nt(u,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===c?(v=!0,!1):!!v})),d===-1?u.push({index1:-1,index2:c,pos:l[1],type:"inside"}):u.splice(d,0,{index1:-1,index2:c,pos:l[1],type:"inside"})}});var f={};return u.filter(function(l){var c=l.pos,v=c[0]+"x"+c[1];return f[v]?!1:(f[v]=!0,!0)})}function ws(t,r){var e=Rs(t,r);return e.map(function(n){var a=n.pos;return a})}function Os(t,r){var e=ws(t,r);return si(e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qe=function(){return Qe=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Qe.apply(this,arguments)};function Ps(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var Ts=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(Ft(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(!e)this._events={};else if(Ft(e))for(var a in e)this.off(a);else if(!n)this._events[e]=[];else{var i=this._events[e];if(i){var o=Nt(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}return this},r.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},r.emit=function(e,n){var a=this;n===void 0&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,Ps(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},r.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[];var o=i[e];o.push(Qe({listener:n},a))},t}(),li=Ts,Bs="function";function zs(t){return typeof t===Bs}function Is(){return Date.now?Date.now():new Date().getTime()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tn=function(t,r){return tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},tn(t,r)};function Gs(t,r){tn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var fr=function(){return fr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},fr.apply(this,arguments)};function As(t){var r=t.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function Te(t){if(t){if(zs(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}else return null}var ks=function(t){Gs(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n}var e=r.prototype;return e.dragStart=function(n,a){var i=Te(a.container);if(!i){this._flag=!1;return}var o=0,s=0,u=0,f=0;if(i===document.body)u=window.innerWidth,f=window.innerHeight;else{var l=i.getBoundingClientRect();o=l.top,s=l.left,u=l.width,f=l.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:u,height:f},this._prevScrollPos=this._getScrollPosition([0,0],a)},e.drag=function(n,a){if(!!this._flag){var i=n.clientX,o=n.clientY,s=a.threshold,u=s===void 0?0:s,f=this,l=f._startRect,c=f._startPos,v=[0,0];return l.top>o-u?(c[1]>l.top||o<c[1])&&(v[1]=-1):l.top+l.height<o+u&&(c[1]<l.top+l.height||o>c[1])&&(v[1]=1),l.left>i-u?(c[0]>l.left||i<c[0])&&(v[0]=-1):l.left+l.width<i+u&&(c[0]<l.left+l.width||i>c[0])&&(v[0]=1),clearTimeout(this._timer),!v[0]&&!v[1]?!1:this._continueDrag(fr(fr({},a),{direction:v,inputEvent:n,isDrag:!0}))}},e.checkScroll=function(n){var a=this;if(this._isWait)return!1;var i=n.prevScrollPos,o=i===void 0?this._prevScrollPos:i,s=n.direction,u=n.throttleTime,f=u===void 0?0:u,l=n.inputEvent,c=n.isDrag,v=this._getScrollPosition(s||[0,0],n),d=v[0]-o[0],p=v[1]-o[1],h=s||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=v,!d&&!p?!1:(this.trigger("move",{offsetX:h[0]?d:0,offsetY:h[1]?p:0,inputEvent:l}),f&&c&&(this._timer=window.setTimeout(function(){a._continueDrag(n)},f)),!0)},e.dragEnd=function(){clearTimeout(this._timer)},e._getScrollPosition=function(n,a){var i=a.container,o=a.getScrollPosition,s=o===void 0?As:o;return s({container:Te(i),direction:n})},e._continueDrag=function(n){var a=this,i=n.container,o=n.direction,s=n.throttleTime,u=n.useScroll,f=n.isDrag,l=n.inputEvent;if(!(f&&this._isWait)){var c=Is(),v=Math.max(s+this._prevTime-c,0);if(v>0)return this._timer=window.setTimeout(function(){a._continueDrag(n)},v),!1;this._prevTime=c;var d=this._getScrollPosition(o,n);return this._prevScrollPos=d,f&&(this._isWait=!0),this.trigger("scroll",{container:Te(i),direction:o,inputEvent:l}),this._isWait=!1,u||this.checkScroll(fr(fr({},n),{prevScrollPos:d,direction:o,inputEvent:l}))}},r}(li),Fs=ks;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var rn=function(t,r){return rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},rn(t,r)};function Ns(t,r){rn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var ct=function(){return ct=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ct.apply(this,arguments)};function Ls(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function Be(t){return Ls([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Ys(t){return t.touches&&t.touches.length>=2}function Hr(t){return t?t.touches?Vs(t.touches):[ci(t)]:[]}function Xs(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t||"which"in t)}function va(t,r,e){var n=e.length,a=_r(t,n),i=a.clientX,o=a.clientY,s=a.originalClientX,u=a.originalClientY,f=_r(r,n),l=f.clientX,c=f.clientY,v=_r(e,n),d=v.clientX,p=v.clientY,h=i-l,g=o-c,m=i-d,b=o-p;return{clientX:s,clientY:u,deltaX:h,deltaY:g,distX:m,distY:b}}function ze(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Vs(t){for(var r=Math.min(t.length,2),e=[],n=0;n<r;++n)e.push(ci(t[n]));return e}function ci(t){return{clientX:t.clientX,clientY:t.clientY}}function _r(t,r){r===void 0&&(r=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=0;n<r;++n){var a=t[n];e.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,e.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,e.clientX+=a.clientX,e.clientY+=a.clientY}return r?{clientX:e.clientX/r,clientY:e.clientY/r,originalClientX:e.originalClientX/r,originalClientY:e.originalClientY/r}:e}var Ie=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}var r=t.prototype;return r.getAngle=function(e){return e===void 0&&(e=this.prevClients),Be(e)},r.getRotation=function(e){return e===void 0&&(e=this.prevClients),Be(e)-Be(this.startClients)},r.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var a=va(e||this.prevClients,this.prevClients,this.startClients),i=a.deltaX,o=a.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=e,a},r.getPositions=function(e){e===void 0&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(a,i){return va([e[i]],[n[i]],[a])})},r.getMovement=function(e){var n=this.movement;if(!e)return n;var a=_r(e,this.length),i=_r(this.prevClients,this.length),o=a.clientX-i.clientX,s=a.clientY-i.clientY;return Math.sqrt(o*o+s*s)+n},r.getDistance=function(e){return e===void 0&&(e=this.prevClients),ze(e)},r.getScale=function(e){return e===void 0&&(e=this.prevClients),ze(e)/ze(this.startClients)},r.move=function(e,n){this.startClients.forEach(function(a){a.clientX-=e,a.clientY-=n})},t}(),da=["textarea","input"],Ws=function(t){Ns(r,t);function r(n,a){a===void 0&&(a={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.datas={},i.isDrag=!1,i.isPinch=!1,i.isMouse=!1,i.isTouch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._dragFlag=!1,i._isMouseEvent=!1,i.onDragStart=function(v,d){if(d===void 0&&(d=!0),!(!i.flag&&v.cancelable===!1)){var p=i.options,h=p.container,g=p.pinchOutside,m=p.preventWheelClick,b=p.preventRightClick,S=p.preventDefault,E=p.checkInput,M=i.isTouch,y=!i.flag;if(m&&(v.which===2||v.button===1)||b&&(v.which===3||v.button===2))return i.initDrag(),!1;if(y){var x=document.activeElement,C=v.target,D=C.tagName.toLowerCase(),_=da.indexOf(D)>-1,w=C.isContentEditable;if(_||w){if(E||x===C||x&&w&&x.isContentEditable&&x.contains(C))return!1}else if((S||v.type==="touchstart")&&x){var R=x.tagName;(x.isContentEditable||da.indexOf(R)>-1)&&x.blur()}i.clientStores=[new Ie(Hr(v))],i.flag=!0,i.isDrag=!1,i._dragFlag=!0,i.datas={},i.doubleFlag=ne()-i.prevTime<200,i._isMouseEvent=Xs(v);var T=i.emit("dragStart",ct(ct({datas:i.datas,inputEvent:v,isMouseEvent:i._isMouseEvent,isTrusted:d,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){v.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));T===!1&&i.initDrag(),i.flag&&S&&v.preventDefault()}if(!i.flag)return!1;var P=0;if(y&&M&&g&&(P=setTimeout(function(){Bt(h,"touchstart",i.onDragStart,{passive:!1})})),!y&&M&&g&&Mt(h,"touchstart",i.onDragStart),i.flag&&Ys(v)){if(clearTimeout(P),y&&v.touches.length!==v.changedTouches.length)return;i.pinchFlag||i.onPinchStart(v)}}},i.onDrag=function(v,d){if(!!i.flag){var p=Hr(v),h=i.moveClients(p,v,!1);if(i._dragFlag){if(i.pinchFlag||h.deltaX||h.deltaY){var g=i.emit("drag",ct(ct({},h),{isScroll:!!d,inputEvent:v}));if(g===!1){i.stop();return}}i.pinchFlag&&i.onPinch(v,p)}i.getCurrentStore().getPosition(p,!0)}},i.onDragEnd=function(v){if(!!i.flag){var d=i.options,p=d.pinchOutside,h=d.container;i.isTouch&&p&&Mt(h,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(v);var g=v!=null&&v.touches?Hr(v):[],m=g.length;m===0||!i.options.keepDragging?i.flag=!1:i._addStore(new Ie(g));var b=i._getPosition(),S=ne(),E=!i.isDrag&&i.doubleFlag;i.prevTime=i.isDrag||E?0:S,i.flag||(i.emit("dragEnd",ct({datas:i.datas,isDouble:E,isDrag:i.isDrag,isClick:!i.isDrag,isMouseEvent:i._isMouseEvent,inputEvent:v},b)),i.clientStores=[])}},i.onBlur=function(){i.onDragEnd()};var o=[].concat(n);i.options=ct({checkInput:!1,container:o.length>1?window:o[0],preventRightClick:!0,preventWheelClick:!0,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},a);var s=i.options,u=s.container,f=s.events,l=s.checkWindowBlur;if(i.isTouch=f.indexOf("touch")>-1,i.isMouse=f.indexOf("mouse")>-1,i.targets=o,i.isMouse&&(o.forEach(function(v){Bt(v,"mousedown",i.onDragStart)}),Bt(u,"mousemove",i.onDrag),Bt(u,"mouseup",i.onDragEnd),Bt(u,"contextmenu",i.onDragEnd)),l&&Bt(window,"blur",i.onBlur),i.isTouch){var c={passive:!1};o.forEach(function(v){Bt(v,"touchstart",i.onDragStart,c)}),Bt(u,"touchmove",i.onDrag,c),Bt(u,"touchend",i.onDragEnd,c),Bt(u,"touchcancel",i.onDragEnd,c)}return i}var e=r.prototype;return e.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},e.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(a,i){return a+i.movement},0)},e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isDoubleFlag=function(){return this.doubleFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(n,a,i,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(n,a),o&&this.onDrag(i,!0))},e.move=function(n,a){var i=n[0],o=n[1],s=this.getCurrentStore(),u=s.prevClients;return this.moveClients(u.map(function(f){var l=f.clientX,c=f.clientY;return{clientX:l+i,clientY:c+o,originalClientX:l,originalClientY:c}}),a,!0)},e.triggerDragStart=function(n){this.onDragStart(n,!1)},e.setEventDatas=function(n){var a=this.datas;for(var i in n)a[i]=n[i];return this},e.getCurrentEvent=function(n){return ct(ct({datas:this.datas},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.getEventDatas=function(){return this.datas},e.unset=function(){var n=this,a=this.targets,i=this.options.container;this.off(),Mt(window,"blur",this.onBlur),this.isMouse&&(a.forEach(function(o){Mt(o,"mousedown",n.onDragStart)}),Mt(i,"mousemove",this.onDrag),Mt(i,"mouseup",this.onDragEnd),Mt(i,"contextmenu",this.onDragEnd)),this.isTouch&&(a.forEach(function(o){Mt(o,"touchstart",n.onDragStart)}),Mt(i,"touchstart",this.onDragStart),Mt(i,"touchmove",this.onDrag),Mt(i,"touchend",this.onDragEnd),Mt(i,"touchcancel",this.onDragEnd))},e.onPinchStart=function(n){var a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new Ie(Hr(n));this.pinchFlag=!0,this._addStore(i);var o=this.emit("pinchStart",ct(ct({datas:this.datas,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:n}));o===!1&&(this.pinchFlag=!1)}},e.onPinch=function(n,a){if(!(!this.flag||!this.pinchFlag||a.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",ct(ct({datas:this.datas,movement:this.getMovement(a),angle:i.getAngle(a),rotation:i.getRotation(a),touches:i.getPositions(a),scale:i.getScale(a),distance:i.getDistance(a)},i.getPosition(a)),{inputEvent:n}))}},e.onPinchEnd=function(n){if(!!this.pinchFlag){var a=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",ct(ct({datas:this.datas,isPinch:a,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},e.getCurrentStore=function(){return this.clientStores[0]},e.moveClients=function(n,a,i){var o=this._getPosition(n,i);return(o.deltaX||o.deltaY)&&(this.isDrag=!0),ct(ct({datas:this.datas},o),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,inputEvent:a})},e._addStore=function(n){this.clientStores.splice(0,0,n)},e._getPosition=function(n,a){var i=this.getCurrentStore(),o=i.getPosition(n,a),s=this.clientStores.slice(1).reduce(function(l,c){var v=c.getPosition();return l.distX+=v.distX,l.distY+=v.distY,l},o),u=s.distX,f=s.distY;return ct(ct({},o),{distX:u,distY:f})},r}(li),Hs=Ws;function qs(t){for(var r=5381,e=t.length;e;)r=r*33^t.charCodeAt(--e);return r>>>0}var js=qs;function $s(t){return js(t).toString(36)}function Us(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function Ks(t,r,e){return e.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,a){var i=a.trim();return(i?er(i):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?""+s.replace(/\:host/g,"."+t):s?"."+t+" "+s:"."+t}).join(", ")+" {"})}function Zs(t,r,e,n){var a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",t),e.nonce&&a.setAttribute("nonce",e.nonce),a.innerHTML=Ks(t,r,e),(n||document.head||document.body).appendChild(a),a}function Js(t){var r="rCS"+$s(t),e=0,n;return{className:r,inject:function(a,i){i===void 0&&(i={});var o=Us(a),s=e===0,u;return(o||s)&&(u=Zs(r,t,i,o)),s&&(n=u),o||++e,{destroy:function(){o?(a.removeChild(u),u=null):(e>0&&--e,e===0&&n&&(n.parentNode.removeChild(n),n=null))}}}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var en=function(t,r){return en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},en(t,r)};function vi(t,r){en(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var nn=function(){return nn=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},nn.apply(this,arguments)};function Qs(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}var tu=function(t){vi(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.injectResult=null,n.tag="div",n}var e=r.prototype;return e.render=function(){var n=this.props,a=n.className,i=a===void 0?"":a;n.cspNonce;var o=n.portalContainer,s=Qs(n,["className","cspNonce","portalContainer"]),u=this.injector.className,f=this.tag,l={};return ns.indexOf("simple")>-1&&o&&(l={portalContainer:o}),Ot(f,nn({ref:At(this,"element"),"data-styled-id":u,className:i+" "+u},l,s))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},r}(yn);function di(t,r){var e=Js(r);return function(n){vi(a,n);function a(){var i=n!==null&&n.apply(this,arguments)||this;return i.injector=e,i.tag=t,i}return a}(tu)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var an=function(){return an=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},an.apply(this,arguments)};function ru(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var eu=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(Ft(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(!e)this._events={};else if(Ft(e))for(var a in e)this.off(a);else if(!n)this._events[e]=[];else{var i=this._events[e];if(i){var o=Nt(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}return this},r.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},r.emit=function(e,n){var a=this;n===void 0&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,ru(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},r.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[];var o=i[e];o.push(an({listener:n},a))},t}(),nu=eu,on=function(t,r){return on=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},on(t,r)};function Fr(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");on(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var O=function(){return O=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},O.apply(this,arguments)};function au(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function iu(t,r,e,n){var a=arguments.length,i=a<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);return a>3&&i&&Object.defineProperty(r,e,i),i}function L(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,i;n<a;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}function Nr(t,r){var e;return O({events:{},props:(e={},e[t]=Boolean,e),name:t},r)}function ou(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(r,'deg);transform-origin: 16px 16px"></path></svg>')}function su(t){var r=ou(1,t),e=Math.round(t/45)*45%180,n="ns-resize";return e===135?n="nwse-resize":e===45?n="nesw-resize":e===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(r,"') 16 16, ").concat(n,";")}var uu=us(),pi=uu.browser.webkit,hi=pi&&function(){var t=typeof window=="undefined"?{userAgent:""}:window.navigator,r=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return r?parseFloat(r[1])<605:!1}(),Rn="moveable-",fu=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,`"] {
	`).concat(su(t),`
}
`)}).join(`
`),`
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(hi?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),lu=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],cu=1e-4,Rt=1e-7,qr=1e-9,xr=Math.pow(10,10),pa=-xr,gi=["n","w","s","e","nw","ne","sw","se"],vu={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},du={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},mi=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate"];function pe(t,r,e,n,a){var i=r.gesto.move(e,t.inputEvent),o=i.originalDatas||i.datas,s=o.draggable||(o.draggable={});return O(O({},a?Vi(r,i):i),{isPinch:!!n,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var Lr=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var r=t.prototype;return r.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var a=n.originalDatas;return this.datas=a,a.draggable||(a.draggable={}),O(O({},this.move(e,n.inputEvent)),{type:"dragstart"})},r.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},r.move=function(e,n){var a,i;return this.isFlag?(a=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0)):(this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],a=e[0],i=e[1],this.isFlag=!0),this.prevX=a,this.prevY=i,{type:"drag",clientX:a,clientY:i,inputEvent:n,isDrag:this.isDrag,distX:a-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Kt(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][r]=i[s][r]||{},O(O({},e),{datas:i[s][r],originalDatas:i[s]})})}function Ge(t,r,e,n,a,i){var o=!!e.match(/Start$/g),s=!!e.match(/End$/g),u=a.isPinch,f=a.datas,l=Kt(t,r.name,a),c=t.moveables,v=l.map(function(d,p){var h=c[p],g=h.state,m=d;if(o)m=new Lr().dragStart(n,d);else{if(g.gesto||(g.gesto=f.childGestos[p]),!g.gesto)return;m=pe(d,g,n,u,i)}var b=r[e](h,O(O({},m),{parentFlag:!0}));return s&&(g.gesto=null),b});return o&&(f.childGestos=c.map(function(d){return d.state.gesto})),v}function Vt(t,r,e,n,a,i){a===void 0&&(a=function(l,c){return c});var o=!!e.match(/End$/g),s=Kt(t,r.name,n),u=t.moveables,f=s.map(function(l,c){var v=u[c],d=l;d=a(v,l);var p=r[e](v,O(O({},d),{parentFlag:!0}));return p&&i&&i(v,l,p,c),o&&(v.state.gesto=null),p});return f}function wn(t,r,e,n){n===void 0&&(n="");var a=t.state,i=a.renderPoses,o=a.rotation,s=a.direction,u=t.props,f=u.renderDirections,l=f===void 0?r:f,c=u.zoom,v={};if(!l)return[];var d=s>0?1:-1,p=l===!0?gi:l,h=o/Math.PI*180;return p.forEach(function(g){v[g]=!0}),p.map(function(g){var m=vu[g];if(!m||!v[g])return null;var b=(q(h,15)+d*du[g]+720)%180;return e.createElement("div",{className:W("control","direction",g,n),"data-rotation":b,"data-direction":g,key:"direction-".concat(g),style:Li.apply(void 0,L([o,c],m.map(function(S){return i[S]}),!1))})})}function lr(t,r,e,n,a,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=ot(e,n),f=r?q(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(i),className:W.apply(void 0,L(["line","direction",r],o,!1)),"data-rotation":f,"data-line-index":i,"data-direction":r,style:Mr(e,n,a,u)})}function On(t,r){return wn(t,gi,r)}function bi(t,r){return wn(t,["nw","ne","sw","se"],r)}function Ae(t,r,e,n,a,i){var o=t.state.is3d?4:3,s=gt(t.state.rootMatrix,a,o),u=H([i.left,i.top],s);r.startAbsoluteOrigin=u,r.prevDeg=ot(u,[e,n])/Math.PI*180,r.defaultDeg=r.prevDeg,r.prevSnapDeg=0,r.loop=0}function re(t,r,e){var n=e.defaultDeg,a=e.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++o:i<t&&i<90&&t>270&&--o;var s=r*(o*360+t-n);return e.prevDeg=n+s,s}function ke(t,r,e,n){return re(ot(n.startAbsoluteOrigin,[t,r])/Math.PI*180,e,n)}function Fe(t,r,e,n,a,i){var o=t.props.throttleRotate,s=o===void 0?0:o,u=n,f=e.prevSnapDeg;i&&(u=Zu(t,r,e.origin,u));var l=q(a+u,s),c=l-a;return e.prevSnapDeg=c,[c-f,u,l]}function pu(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3];if(t!=="none"){var s=(t||"top").split("-"),u=s[0],f=s[1],l=[n,a];u==="left"?l=[i,n]:u==="right"?l=[a,o]:u==="bottom"&&(l=[o,i]);var c=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2],v=Xi(l,e);if(f){var d=f==="top"||f==="left",p=u==="bottom"||u==="left";c=l[d&&!p||!d&&p?0:1]}return[c,v]}}function sn(t,r){if(r.isRequest)return r.requestAble==="rotatable";var e=r.inputEvent.target;if(It(e,W("rotation-control")))return!0;var n=t.props.rotationTarget;return n?Wi(n,!0).some(function(a){return a?e===a||e.contains(a):!1}):!1}var hu={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[`.rotation {
            position: absolute;
            height: 40px;
            width: 1px;
            transform-origin: 50% 100%;
            height: calc(40px * var(--zoom));
            top: auto;
            left: 0;
            bottom: 100%;
            will-change: transform;
        }
        .rotation .rotation-line {
            display: block;
            width: 100%;
            height: 100%;
            transform-origin: 50% 50%;
        }
        .rotation .rotation-control {
            border-color: #4af;
            border-color: var(--moveable-color);
            background:#fff;
            cursor: alias;
        }`],render:function(t,r){var e=t.props,n=e.rotatable,a=e.rotationPosition,i=e.zoom,o=e.renderDirections,s=t.state,u=s.renderPoses,f=s.direction;if(!n)return null;var l=pu(a,u,f),c=[];if(l){var v=l[0],d=l[1];c.push(r.createElement("div",{key:"rotation",className:W("rotation"),style:{transform:"translate(-50%) translate(".concat(v[0],"px, ").concat(v[1],"px) rotate(").concat(d,"rad)")}},r.createElement("div",{className:W("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),r.createElement("div",{className:W("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}return o&&c.push.apply(c,wn(t,[],r)),c},dragControlCondition:sn,dragControlStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=r.parentRotate,o=r.parentFlag,s=r.isPinch,u=r.isRequest,f=t.state,l=f.target,c=f.left,v=f.top,d=f.origin,p=f.beforeOrigin,h=f.direction,g=f.beforeDirection,m=f.targetTransform,b=f.moveableClientRect;if(!u&&!l)return!1;var S=t.getRect();if(e.rect=S,e.transform=m,e.left=c,e.top=v,e.fixedPosition=Gi(t,Ii(t)),u||s||o){var E=i||0;e.beforeInfo={origin:S.beforeOrigin,prevDeg:E,defaultDeg:E,prevSnapDeg:0},e.afterInfo=O(O({},e.beforeInfo),{origin:S.origin}),e.absoluteInfo=O(O({},e.beforeInfo),{origin:S.origin,startValue:E})}else e.beforeInfo={origin:S.beforeOrigin},e.afterInfo={origin:S.origin},e.absoluteInfo={origin:S.origin,startValue:S.rotation},Ae(t,e.beforeInfo,n,a,p,b),Ae(t,e.afterInfo,n,a,d,b),Ae(t,e.absoluteInfo,n,a,d,b);e.direction=h,e.beforeDirection=g,e.startValue=0,e.datas={},ye(r,"rotate");var M=Y(t,r,O(O({set:function(x){e.startValue=x*Math.PI/180}},xe(r)),{dragStart:Et.dragStart(t,new Lr().dragStart([0,0],r))})),y=A(t,"onRotateStart",M);return e.isRotate=y!==!1,t.state.snapRenderInfo={request:r.isRequest},e.isRotate?M:!1},dragControl:function(t,r){var e,n,a,i=r.datas,o=r.clientX,s=r.clientY,u=r.parentRotate,f=r.parentFlag,l=r.isPinch,c=r.groupDelta,v=i.beforeDirection,d=i.beforeInfo,p=i.afterInfo,h=i.absoluteInfo,g=i.isRotate,m=i.startValue,b=i.rect;if(!!g){be(r,"rotate");var S=ef(r),E=v*S,M=t.props.parentMoveable,y=0,x,C,D=0,_,w,R=0,T,P,z=180/Math.PI*m,N=h.startValue,F=!1;if(!f&&"parentDist"in r){var G=r.parentDist;x=G,_=G,T=G}else l||f?(x=re(u,v,d),_=re(u,E,p),T=re(u,E,h)):(x=ke(o,s,v,d),_=ke(o,s,E,p),T=ke(o,s,E,h),F=!0);if(C=z+x,w=z+_,P=N+T,A(t,"onBeforeRotate",Y(t,r,{beforeRotation:C,rotation:w,absoluteRotation:P,setRotation:function(at){_=at-z,x=_,T=_}},!0)),e=Fe(t,b,d,x,z,F),y=e[0],x=e[1],C=e[2],n=Fe(t,b,p,_,z,F),D=n[0],_=n[1],w=n[2],a=Fe(t,b,h,T,N,F),R=a[0],T=a[1],P=a[2],!(!R&&!D&&!y&&!M)){var B=Se(i,"rotate(".concat(w,"deg)"),"rotate(".concat(_,"deg)")),k=cf(t,_,i.fixedPosition,i),I=X(H(c||[0,0],k),i.prevInverseDist||[0,0]);i.prevInverseDist=k,i.requestValue=null;var V=Y(t,r,O({delta:D,dist:_,rotate:w,rotation:w,beforeDist:x,beforeDelta:y,beforeRotate:C,beforeRotation:C,absoluteDist:T,absoluteDelta:R,absoluteRotate:P,absoluteRotation:P,isPinch:!!l},Bi(t,B,I,l,r)));return A(t,"onRotate",V),V}}},dragControlAfter:function(t,r){r.datas.requestValue},dragControlEnd:function(t,r){var e=r.datas;if(!!e.isRotate){e.isRotate=!1;var n=wt(t,r,{});return A(t,"onRotateEnd",n),n}},dragGroupControlCondition:sn,dragGroupControlStart:function(t,r){var e=r.datas,n=t.state,a=n.left,i=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,r);if(!s)return!1;s.set(e.beforeDirection*t.rotation);var u=Vt(t,this,"dragControlStart",r,function(c,v){var d=c.state,p=d.left,h=d.top,g=d.beforeOrigin,m=H(X([p,h],[a,i]),X(g,o));return v.datas.groupClient=m,O(O({},v),{parentRotate:0})}),f=O(O({},s),{targets:t.props.targets,events:u}),l=A(t,"onRotateGroupStart",f);return e.isRotate=l!==!1,e.isRotate?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(!!e.isRotate){Yn(t,"onBeforeRotate",function(l){A(t,"onBeforeRotateGroup",Y(t,r,O(O({},l),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(!!n){var a=e.beforeDirection,i=n.beforeDist,o=n.beforeDelta,s=o/180*Math.PI,u=Vt(t,this,"dragControl",r,function(l,c){var v=c.datas.groupClient,d=v[0],p=v[1],h=jt([d,p],s*a),g=h[0],m=h[1],b=[g-d,m-p];return c.datas.groupClient=[g,m],O(O({},c),{parentRotate:i,groupDelta:b})});t.rotation=a*n.beforeRotation;var f=O({targets:t.props.targets,events:u,set:function(l){t.rotation=l},setGroupRotation:function(l){t.rotation=l}},n);return A(t,"onRotateGroup",f),f}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(!!n.isRotate){this.dragControlEnd(t,r);var a=Vt(t,this,"dragControlEnd",r),i=wt(t,r,{targets:t.props.targets,events:a});return A(t,"onRotateGroupEnd",i),e}},request:function(t){var r={},e=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:r}},request:function(a){return"deltaRotate"in a?e+=a.deltaRotate:"rotate"in a&&(e=a.rotate-n),{datas:r,parentDist:e}},requestEnd:function(){return{datas:r,isDrag:!0}}}}},gu=["left","right","center"],mu=["top","bottom","middle"],Zt={start:"left",end:"right",center:"center"},Jt={start:"top",end:"bottom",center:"middle"};function gr(t,r){var e=t.props,n=e.snappable,a=e.bounds,i=e.innerBounds,o=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,f=e.snapGridHeight,l=t.state,c=l.guidelines,v=l.enableSnap;return!n||!v||r&&n!==!0&&n.indexOf(r)<0?!1:!!(u||f||a||i||c&&c.length||o&&o.length||s&&s.length)}function Pn(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function bu(t,r){var e=Pn(t),n={};for(var a in e)a in r&&e[a]&&(n[a]=r[a]);return n}function Tn(t,r){var e=bu(t,r),n=mu.filter(function(i){return i in e}),a=gu.filter(function(i){return i in e});return{horizontal:n.map(function(i){return e[i]}),vertical:a.map(function(i){return e[i]})}}function Su(t,r,e){var n=t.state.elementRects,a=[];return[["vertical",Zt,Jt],["horizontal",Jt,Zt]].forEach(function(i){var o=i[0],s=i[1],u=i[2],f=r[s.start],l=r[s.end],c=r[s.center],v=r[u.start],d=r[u.end];function p(m){var b=m.rect;return b[s.end]<f+e?f-b[s.end]:l-e<b[s.start]?b[s.start]-l:-1}var h=n.filter(function(m){var b=m.rect;return b[u.start]>d||b[u.end]<v?!1:p(m)>0}).sort(function(m,b){return p(m)-p(b)}),g=[];h.forEach(function(m){h.forEach(function(b){if(m!==b){var S=m.rect,E=b.rect,M=S[u.start],y=S[u.end],x=E[u.start],C=E[u.end];M>C||x>y||g.push([m,b])}})}),g.forEach(function(m){var b=m[0],S=m[1],E=b.rect,M=S.rect,y=E[s.start],x=E[s.end],C=M[s.start],D=M[s.end],_=0,w=0,R=!1,T=!1,P=!1;if(x<=f&&l<=C){if(T=!0,_=(C-x-(l-f))/2,w=x+_+(l-f)/2,Math.abs(w-c)>e)return}else if(x<C&&D<f+e){if(R=!0,_=C-x,w=D+_,Math.abs(w-f)>e)return}else if(x<C&&l-e<y){if(P=!0,_=C-x,w=y-_,Math.abs(w-l)>e)return}else return;!_||a.push({type:o,pos:o==="vertical"?[w,0]:[0,w],element:S.element,size:0,className:S.className,isStart:R,isCenter:T,isEnd:P,gap:_,hide:!0,gapRects:[b,S]})})}),a}function Si(t,r,e,n,a,i,o){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,f=o.top,l=o.bottom,c=o.right,v=e+c-u,d=n+l-f;return t&&t.forEach(function(p){s.push({type:"horizontal",pos:[u,q(p-i+f,.1)],size:v})}),r&&r.forEach(function(p){s.push({type:"vertical",pos:[q(p-a+u,.1),f],size:d})}),s}function Eu(t,r,e){var n=gt(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}function xu(t,r){if(!r.length)return[];var e=t.state,n=e.containerClientRect,a=e.targetClientRect,i=a.top,o=a.left,s=e.rootMatrix,u=e.is3d,f=u?4:3,l=Eu(s,n,f),c=l[0],v=l[1],d=Dt(e),p=de(d),h=p.minX,g=p.minY,m=X([h,g],vr(s,[o-c,i-v],f)).map(function(E){return Cf(E)}),b=m[0],S=m[1];return r.map(function(E){var M=E.element.getBoundingClientRect(),y=M.left-c,x=M.top-v,C=x+M.height,D=y+M.width,_=vr(s,[y,x],f),w=_[0],R=_[1],T=vr(s,[D,C],f),P=T[0],z=T[1];return O(O({},E),{rect:{left:w+b,right:P+b,top:R+S,bottom:z+S,center:(w+P)/2+b,middle:(R+z)/2+S}})})}function yu(t){var r=t.state,e=t.props.elementGuidelines,n=e===void 0?[]:e;if(!n.length)return r.elementRects=[],[];var a=(r.elementRects||[]).filter(function(v){return!v.refresh}),i=n.map(function(v){return Ft(v)&&"element"in v?v:{element:_e(v,!0)}}).filter(function(v){return v.element}),o=Ms(a.map(function(v){return v.element}),i.map(function(v){return v.element})),s=o.maintained,u=o.added,f=[];s.forEach(function(v){var d=v[0],p=v[1];f[p]=a[d]}),xu(t,u.map(function(v){return i[v]})).map(function(v,d){f[u[d]]=v}),r.elementRects=f;var l=Pn(t.props.elementSnapDirections),c=[];return f.forEach(function(v){var d=v.element,p=v.top,h=p===void 0?l.top:p,g=v.left,m=g===void 0?l.left:g,b=v.right,S=b===void 0?l.right:b,E=v.bottom,M=E===void 0?l.bottom:E,y=v.center,x=y===void 0?l.center:y,C=v.middle,D=C===void 0?l.middle:C,_=v.className,w=v.rect,R=Tn({top:h,right:S,left:m,bottom:M,center:x,middle:D},w),T=R.horizontal,P=R.vertical,z=w.top,N=w.left,F=w.right-N,G=w.bottom-z,B=[F,G];P.forEach(function(k){c.push({type:"vertical",element:d,pos:[q(k,.1),z],size:G,sizes:B,className:_,elementRect:v})}),T.forEach(function(k){c.push({type:"horizontal",element:d,pos:[N,q(k,.1)],size:F,sizes:B,className:_,elementRect:v})})}),c}function un(t){var r=t.state,e=r.snapOffset,n=r.containerClientRect,a=n.overflow,i=n.scrollHeight,o=n.scrollWidth,s=n.clientHeight,u=n.clientWidth,f=n.clientLeft,l=n.clientTop,c=t.props,v=c.snapGap,d=v===void 0?!0:v,p=c.verticalGuidelines,h=c.horizontalGuidelines,g=c.snapThreshold,m=g===void 0?5:g,b=c.snapGridWidth,S=b===void 0?0:b,E=c.snapGridHeight,M=E===void 0?0:E,y=yu(t),x=L([],y,!0);if(d){var C=Pt(Dt(t.state)),D=C.top,_=C.left,w=C.bottom,R=C.right;x.push.apply(x,Su(t,{top:D,left:_,bottom:w,right:R,center:(_+R)/2,middle:(D+w)/2},m))}return x.push.apply(x,Mu(S,M,a?o:u,a?i:s,f,l)),x.push.apply(x,Si(h||!1,p||!1,a?o:u,a?i:s,f,l,e)),x}function Mu(t,r,e,n,a,i){a===void 0&&(a=0),i===void 0&&(i=0);var o=[];if(r)for(var s=0;s<=n;s+=r)o.push({type:"horizontal",pos:[0,q(s-i,.1)],size:e,hide:!0});if(t)for(var s=0;s<=e;s+=t)o.push({type:"vertical",pos:[q(s-a,.1),0],size:n,hide:!0});return o}function _u(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];Math.abs(n)<vt&&(n=0),Math.abs(a)<vt&&(a=0);var i=0,o=0,s=0;return n?a?(i=-a/n,o=1,s=i*r[0]-r[1]):(o=1,s=-r[1]):(i=-1,s=r[0]),[i,o,s].map(function(u){return q(u,vt)})}function he(t,r,e,n){var a=t.props,i=Rf(n,a.snapThreshold,5);return Ei(t.state.guidelines,r,e,i)}function Ei(t,r,e,n){return{vertical:ga(t,"vertical",r,n),horizontal:ga(t,"horizontal",e,n)}}function Du(t,r,e){var n=e[0],a=e[1],i=r[0],o=r[1],s=X(e,r),u=s[0],f=s[1],l=f>0,c=u>0;u=fe(u),f=fe(f);var v={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(u===0&&f===0)return{vertical:v,horizontal:d};var p=he(t,u?[n]:[],f?[a]:[]),h=p.vertical,g=p.horizontal;h.posInfos.filter(function(P){var z=P.pos;return c?z>=i:z<=i}),g.posInfos.filter(function(P){var z=P.pos;return l?z>=o:z<=o}),h.isSnap=h.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=fn(h),b=m.isSnap,S=m.guideline,E=fn(g),M=E.isSnap,y=E.guideline,x=M?y.pos[1]:0,C=b?S.pos[0]:0;if(u===0)M&&(d.isSnap=!0,d.pos=y.pos[1],d.offset=a-d.pos);else if(f===0)b&&(v.isSnap=!0,v.pos=C,v.offset=n-C);else{var D=f/u,_=e[1]-D*n,w=0,R=0,T=!1;b?(R=C,w=D*R+_,T=!0):M&&(w=x,R=(w-_)/D,T=!0),T&&(v.isSnap=!0,v.pos=R,v.offset=n-R,d.isSnap=!0,d.pos=w,d.offset=a-w)}return{vertical:v,horizontal:d}}function ha(t,r,e){var n=Tn(t.props.snapDirections,r);return he(t,n.vertical,n.horizontal,e)}function fn(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:r,offset:a,dist:i,pos:e.pos,guideline:o}}function ga(t,r,e,n){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var a=r==="vertical",i=a?0:1,o=e.map(function(u,f){var l=t.map(function(c){var v=c.pos,d=u-v[i];return{offset:d,dist:Math.abs(d),guideline:c}}).filter(function(c){var v=c.guideline,d=c.dist,p=v.type;return!(p!==r||d>n)}).sort(function(c,v){return c.dist-v.dist});return{pos:u,index:f,guidelineInfos:l}}).filter(function(u){return u.guidelineInfos.length>0}).sort(function(u,f){return u.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),s=o.length>0;return{isSnap:s,index:s?o[0].index:-1,posInfos:o}}function Cu(t,r,e){var n=[];if(e[0]&&e[1])n=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(o){return dt(r,o)});else if(!e[0]&&!e[1])for(var a=[r[0],r[1],r[3],r[2],r[0]],i=0;i<4;++i)n.push(a[i]),n.push([(a[i][0]+a[i+1][0])/2,(a[i][1]+a[i+1][1])/2]);else t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(o){return dt(r,o)}):(n=Ti(r,e),n.length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]));return he(t,n.map(function(o){return o[0]}),n.map(function(o){return o[1]}),1)}function xi(t,r){var e=Math.abs(t.offset),n=Math.abs(r.offset);return t.isBound&&r.isBound?n-e:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?n-e:t.isSnap?-1:r.isSnap||e<Rt?1:n<Rt?-1:e-n}function ie(t,r){return t.slice().sort(function(e,n){var a=e.sign[r],i=n.sign[r],o=e.offset[r],s=n.offset[r];if(a){if(!i)return-1}else return 1;return xi({isBound:e.isBound,isSnap:e.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function Ru(t,r,e){var n=[];if(e)Math.abs(r[0])!==1||Math.abs(r[1])!==1?n.push([r,[-1,-1]],[r,[-1,1]],[r,[1,-1]],[r,[1,1]]):n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),n.push([r,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*a[0],s*a[1]];r[0]===u[0]&&r[1]===u[1]||n.push([r,u])})})}else if(t[0]){var i=Math.abs(r[0])===1?[1]:[1,-1];i.forEach(function(o){n.push([[r[0],-1],[o*t[0],-1]],[[r[0],0],[o*t[0],0]],[[r[0],1],[o*t[0],1]])})}else if(t[1]){var i=Math.abs(r[1])===1?[1]:[1,-1];i.forEach(function(s){n.push([[-1,r[1]],[-1,s*t[1]]],[[0,r[1]],[0,s*t[1]]],[[1,r[1]],[1,s*t[1]]])})}return n}function yi(t,r){var e=wr([r[0][0],r[1][0]]),n=wr([r[0][1],r[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function Bn(t,r){var e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];Math.abs(a)<Rt&&(a=0),Math.abs(i)<Rt&&(i=0);var o,s;if(!a)o=e[0],s=t[0];else if(!i)o=e[1],s=t[1];else{var u=i/a;o=u*(t[0]-e[0])+e[1],s=t[1]}return o-s}function Mi(t,r,e,n){return n===void 0&&(n=Rt),t.every(function(a){var i=Bn(a,r),o=i<=0;return o===e||Math.abs(i)<=n})}function ma(t,r,e,n,a){return a===void 0&&(a=0),n&&r-a<=t||!n&&t<=e+a?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function wu(t,r){var e=r.line,n=r.centerSign,a=r.verticalSign,i=r.horizontalSign,o=r.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,f=s.top,l=s.width,c=s.height,v=[[u,f],[u,f+c]],d=[[u,f],[u+l,f]],p=[[u+l,f],[u+l,f+c]],h=[[u,f+c],[u+l,f+c]];if(Mi([[u,f],[u+l,f],[u,f+c],[u+l,f+c]],e,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=$t(e,o,d,a),m=$t(e,o,h,a),b=$t(e,o,v,i),S=$t(e,o,p,i),E=g.isBound&&m.isBound,M=g.isBound||m.isBound,y=b.isBound&&S.isBound,x=b.isBound||S.isBound,C=pr(g.offset,m.offset),D=pr(b.offset,S.offset),_=[0,0],w=!1,R=!1;return Math.abs(D)<Math.abs(C)?(_=[C,0],w=M,R=E):(_=[0,D],w=x,R=y),{isAllBound:R,isVerticalBound:M,isHorizontalBound:x,isBound:w,offset:_}}function $t(t,r,e,n,a,i){var o=r[0],s=r[1],u=t[0],f=e[0],l=e[1],c=fe(l[1]-f[1]),v=fe(l[0]-f[0]),d=s,p=o,h=-o/s;if(v){if(!c){if(i&&!d)return{isBound:!1,offset:0};if(p){var S=(f[1]-u[1])/h+u[0];return ma(S,f[0],l[0],n,a)}else{var m=f[1]-u[1],b=Math.abs(m)<=(a||0);return{isBound:b,offset:b?m:0}}}}else{if(i&&!p)return{isBound:!1,offset:0};if(d){var g=h*(f[0]-u[0])+u[1];return ma(g,f[1],l[1],n,a)}else{var m=f[0]-u[0],b=Math.abs(m)<=(a||0);return{isBound:b,offset:b?m:0}}}return{isBound:!1,offset:0}}function _i(t,r,e){return r.map(function(n){var a=wu(t,n),i=a.isBound,o=a.offset,s=a.isVerticalBound,u=a.isHorizontalBound,f=n.multiple,l=Yt({datas:e,distX:o[0],distY:o[1]}).map(function(c,v){return c*(f[v]?2/f[v]:0)});return{sign:f,isBound:i,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function Ou(t,r,e){var n,a=zn(t,r,[0,0],!1).map(function(v){return O(O({},v),{multiple:v.multiple.map(function(d){return Math.abs(d)*2})})}),i=_i(t,a,e),o=ie(i,0),s=ie(i,1),u=0,f=0,l=o.isVerticalBound||s.isVerticalBound,c=o.isHorizontalBound||s.isHorizontalBound;return(l||c)&&(n=af({datas:e,distX:-o.offset[0],distY:-s.offset[1]}),u=n[0],f=n[1]),{vertical:{isBound:l,offset:u},horizontal:{isBound:c,offset:f}}}function Pu(t,r){var e=[],n=t[0],a=t[1];return n&&a?e.push([[0,a*2],t,[-n,a]],[[n*2,0],t,[n,-a]]):n?(e.push([[n*2,0],[n,1],[n,-1]]),r&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(e.push([[0,a*2],[1,a],[-1,a]]),r&&e.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}function zn(t,r,e,n){var a=t.state,i=a.allMatrix,o=a.is3d,s=mr(i,100,100,o?4:3),u=dt(s,[0,0]);return Pu(e,n).map(function(f){var l=f[0],c=f[1],v=f[2],d=[dt(s,c),dt(s,v)],p=_u(d),h=yi(u,d),g=h.vertical,m=h.horizontal,b=Bn(u,d)<=0;return{multiple:l,centerSign:b,verticalSign:g,horizontalSign:m,lineConstants:p,line:[dt(r,c),dt(r,v)]}})}function ba(t,r,e,n){var a=n?t.map(function(i){return jt(i,n)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var o=Bn(e,i)<=0;return!Mi(r,i,o)})}function Tu(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];if(!n)return Math.abs(r[0]);if(!a)return Math.abs(r[1]);var i=a/n;return Math.abs((-i*r[0]+r[1])/Math.sqrt(Math.pow(i,2)+1))}function Bu(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];if(!n)return[r[0],0];if(!a)return[0,r[1]];var i=a/n,o=-i*r[0]+r[1];return[-o/(i+1/i),o/(i*i+1)]}function zu(t,r,e,n,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,u=i.top,f=i.width,l=i.height,c=s-n[0],v=s+f-n[0],d=u-n[1],p=u+l-n[1],h=[[c,d],[v,d],[c,p],[v,p]],g=dt(e,[0,0]);if(!ba(e,h,g,0))return[];var m=[],b=h.map(function(S){return[kt(S),ot([0,0],S)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(S){var E=ot([0,0],Bu(S)),M=Tu(S);m.push.apply(m,b.filter(function(y){var x=y[0];return x&&M<=x}).map(function(y){var x=y[0],C=y[1],D=Math.acos(x?M/x:0),_=C+D,w=C-D;return[o+_-E,o+w-E]}).reduce(function(y,x){return y.push.apply(y,x),y},[]).filter(function(y){return!ba(r,h,g,y)}).map(function(y){return q(y*180/Math.PI,Rt)}))}),m}function Iu(t){var r=t.props.innerBounds;if(!r)return{vertical:[],horizontal:[]};var e=t.getRect(),n=e.pos1,a=e.pos2,i=e.pos3,o=e.pos4,s=[n,a,i,o],u=dt(s,[0,0]),f=r.left,l=r.top,c=r.width,v=r.height,d=[[f,l],[f,l+v]],p=[[f,l],[f+c,l]],h=[[f+c,l],[f+c,l+v]],g=[[f,l+v],[f+c,l+v]],m=zn(t,s,[0,0],!1),b=[],S=[],E={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(M){var y=M.line,x=M.lineConstants,C=yi(u,y),D=C.horizontal,_=C.vertical,w=$t(y,x,p,_,1,!0),R=$t(y,x,g,_,1,!0),T=$t(y,x,d,D,1,!0),P=$t(y,x,h,D,1,!0);w.isBound&&!E.top&&(b.push(l),E.top=!0),R.isBound&&!E.bottom&&(b.push(l+v),E.bottom=!0),T.isBound&&!E.left&&(S.push(f),E.left=!0),P.isBound&&!E.right&&(S.push(f+c),E.right=!0)}),{horizontal:b,vertical:S}}function In(t,r,e){var n=t||{},a=n.position,i=a===void 0?"client":a,o=n.left,s=o===void 0?-1/0:o,u=n.top,f=u===void 0?-1/0:u,l=n.right,c=l===void 0?1/0:l,v=n.bottom,d=v===void 0?1/0:v,p={position:i,left:s,top:f,right:c,bottom:d};return{vertical:Sa(p,r,!0),horizontal:Sa(p,e,!1)}}function ge(t,r){var e=t.state,n=e.containerClientRect,a=n.clientHeight,i=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=e.snapOffset,f=u.left,l=u.top,c=u.right,v=u.bottom,d=r||t.props.bounds||{},p=d.position||"client",h=p==="css",g=d.left,m=g===void 0?-1/0:g,b=d.top,S=b===void 0?-1/0:b,E=d.right,M=E===void 0?h?-1/0:1/0:E,y=d.bottom,x=y===void 0?h?-1/0:1/0:y;return h&&(M=i+c-f-M,x=a+v-l-x),{left:m+f-o,right:M+f-o,top:S+l-s,bottom:x+l-s}}function Gu(t,r,e){var n=ge(t),a=n.left,i=n.top,o=n.right,s=n.bottom,u=e[0],f=e[1],l=X(e,r),c=l[0],v=l[1];Math.abs(c)<Rt&&(c=0),Math.abs(v)<Rt&&(v=0);var d=v>0,p=c>0,h={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(c===0&&v===0)return{vertical:h,horizontal:g};if(c===0)d?s<f&&(g.pos=s,g.offset=f-s):i>f&&(g.pos=i,g.offset=f-i);else if(v===0)p?o<u&&(h.pos=o,h.offset=u-o):a>u&&(h.pos=a,h.offset=u-a);else{var m=v/c,b=e[1]-m*u,S=0,E=0,M=!1;p&&o<=u?(S=m*o+b,E=o,M=!0):!p&&u<=a&&(S=m*a+b,E=a,M=!0),M&&(S<i||S>s)&&(M=!1),M||(d&&s<=f?(S=s,E=(S-b)/m,M=!0):!d&&f<=i&&(S=i,E=(S-b)/m,M=!0)),M&&(h.isBound=!0,h.pos=E,h.offset=u-E,g.isBound=!0,g.pos=S,g.offset=f-S)}return{vertical:h,horizontal:g}}function Sa(t,r,e){var n=t[e?"left":"top"],a=t[e?"right":"bottom"],i=Math.min.apply(Math,r),o=Math.max.apply(Math,r),s=[];return n+1>i&&s.push({isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,f){return Math.abs(f.offset)-Math.abs(u.offset)})}function Ea(t,r,e){var n=e?t.map(function(a){return jt(a,e)}):t;return n.some(function(a){return a[0]<r.left&&Math.abs(a[0]-r.left)>.1||a[0]>r.right&&Math.abs(a[0]-r.right)>.1||a[1]<r.top&&Math.abs(a[1]-r.top)>.1||a[1]>r.bottom&&Math.abs(a[1]-r.bottom)>.1})}function Au(t,r,e){var n=kt(t),a=Math.sqrt(n*n-r*r)||0;return[a,-a].sort(function(i,o){return Math.abs(i-t[e?0:1])-Math.abs(o-t[e?0:1])}).map(function(i){return ot([0,0],e?[i,r]:[r,i])})}function ku(t,r,e,n,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,o=ge(t),s=o.left,u=o.top,f=o.right,l=o.bottom,c=s-n[0],v=f-n[0],d=u-n[1],p=l-n[1],h={left:c,top:d,right:v,bottom:p};if(!Ea(e,h,0))return[];var g=[];return[[c,0],[v,0],[d,1],[p,1]].forEach(function(m){var b=m[0],S=m[1];e.forEach(function(E){var M=ot([0,0],E);g.push.apply(g,Au(E,b,S).map(function(y){return i+y-M}).filter(function(y){return!Ea(r,h,y)}).map(function(y){return q(y*180/Math.PI,Rt)}))})}),g}function Fu(t,r){var e,n=t.direction,a=t.classNames,i=t.size,o=t.pos,s=t.zoom,u=t.key,f=n==="horizontal",l=f?"Y":"X";return r.createElement("div",{key:u,className:a.join(" "),style:(e={},e[f?"width":"height"]="".concat(i),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(l,"(-50%) scale").concat(l,"(").concat(s,")"),e)})}function Gn(t,r){return Fu(O(O({},t),{classNames:L([W("line","guideline",t.direction)],t.classNames,!0).filter(function(e){return e}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(e){return"".concat(q(e,.1),"px")})}),r)}function xa(t,r,e,n,a,i,o,s){var u=t.props.zoom;return e.map(function(f,l){var c=f.type,v=f.pos,d=[0,0];return d[o]=n,d[o?0:1]=-a+v,Gn({key:"".concat(r,"TargetGuideline").concat(l),classNames:[W("target","bold",c)],posValue:d,sizeValue:i,zoom:u,direction:r},s)})}function ya(t,r,e,n,a,i){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,f=r==="horizontal"?Zt:Jt,l=a[f.start],c=a[f.end];return e.filter(function(v){var d=v.hide,p=v.elementRect;if(d)return!1;if(u&&p){var h=p.rect;if(h[f.start]<=l&&c<=h[f.end])return!1}return!0}).map(function(v,d){var p=v.pos,h=v.size,g=v.element,m=[-n[0]+p[0],-n[1]+p[1]];return Gn({key:"".concat(r,"-default-guideline-").concat(d),classNames:g?[W("bold")]:[],direction:r,posValue:m,sizeValue:h,zoom:s},i)})}function yr(t,r,e,n,a,i,o,s){var u,f=t.props,l=f.snapDigit,c=l===void 0?0:l,v=f.isDisplaySnapDigit,d=v===void 0?!0:v,p=f.snapDistFormat,h=p===void 0?function(M){return M}:p,g=f.zoom,m=r==="horizontal"?"X":"Y",b=r==="vertical"?"height":"width",S=Math.abs(a),E=d?parseFloat(S.toFixed(c)):0;return s.createElement("div",{key:"".concat(r,"-").concat(e,"-guideline-").concat(n),className:W("guideline-group",r),style:(u={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},u[b]="".concat(S,"px"),u)},Gn({direction:r,classNames:[W(e),o],size:"100%",posValue:[0,0],sizeValue:S,zoom:g},s),s.createElement("div",{className:W("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},E>0?h(E):""))}function Nu(t,r,e,n){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,o=a?Zt:Jt,s=e[o.start],u=e[o.end];return wf(r,function(f){return f.pos[a]}).map(function(f){var l=[],c=[],v=[];return f.forEach(function(d){var p,h,g=d.element,m=d.elementRect.rect;if(m[o.end]<s)l.push(d);else if(u<m[o.start])c.push(d);else if(m[o.start]<=s&&u<=m[o.end]&&n){var b=d.pos,S={element:g,rect:O(O({},m),(p={},p[o.end]=m[o.start],p))},E={element:g,rect:O(O({},m),(h={},h[o.start]=m[o.end],h))},M=[0,0],y=[0,0];M[a]=b[a],M[i]=b[i],y[a]=b[a],y[i]=b[i]+d.size,l.push({type:t,pos:M,size:0,elementRect:S}),c.push({type:t,pos:y,size:0,elementRect:E})}}),l.sort(function(d,p){return p.pos[i]-d.pos[i]}),c.sort(function(d,p){return d.pos[i]-p.pos[i]}),{total:f,start:l,end:c,inner:v}})}function Lu(t,r,e,n,a){var i=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=r.filter(function(g){return g.type===s}),f=s==="vertical"?1:0,l=f?0:1,c=Nu(s,u,n,i),v=f?Jt:Zt,d=f?Zt:Jt,p=n[v.start],h=n[v.end];c.forEach(function(g){var m=g.total,b=g.start,S=g.end,E=g.inner,M=e[l]+m[0].pos[l]-n[d.start],y=n;b.forEach(function(x){var C=x.elementRect.rect,D=y[v.start]-C[v.end];if(D>0){var _=[0,0];_[f]=e[f]+y[v.start]-p-D,_[l]=M,o.push(yr(t,s,"dashed",o.length,D,_,x.className,a))}y=C}),y=n,S.forEach(function(x){var C=x.elementRect.rect,D=C[v.start]-y[v.end];if(D>0){var _=[0,0];_[f]=e[f]+y[v.end]-p,_[l]=M,o.push(yr(t,s,"dashed",o.length,D,_,x.className,a))}y=C}),E.forEach(function(x){var C=x.elementRect.rect,D=p-C[v.start],_=C[v.end]-h,w=[0,0],R=[0,0];w[f]=e[f]-D,w[l]=M,R[f]=e[f]+h-p,R[l]=M,o.push(yr(t,s,"dashed",o.length,D,w,x.className,a)),o.push(yr(t,s,"dashed",o.length,_,R,x.className,a))})})}),o}function Yu(t,r,e,n,a){var i=[];return["horizontal","vertical"].forEach(function(o){var s=r.filter(function(g){return g.type===o}),u=o==="vertical"?0:1,f=u?0:1,l=u?Jt:Zt,c=u?Zt:Jt,v=n[l.start],d=n[l.end],p=n[c.start],h=n[c.end];s.forEach(function(g){var m=g.gap,b=g.gapRects,S=g.className,E=Math.max.apply(Math,L([p],b.map(function(x){var C=x.rect;return C[c.start]}),!1)),M=Math.min.apply(Math,L([h],b.map(function(x){var C=x.rect;return C[c.end]}),!1)),y=(E+M)/2;E===M||y===(p+h)/2||b.forEach(function(x){var C=x.rect,D=[e[0],e[1]];if(C[l.end]<v)D[u]+=C[l.end]-v;else if(d<C[l.start])D[u]+=C[l.start]-v-m;else return;D[f]+=y-p,i.push(yr(t,u?"vertical":"horizontal","gap",i.length,m,D,S,a))})})}),i}function Xu(t,r,e,n){var a=r[0]-t[0],i=r[1]-t[1];if(Math.abs(a)<vt&&(a=0),Math.abs(i)<vt&&(i=0),!a)return n?[0,0]:[0,e];if(!i)return n?[e,0]:[0,0];var o=i/a,s=t[1]-o*t[0];if(n){var u=o*(r[0]+e)+s;return[e,u-r[1]]}else{var f=(r[1]+e-s)/o;return[f-r[0],e]}}function ln(t,r,e,n,a){var i=Xu(t,r,e,n);if(!i)return{isOutside:!1,offset:[0,0]};var o=Xt(t,r),s=Xt(i,t),u=Xt(i,r),f=s>o||u>o,l=Yt({datas:a,distX:i[0],distY:i[1]}),c=l[0],v=l[1];return{offset:[c,v],isOutside:f}}function oe(t,r){return t.isBound?t.offset:r.isSnap?fn(r).offset:0}function Vu(t,r,e,n,a){var i=r[0],o=r[1],s=e[0],u=e[1],f=n[0],l=n[1],c=a[0],v=a[1],d=-c,p=-v;if(t&&i&&o){d=0,p=0;var h=[];if(s&&u?h.push([0,v],[c,0]):s?h.push([c,0]):u?h.push([0,v]):f&&l?h.push([0,v],[c,0]):f?h.push([c,0]):l&&h.push([0,v]),h.length){h.sort(function(S,E){return kt(X([i,o],S))-kt(X([i,o],E))});var g=h[0];if(g[0]&&Math.abs(i)>vt)d=-g[0],p=o*Math.abs(i+d)/Math.abs(i)-o;else if(g[1]&&Math.abs(o)>vt){var m=o;p=-g[1],d=i*Math.abs(o+p)/Math.abs(m)-i}if(t&&u&&s)if(Math.abs(d)>vt&&Math.abs(d)<Math.abs(c)){var b=Math.abs(c)/Math.abs(d);d*=b,p*=b}else if(Math.abs(p)>vt&&Math.abs(p)<Math.abs(v)){var b=Math.abs(v)/Math.abs(p);d*=b,p*=b}else d=pr(-c,d),p=pr(-v,p)}}else d=i||s?-c:0,p=o||u?-v:0;return[d,p]}function Wu(t,r,e,n,a,i){if(!gr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Ln(i.absolutePoses,[r,e]),s=Pt(o),u=s.left,f=s.right,l=s.top,c=s.bottom,v={horizontal:o.map(function(P){return P[1]}),vertical:o.map(function(P){return P[0]})},d=Pn(t.props.snapDirections),p=Tn(d,{left:u,right:f,top:l,bottom:c,center:(u+f)/2,middle:(l+c)/2}),h=me(t,a,p,v),g=h.vertical,m=h.horizontal,b=Ou(t,o,i),S=b.vertical,E=b.horizontal,M=g.isSnap,y=m.isSnap,x=g.isBound||S.isBound,C=m.isBound||E.isBound,D=pr(g.offset,S.offset),_=pr(m.offset,E.offset),w=Vu(n,[r,e],[x,C],[M,y],[D,_]),R=w[0],T=w[1];return[{isBound:x,isSnap:M,offset:R},{isBound:C,isSnap:y,offset:T}]}function me(t,r,e,n){n===void 0&&(n=e);var a=In(ge(t),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=r?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:he(t,e.vertical,e.horizontal),u=s.horizontal,f=s.vertical,l=oe(i[0],u),c=oe(o[0],f),v=Math.abs(l),d=Math.abs(c);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:l,dist:v,bounds:i,snap:u},vertical:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:c,dist:d,bounds:o,snap:f}}}function Ma(t,r,e,n,a){var i=In(r,e,n),o=i.horizontal,s=i.vertical,u=Ei(t,e,n,a),f=u.horizontal,l=u.vertical,c=oe(o[0],f),v=oe(s[0],l),d=Math.abs(c),p=Math.abs(v);return{horizontal:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:c,dist:d,bounds:o,snap:f},vertical:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:v,dist:p,bounds:s,snap:l}}}function Hu(t,r,e,n){var a=ot(t,r)/Math.PI*180,i=e.vertical,o=i.isBound,s=i.isSnap,u=i.dist,f=e.horizontal,l=f.isBound,c=f.isSnap,v=f.dist,d=a%180,p=d<3||d>177,h=d>87&&d<93;return v<u&&(o||s&&!h&&(!n||!p))?"vertical":l||c&&!p&&(!n||!h)?"horizontal":""}function qu(t,r,e,n,a,i){return e.map(function(o){var s=o[0],u=o[1],f=dt(r,s),l=dt(r,u),c=n?ju(t,f,l,a):me(t,a,{vertical:[l[0]],horizontal:[l[1]]}),v=c.horizontal,d=v.offset,p=v.isBound,h=v.isSnap,g=c.vertical,m=g.offset,b=g.isBound,S=g.isSnap,E=X(u,s);if(!m&&!d)return{isBound:b||p,isSnap:S||h,sign:E,offset:[0,0]};var M=Hu(f,l,c,n);if(!M)return{sign:E,isBound:!1,isSnap:!1,offset:[0,0]};var y=M==="vertical",x=[0,0];return!n&&Math.abs(u[0])===1&&Math.abs(u[1])===1&&s[0]!==u[0]&&s[1]!==u[1]?x=Yt({datas:i,distX:-m,distY:-d}):x=ln(f,l,-(y?m:d),y,i).offset,x=x.map(function(C,D){return C*(E[D]?2/E[D]:0)}),{sign:E,isBound:y?b:p,isSnap:y?S:h,offset:x}})}function _a(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function ju(t,r,e,n){var a=Gu(t,r,e),i=a.horizontal,o=a.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Du(t,r,e),u=s.horizontal,f=s.vertical,l=_a(i,u),c=_a(o,f),v=Math.abs(l),d=Math.abs(c);return{horizontal:{isBound:i.isBound,isSnap:u.isSnap,offset:l,dist:v},vertical:{isBound:o.isBound,isSnap:f.isSnap,offset:c,dist:d}}}function $u(t,r,e,n,a){var i=[-e[0],-e[1]],o=t.state,s=o.width,u=o.height,f=t.props.bounds,l=1/0,c=1/0;if(f){var v=[[e[0],-e[1]],[-e[0],e[1]]],d=f.left,p=d===void 0?-1/0:d,h=f.top,g=h===void 0?-1/0:h,m=f.right,b=m===void 0?1/0:m,S=f.bottom,E=S===void 0?1/0:S;v.forEach(function(M){var y=M[0]!==i[0],x=M[1]!==i[1],C=dt(r,M),D=ot(n,C)*360/Math.PI;if(x){var _=C.slice();(Math.abs(D-360)<2||Math.abs(D-180)<2)&&(_[1]=n[1]);var w=ln(n,_,(n[1]<C[1]?E:g)-C[1],!1,a),R=w.offset,T=R[1],P=w.isOutside;isNaN(T)||(c=u+(P?1:-1)*Math.abs(T))}if(y){var _=C.slice();(Math.abs(D-90)<2||Math.abs(D-270)<2)&&(_[0]=n[0]);var z=ln(n,_,(n[0]<C[0]?b:p)-C[0],!0,a),N=z.offset[0],F=z.isOutside;isNaN(N)||(l=s+(F?1:-1)*Math.abs(N))}})}return{maxWidth:l,maxHeight:c}}function Ne(t){var r=t.state;if(!(r.guidelines&&r.guidelines.length)){var e=t.state.container,n=t.props.snapContainer||e,a=r.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(e!==n){var o=_e(n,!0);if(o){var s=ee(o),u=Pa(r,[s.left-a.left,s.top-a.top]),f=Pa(r,[s.right-a.right,s.bottom-a.bottom]);i.left=q(u[0],.1),i.top=q(u[1],.1),i.right=q(f[0],.1),i.bottom=q(f[1],.1)}}r.snapOffset=i,r.guidelines=un(t),r.enableSnap=!0}}function Di(t,r,e,n,a,i){var o=mr(t,r,e,i?4:3),s=dt(o,n);return Ln(o,X(a,s))}function Uu(t,r,e,n,a,i){var o=i.fixedDirection,s=Ru(e,o,n),u=zn(t,r,e,n),f=L(L([],qu(t,r,s,n,a,i),!0),_i(t,u,i),!0),l=ie(f,0),c=ie(f,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function Ku(t,r,e,n,a,i,o,s,u){var f=dt(r,o),l=me(t,s,{vertical:[f[0]],horizontal:[f[1]]}),c=l.horizontal.offset,v=l.vertical.offset;if(v||c){var d=Yt({datas:u,distX:-v,distY:-c}),p=d[0],h=d[1],g=Math.min(a||1/0,e+o[0]*p),m=Math.min(i||1/0,n+o[1]*h);return[g-e,m-n]}return[0,0]}function Ci(t,r,e,n,a,i,o,s){for(var u=Dt(t.state),f=t.props.keepRatio,l=0,c=0,v=0;v<2;++v){var d=r(l,c),p=Uu(t,d,a,f,o,s),h=p.width,g=p.height,m=h.isBound,b=g.isBound,S=h.offset,E=g.offset;if(v===1&&(m||(S=0),b||(E=0)),v===0&&o&&!m&&!b)return[0,0];if(f){var M=Math.abs(S)*(e?1/e:1),y=Math.abs(E)*(n?1/n:1),x=m&&b?M<y:b||!m&&M<y;x?S=e*E/n:E=n*S/e}l+=S,c+=E}if(a[0]&&a[1]){var C=$u(t,u,a,i,s),D=C.maxWidth,_=C.maxHeight,w=Ku(t,r(l,c).map(function(P){return P.map(function(z){return q(z,cu)})}),e+l,n+c,D,_,a,o,s),S=w[0],E=w[1];l+=S,c+=E}return[l,c]}function Zu(t,r,e,n){if(!gr(t,"rotatable"))return n;var a=r.pos1,i=r.pos2,o=r.pos3,s=r.pos4,u=n*Math.PI/180,f=[a,i,o,s].map(function(v){return X(v,e)}),l=f.map(function(v){return jt(v,u)}),c=L(L([],ku(t,f,l,e,n),!0),zu(t,f,l,e,n),!0);return c.sort(function(v,d){return Math.abs(v-n)-Math.abs(d-n)}),c.length?c[0]:n}function Ju(t,r,e,n,a,i,o){if(!gr(t,"resizable"))return[0,0];var s=o.fixedDirection,u=t.state,f=u.allMatrix,l=u.is3d;return Ci(t,function(c,v){return Di(f,r+c,e+v,s,a,l)},r,e,n,a,i,o)}function Qu(t,r,e,n,a){if(!gr(t,"scalable"))return[0,0];var i=a.startOffsetWidth,o=a.startOffsetHeight,s=a.fixedPosition,u=a.fixedDirection,f=a.is3d,l=Ci(t,function(c,v){return Di(ff(a,H(r,[c/i,v/o])),i,o,u,s,f)},i,o,e,s,n,a);return[l[0]/i,l[1]/o]}function tf(t,r){r.absolutePoses=Dt(t.state)}function Da(t){var r=[];return t.forEach(function(e){e.guidelineInfos.forEach(function(n){var a=n.guideline;r.indexOf(a)>-1||r.push(a)})}),r}function Ca(t,r,e,n,a,i){var o=In(ge(t,i),r,e),s=o.vertical,u=o.horizontal;s.forEach(function(v){v.isBound&&n.push({type:"bounds",pos:v.pos})}),u.forEach(function(v){v.isBound&&a.push({type:"bounds",pos:v.pos})});var f=Iu(t),l=f.vertical,c=f.horizontal;l.forEach(function(v){Nt(n,function(d){var p=d.type,h=d.pos;return p==="bounds"&&h===v})>=0||n.push({type:"bounds",pos:v})}),c.forEach(function(v){Nt(a,function(d){var p=d.type,h=d.pos;return p==="bounds"&&h===v})>=0||a.push({type:"bounds",pos:v})})}var rf={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,r){var e=t.state,n=e.top,a=e.left,i=e.pos1,o=e.pos2,s=e.pos3,u=e.pos4,f=e.snapRenderInfo;if(!f||!gr(t,""))return[];e.guidelines=un(t);var l=Math.min(i[0],o[0],s[0],u[0]),c=Math.min(i[1],o[1],s[1],u[1]),v=f.externalPoses||[],d=Dt(t.state),p=[],h=[],g=[],m=[],b=[],S=Pt(d),E=S.width,M=S.height,y=S.top,x=S.left,C=S.bottom,D=S.right,_={left:x,right:D,top:y,bottom:C,center:(x+D)/2,middle:(y+C)/2},w=v.length>0,R=w?Pt(v):{};if(!f.request){if(f.direction&&b.push(Cu(t,d,f.direction)),f.snap){var T=Pt(d);f.center&&(T.middle=(T.top+T.bottom)/2,T.center=(T.left+T.right)/2),b.push(ha(t,T,1))}w&&(f.center&&(R.middle=(R.top+R.bottom)/2,R.center=(R.left+R.right)/2),b.push(ha(t,R,1))),b.forEach(function(F){var G=F.vertical.posInfos,B=F.horizontal.posInfos;p.push.apply(p,G.filter(function(k){var I=k.guidelineInfos;return I.some(function(V){var at=V.guideline;return!at.hide})}).map(function(k){return{type:"snap",pos:k.pos}})),h.push.apply(h,B.filter(function(k){var I=k.guidelineInfos;return I.some(function(V){var at=V.guideline;return!at.hide})}).map(function(k){return{type:"snap",pos:k.pos}})),g.push.apply(g,Da(G)),m.push.apply(m,Da(B))})}Ca(t,[x,D],[y,C],p,h),w&&Ca(t,[R.left,R.right],[R.top,R.bottom],p,h,f.externalBounds);var P=L(L([],g,!0),m,!0),z=P.filter(function(F){return F.element&&!F.gapRects}),N=P.filter(function(F){return F.gapRects});return A(t,"onSnap",{guidelines:P.filter(function(F){var G=F.element;return!G}),elements:z,gaps:N},!0),L(L(L(L(L(L([],Lu(t,z,[l,c],_,r),!0),Yu(t,N,[l,c],_,r),!0),ya(t,"horizontal",m,[a,n],_,r),!0),ya(t,"vertical",g,[a,n],_,r),!0),xa(t,"horizontal",h,l,n,E,0,r),!0),xa(t,"vertical",p,c,a,M,1,r),!0)},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},Ne(t)},drag:function(t){var r=t.state;r.guidelines=un(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,r){if(Tr(t,r)||sn(t,r))return!0;if(!r.isRequest&&r.inputEvent)return It(r.inputEvent.target,W("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Ne(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Ne(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null,r.elementRects=[]}},Et={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,r){var e=t.props,n=e.throttleDragRotate,a=e.zoom,i=t.state,o=i.dragInfo,s=i.beforeOrigin;if(!n||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=kt(u),l=ot(u,[0,0]);return[r.createElement("div",{className:W("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(l,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,a=r.parentGesto,i=t.state,o=i.target,s=i.gesto;if(s)return!1;i.gesto=a||t.targetGesto;var u=yt(o);e.datas={},e.left=parseFloat(u.left||"")||0,e.top=parseFloat(u.top||"")||0,e.bottom=parseFloat(u.bottom||"")||0,e.right=parseFloat(u.right||"")||0,e.startValue=[0,0],ir(t,r),ye(r,"translate"),tf(t,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var f=Y(t,r,O({set:function(c){e.startValue=c}},xe(r))),l=n||A(t,"onDragStart",f);return l!==!1?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(i.gesto=null,e.isPinch=!1),e.isDrag?f:!1},drag:function(t,r){if(!!r){be(r,"translate");var e=r.datas,n=r.parentEvent,a=r.parentFlag,i=r.isPinch,o=r.isRequest,s=r.deltaOffset,u=r.distX,f=r.distY,l=e.isDrag,c=e.prevDist,v=e.prevBeforeDist,d=e.startValue;if(!!l){s&&(u+=s[0],f+=s[1]);var p=t.props,h=p.parentMoveable,g=n?0:p.throttleDrag||0,m=n?0:p.throttleDragRotate||0,b=!1,S=0;if(!n&&m>0&&(u||f)){var E=p.startDragRotate||0,M=q(E+ot([0,0],[u,f])*180/Math.PI,m)-E,y=f*Math.abs(Math.cos((M-90)/180*Math.PI)),x=u*Math.abs(Math.cos(M/180*Math.PI)),C=kt([x,y]);S=M*Math.PI/180,u=C*Math.cos(S),f=C*Math.sin(S)}if(!i&&!n&&!a&&(!m||u||f)){var D=Wu(t,u,f,m,o||s,e),_=D[0],w=D[1],R=_.isSnap,T=_.isBound,P=_.offset,z=w.isSnap,N=w.isBound,F=w.offset;b=R||z||T||N,u+=P,f+=F}var G=H(Oi({datas:e,distX:u,distY:f}),d),B=H(nf({datas:e,distX:u,distY:f}),d);!m&&!b&&(aa(B,g),aa(G,g));var k=X(G,d),I=X(B,d),V=X(I,c),at=X(k,v);e.prevDist=I,e.prevBeforeDist=k,e.passDelta=V,e.passDist=I;var pt=e.left+k[0],it=e.top+k[1],nt=e.right-k[0],$=e.bottom-k[1],rt=Se(e,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(I[0],"px, ").concat(I[1],"px)"));if(An(r,rt),t.state.dragInfo.dist=n?[0,0]:I,!(!n&&!h&&V.every(function(mt){return!mt})&&at.some(function(mt){return!mt}))){var Q=t.state,bt=Q.width,ht=Q.height,Ct=Y(t,r,{transform:rt,dist:I,delta:V,translate:B,beforeDist:k,beforeDelta:at,beforeTranslate:G,left:pt,top:it,right:nt,bottom:$,width:bt,height:ht,isPinch:i});return!n&&A(t,"onDrag",Ct),Ct}}}},dragAfter:function(t,r){var e=r.datas,n=e.deltaOffset;return n[0]||n[1]?(e.deltaOffset=[0,0],this.drag(t,O(O({},r),{deltaOffset:n}))):!1},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas;if(t.state.gesto=null,t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var a=wt(t,r,{});return!e&&A(t,"onDragEnd",a),a}},dragGroupStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=this.dragStart(t,r);if(!i)return!1;var o=Ge(t,this,"dragStart",[n||0,a||0],r,!1),s=O(O({},i),{targets:t.props.targets,events:o}),u=A(t,"onDragGroupStart",s);return e.isDrag=u!==!1,e.isDrag?i:!1},dragGroup:function(t,r){var e=r.datas;if(!!e.isDrag){var n=this.drag(t,r),a=r.datas.passDelta,i=Ge(t,this,"drag",a,r,!1);if(!!n){var o=O({targets:t.props.targets,events:i},n);return A(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var e=r.isDrag,n=r.datas;if(!!n.isDrag){this.dragEnd(t,r);var a=Ge(t,this,"dragEnd",[0,0],r,!1);return A(t,"onDragGroupEnd",wt(t,r,{targets:t.props.targets,events:a})),e}},request:function(t){var r={},e=t.getRect(),n=0,a=0;return{isControl:!1,requestStart:function(){return{datas:r}},request:function(i){return"x"in i?n=i.x-e.left:"deltaX"in i&&(n+=i.deltaX),"y"in i?a=i.y-e.top:"deltaY"in i&&(a+=i.deltaY),{datas:r,distX:n,distY:a}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Ri(t,r){var e=r.clientX,n=r.clientY,a=r.datas,i=t.state,o=i.moveableClientRect,s=i.rootMatrix,u=i.is3d,f=i.pos1,l=o.left,c=o.top,v=u?4:3,d=X(vr(s,[e-l,n-c],v),f),p=d[0],h=d[1],g=Yt({datas:a,distX:p,distY:h}),m=g[0],b=g[1];return[m,b]}function ir(t,r){var e=r.datas,n=t.state,a=n.allMatrix,i=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,f=n.origin,l=n.offsetMatrix,c=n.targetMatrix,v=n.transformOrigin,d=o?4:3;e.is3d=o,e.matrix=a,e.targetMatrix=c,e.beforeMatrix=i,e.offsetMatrix=l,e.transformOrigin=v,e.inverseMatrix=Lt(a,d),e.inverseBeforeMatrix=Lt(i,d),e.absoluteOrigin=kr(H([s,u],f),d),e.startDragBeforeDist=xt(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=xt(e.inverseMatrix,e.absoluteOrigin,d)}function ef(t){return ue(t.datas.beforeTransform,[50,50],100,100).direction}function be(t,r){var e=t.datas,n=t.originalDatas.beforeRenderable,a=e.transformIndex,i=n.nextTransforms,o=n.nextTransformAppendedIndexes,s=0;a===-1?(s=i.length,e.transformIndex=s):s=a+o.filter(function(c){return c<a}).length;var u=Bf(i,s),f=u.targetFunction,l=r==="rotate"?"rotateZ":r;e.beforeFunctionTexts=u.beforeFunctionTexts,e.afterFunctionTexts=u.afterFunctionTexts,e.beforeTransform=u.beforeFunctionMatrix,e.beforeTransform2=u.beforeFunctionMatrix2,e.targetTansform=u.targetFunctionMatrix,e.afterTransform=u.afterFunctionMatrix,e.afterTransform2=u.afterFunctionMatrix2,e.targetAllTransform=u.allFunctionMatrix,f.functionName===l?(e.afterFunctionTexts.splice(0,1),e.isAppendTransform=!1):(e.isAppendTransform=!0,n.nextTransformAppendedIndexes=L(L([],o,!0),[s],!1))}function Se(t,r,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:r," ").concat(t.afterFunctionTexts.join(" "))}function nf(t){var r=t.datas,e=t.distX,n=t.distY,a=Oi({datas:r,distX:e,distY:n}),i=a[0],o=a[1],s=wi(r,ps([i,o],4));return xt(s,kr([0,0,0],4),4)}function wi(t,r,e){var n=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=e?Z(s,r,4):Z(r,s,4),f=Z(Lt(e?i:n,4),u,4),l=Z(f,Lt(e?o:a,4),4);return l}function Oi(t){var r=t.datas,e=t.distX,n=t.distY,a=r.inverseBeforeMatrix,i=r.is3d,o=r.startDragBeforeDist,s=r.absoluteOrigin,u=i?4:3;return X(xt(a,H(s,[e,n]),u),o)}function Yt(t,r){var e=t.datas,n=t.distX,a=t.distY,i=e.inverseBeforeMatrix,o=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,f=e.startDragDist,l=e.absoluteOrigin,c=s?4:3;return X(xt(r?i:o,H(l,[n,a]),c),r?u:f)}function af(t,r){var e=t.datas,n=t.distX,a=t.distY,i=e.beforeMatrix,o=e.matrix,s=e.is3d,u=e.startDragBeforeDist,f=e.startDragDist,l=e.absoluteOrigin,c=s?4:3;return X(xt(r?i:o,H(r?u:f,[n,a]),c),l)}function of(t,r,e,n,a,i){return n===void 0&&(n=r),a===void 0&&(a=e),i===void 0&&(i=[0,0]),t?t.map(function(o,s){var u=Ir(o),f=u.value,l=u.unit,c=s?a:n,v=s?e:r;if(o==="%"||isNaN(f)){var d=c?i[s]/c:0;return v*d}else if(l!=="%")return f;return v*f/100}):i}function Pi(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function Ti(t,r){return Pi(r).map(function(e){return t[e]})}function dt(t,r){var e=Ti(t,r);return[wr(e.map(function(n){return n[0]})),wr(e.map(function(n){return n[1]}))]}function sf(t,r,e,n,a,i){var o=mr(r,e,n,a),s=dt(o,i),u=t[0]-s[0],f=t[1]-s[1];return[u,f]}function Ee(t,r,e,n){return Z(t,kn(r,n,e),n)}function uf(t,r,e){var n=t.transformOrigin,a=t.offsetMatrix,i=t.is3d,o=r.beforeTransform,s=r.afterTransform,u=i?4:3,f=ii([e]);return Ee(a,Wt(Z(Z(o,f,4),s,4),4,u),n,u)}function ff(t,r){var e=t.transformOrigin,n=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,o=a?4:3;return Ee(n,Z(i,ai(r,o),o),e,o)}function xe(t){var r=t.originalDatas.beforeRenderable;return{setTransform:function(e,n){n===void 0&&(n=-1),r.startTransforms=nr(e)?e:Ut(e),cn(t,n)},setTransformIndex:function(e){cn(t,e)}}}function ye(t,r){var e=t.originalDatas.beforeRenderable,n=e.startTransforms;cn(t,Nt(n,function(a){return a.indexOf("".concat(r,"("))===0}))}function cn(t,r){var e=t.originalDatas.beforeRenderable,n=t.datas;if(n.transformIndex=r,r!==-1){var a=e.startTransforms[r];if(!!a){var i=Qt([a]);n.startValue=i[0].functionValue}}}function An(t,r){var e=t.originalDatas.beforeRenderable;e.nextTransforms=Ut(r)}function Ra(t){var r=t.originalDatas.beforeRenderable;return r.nextTransforms.join(" ")}function Bi(t,r,e,n,a){return An(a,r),{transform:r,drag:Et.drag(t,pe(a,t.state,e,n,!1))}}function zi(t,r,e,n,a){var i=t.state,o=i.left,s=i.top,u=t.props.groupable,f=uf(t.state,a,r),l=u?o:0,c=u?s:0,v=Gi(t,e,f),d=X(n,v);return X(d,[l,c])}function lf(t,r,e,n,a){var i=zi(t,"scale(".concat(r.join(", "),")"),e,n,a);return i}function Ii(t){var r=t.state,e=r.width,n=r.height,a=r.transformOrigin;return[-1+a[0]/(e/2),-1+a[1]/(n/2)]}function Gi(t,r,e){e===void 0&&(e=t.state.allMatrix);var n=t.state,a=n.width,i=n.height,o=n.is3d,s=o?4:3,u=[a/2*(1+r[0]),i/2*(1+r[1])];return gt(e,u,s)}function cf(t,r,e,n){var a=Ii(t);return zi(t,"rotate(".concat(r,"deg)"),a,e,n)}function vf(t,r,e,n,a,i){var o=t.props.groupable,s=t.state,u=s.transformOrigin,f=s.targetMatrix,l=s.offsetMatrix,c=s.is3d,v=s.width,d=s.height,p=s.left,h=s.top,g=c?4:3,m=of(i,r,e,v,d,u),b=o?p:0,S=o?h:0,E=Ee(l,f,m,g),M=sf(a,E,r,e,g,n);return X(M,[b,S])}function Ai(t,r){return dt(Dt(t.state),r)}function df(t,r){return[t[0]*r[0],t[1]*r[1]]}function W(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return bo.apply(void 0,L([Rn],t,!1))}function pf(t){return!t||t==="none"?[1,0,0,1,0,0]:Ft(t)?t:ii(t)}function kn(t,r,e){return Ue(r,Pr(e,r),t,Pr(e.map(function(n){return-n}),r))}function hf(t,r,e){if(r==="%"){var n=Fn(t.ownerSVGElement);return n[e?"width":"height"]/100}return 1}function gf(t){var r=vn(yt(t,":before"));return r.map(function(e,n){var a=Ir(e),i=a.value,o=a.unit;return i*hf(t,o,n===0)})}function vn(t){var r=t.transformOrigin;return r?r.split(" "):["0","0"]}function ki(t,r){r===void 0&&(r=yt(t));var e=r.transform;if(e&&e!=="none")return r.transform;if("transform"in t){var n=t.transform,a=n.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var o=[],s=function(f){var l=a[f].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(c){return l[c]}).join(", "),")"))},u=0;u<i;++u)s(u);return o.join(" ")}return""}function se(t,r,e){for(var n=document.body,a=!t||e?t:t.parentElement,i=t===r||a===r,o="relative";a&&a!==n;){r===a&&(i=!0);var s=yt(a),u=a.tagName.toLowerCase(),f=ki(a,s);if(o=s.position,u==="svg"||o!=="static"||f&&f!=="none")break;a=a.parentElement,o="relative"}return{isStatic:o==="static",isEnd:i||!a||a===n,offsetParent:a||n}}function mf(t,r){var e,n=t.tagName.toLowerCase(),a=t.offsetLeft,i=t.offsetTop,o=zr(a),s=!o,u,f;return!s&&n!=="svg"?(u=hi?gf(t):vn(r).map(function(l){return parseFloat(l)}),f=u.slice(),s=!0,e=Mf(t,u),a=e[0],i=e[1],u[0]=e[2],u[1]=e[3]):(u=vn(r).map(function(l){return parseFloat(l)}),f=u.slice()),{tagName:n,isSVG:o,hasOffset:s,offset:[a||0,i||0],origin:u,targetOrigin:f}}function Fi(t,r,e){e===void 0&&(e=yt(t));var n=yt(document.body),a=n.position;if(!r&&(!a||a==="static"))return[0,0];var i=parseInt(n.marginLeft,10),o=parseInt(n.marginTop,10);return e.position==="absolute"&&((e.top!=="auto"||e.bottom!=="auto")&&(o=0),(e.left!=="auto"||e.right!=="auto")&&(i=0)),[i,o]}function dn(t){t.forEach(function(r){var e=r.matrix;e&&(r.matrix=Wt(e,3,4))})}function bf(){return[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop]}function Sf(t){for(var r=t.parentElement,e=!1;r;){var n=yt(r).transform;if(n&&n!=="none"){e=!0;break}if(r===document.body)break;r=r.parentElement}return{fixedContainer:r||document.body,hasTransform:e}}function wa(t,r,e){for(var n=t,a=[],i=!e&&t===r||t===document.body,o=i,s=!1,u=3,f,l,c,v=!1,d=se(r,r,!0).offsetParent;n&&!o;){o=i;var p=yt(n),h=p.position,g=ki(n,p),m=hs(pf(g)),b=h==="fixed",S={hasTransform:!1,fixedContainer:null};b&&(v=!0,S=Sf(n),d=S.fixedContainer);var E=m.length;!s&&E===16&&(s=!0,u=4,dn(a),c&&(c=Wt(c,3,4))),s&&E===9&&(m=Wt(m,3,4));var M=mf(n,p),y=M.tagName,x=M.hasOffset,C=M.isSVG,D=M.origin,_=M.targetOrigin,w=M.offset,R=w[0],T=w[1];y==="svg"&&c?(a.push({type:"target",target:n,matrix:yf(n,u)}),a.push({type:"offset",target:n,matrix:et(u)})):y==="g"&&t!==n&&(R=0,T=0);var P=void 0,z=!1,N=!1;if(b)P=S.fixedContainer,z=!0;else{var F=se(n,r);P=F.offsetParent,z=F.isEnd,N=F.isStatic}pi&&x&&!C&&N&&(h==="relative"||h==="static")&&(R-=P.offsetLeft,T-=P.offsetTop,i=i||z);var G=0,B=0,k=0,I=0;if(b)x&&S.hasTransform&&(k=P.clientLeft,I=P.clientTop);else if(x&&d!==P&&(G=P.clientLeft,B=P.clientTop),x&&P===document.body){var V=Fi(n,!1,p);R+=V[0],T+=V[1]}if(a.push({type:"target",target:n,matrix:kn(m,u,D)}),x?a.push({type:"offset",target:n,matrix:Pr([R-n.scrollLeft+G-k,T-n.scrollTop+B-I],u)}):a.push({type:"offset",target:n,origin:D}),c||(c=m),f||(f=D),l||(l=_),o||b)break;n=P,i=z,(!e||n===document.body)&&(o=i)}return c||(c=et(u)),f||(f=[0,0]),l||(l=[0,0]),{offsetContainer:d,matrixes:a,targetMatrix:c,transformOrigin:f,targetOrigin:l,is3d:s,hasFixed:v}}function Ef(t,r,e,n){e===void 0&&(e=r);var a=0,i=0,o=0,s={};if(t){var u=Yi(t),f=u.offsetWidth,l=u.offsetHeight;a=f,i=l}if(t){var c=xf(t,r,e,n),v=ue(c.allMatrix,c.transformOrigin,a,i);s=O(O({},c),v);var d=ue(c.allMatrix,[50,50],100,100);o=Xi([d.pos1,d.pos2],d.direction)}var p=n?4:3;return O({width:a,height:i,rotation:o,rootMatrix:et(p),beforeMatrix:et(p),offsetMatrix:et(p),allMatrix:et(p),targetMatrix:et(p),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1},s)}function xf(t,r,e,n){var a;e===void 0&&(e=r);var i=wa(t,r),o=i.matrixes,s=i.is3d,u=i.targetMatrix,f=i.transformOrigin,l=i.targetOrigin,c=i.offsetContainer,v=i.hasFixed,d=wa(c,e,!0),p=d.matrixes,h=d.is3d,g=n||h||s,m=g?4:3,b=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,S=u,E=et(m),M=et(m),y=et(m),x=et(m),C=o.length;p.reverse(),o.reverse(),!s&&g&&(S=Wt(S,3,4),dn(o)),!h&&g&&dn(p),p.forEach(function(P){M=Z(M,P.matrix,m)});var D=e||document.body,_=((a=p[0])===null||a===void 0?void 0:a.target)||se(D,D,!0).offsetParent,w=p.slice(1).reduce(function(P,z){return Z(P,z.matrix,m)},et(m));o.forEach(function(P,z){if(C-2===z&&(y=E.slice()),C-1===z&&(x=E.slice()),!P.matrix){var N=o[z+1],F=_f(P,N,_,m,Z(w,E,m));P.matrix=Pr(F,m)}E=Z(E,P.matrix,m)});var R=!b&&s;S||(S=et(R?4:3));var T=Me(b&&S.length===16?Wt(S,4,3):S,R);return M=ei(M,m,m),{hasFixed:v,rootMatrix:M,beforeMatrix:y,offsetMatrix:x,allMatrix:E,targetMatrix:S,targetTransform:T,transformOrigin:f,targetOrigin:l,is3d:g}}function Me(t,r){return r===void 0&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat(ni(t,!r).join(","),")")}function Fn(t){var r=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:r,clientHeight:e};var n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||r,height:a.height||e,clientWidth:r,clientHeight:e}}function yf(t,r){var e=Fn(t),n=e.width,a=e.height,i=e.clientWidth,o=e.clientHeight,s=i/n,u=o/a,f=t.preserveAspectRatio.baseVal,l=f.align,c=f.meetOrSlice,v=[0,0],d=[s,u],p=[0,0];if(l!==1){var h=(l-2)%3,g=Math.floor((l-2)/3);v[0]=n*h/2,v[1]=a*g/2;var m=c===2?Math.max(u,s):Math.min(s,u);d[0]=m,d[1]=m,p[0]=(i-n)/2*h,p[1]=(o-a)/2*g}var b=ai(d,r);return b[r*(r-1)]=p[0],b[r*(r-1)+1]=p[1],kn(b,r,v)}function Mf(t,r){if(!t.getBBox||t.tagName.toLowerCase()==="g")return[0,0,0,0];var e=t.getBBox(),n=Fn(t.ownerSVGElement),a=e.x-n.x,i=e.y-n.y;return[a,i,r[0]-a,r[1]-i]}function gt(t,r,e){return xt(t,kr(r,e),e)}function mr(t,r,e,n){return[[0,0],[r,0],[0,e],[r,e]].map(function(a){return gt(t,a,n)})}function Pt(t){var r=t.map(function(f){return f[0]}),e=t.map(function(f){return f[1]}),n=Math.min.apply(Math,r),a=Math.min.apply(Math,e),i=Math.max.apply(Math,r),o=Math.max.apply(Math,e),s=i-n,u=o-a;return{left:n,top:a,right:i,bottom:o,width:s,height:u}}function Oa(t,r,e,n){var a=mr(t,r,e,n);return Pt(a)}function _f(t,r,e,n,a){var i,o=t.target,s=t.origin,u=r.matrix,f=Yi(o),l=f.offsetWidth,c=f.offsetHeight,v=e.getBoundingClientRect(),d=[0,0];e===document.body&&(d=Fi(o,!0));for(var p=o.getBoundingClientRect(),h=p.left-v.left+e.scrollLeft-(e.clientLeft||0)+d[0],g=p.top-v.top+e.scrollTop-(e.clientTop||0)+d[1],m=p.width,b=p.height,S=Ue(n,a,u),E=Oa(S,l,c,n),M=E.left,y=E.top,x=E.width,C=E.height,D=gt(S,s,n),_=X(D,[M,y]),w=[h+_[0]*m/x,g+_[1]*b/C],R=[0,0],T=0;++T<10;){var P=Lt(a,n);i=X(gt(P,w,n),gt(P,D,n)),R[0]=i[0],R[1]=i[1];var z=Ue(n,a,Pr(R,n),u),N=Oa(z,l,c,n),F=N.left,G=N.top,B=F-h,k=G-g;if(Math.abs(B)<2&&Math.abs(k)<2)break;w[0]-=B,w[1]-=k}return R.map(function(I){return Math.round(I)})}function ue(t,r,e,n){var a=t.length===16,i=a?4:3,o=mr(t,e,n,i),s=o[0],u=s[0],f=s[1],l=o[1],c=l[0],v=l[1],d=o[2],p=d[0],h=d[1],g=o[3],m=g[0],b=g[1],S=gt(t,r,i),E=S[0],M=S[1],y=Math.min(u,c,p,m),x=Math.min(f,v,h,b),C=Math.max(u,c,p,m),D=Math.max(f,v,h,b);u=u-y||0,c=c-y||0,p=p-y||0,m=m-y||0,f=f-x||0,v=v-x||0,h=h-x||0,b=b-x||0,E=E-y||0,M=M-x||0;var _=Ve(o);return{left:y,top:x,right:C,bottom:D,origin:[E,M],pos1:[u,f],pos2:[c,v],pos3:[p,h],pos4:[m,b],direction:_}}function kt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ni(t,r){return kt([r[0]-t[0],r[1]-t[1]])}function Mr(t,r,e,n){e===void 0&&(e=1),n===void 0&&(n=ot(t,r));var a=Ni(t,r);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(e,")"),width:"".concat(a,"px")}}function Li(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=e.length,i=e.reduce(function(s,u){return s+u[0]},0)/a,o=e.reduce(function(s,u){return s+u[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(r,")")}}function Df(t){var r=yt(t);return[parseFloat(r.width),parseFloat(r.height)]}function Yi(t,r){r===void 0&&(r=yt(t));var e=!zr(t.offsetWidth);if(!e&&t.tagName.toLowerCase()!=="svg"){var n=t.getBBox(),a=n.width,i=n.height;return{svg:!0,offsetWidth:a,offsetHeight:i,clientWidth:a,clientHeight:i,cssWidth:a,cssHeight:i}}else{var o=r.boxSizing==="border-box",s=parseFloat(r.borderLeftWidth)||0,u=parseFloat(r.borderRightWidth)||0,f=parseFloat(r.borderTopWidth)||0,l=parseFloat(r.borderBottomWidth)||0,c=parseFloat(r.paddingLeft)||0,v=parseFloat(r.paddingRight)||0,d=parseFloat(r.paddingTop)||0,p=parseFloat(r.paddingBottom)||0,h=parseFloat(r.width),g=parseFloat(r.height),a=h,i=g,m=h,b=g,S=c+v,E=d+p,M=s+u,y=f+l,x=S+M,C=E+y;return o?(h=a-x,g=i-C):(a=h+x,i=g+C),m=h+S,b=g+E,{svg:!1,offsetWidth:a,offsetHeight:i,clientWidth:m,clientHeight:b,cssWidth:h,cssHeight:g}}}function Xi(t,r){return ot(r>0?t[0]:t[1],r>0?t[1]:t[0])}function pn(t,r,e,n,a){var i=1,o=[0,0],s=Le(),u=Le(),f=Le(),l=Ef(r,e,a,!1);if(r){var c=l.is3d?4:3,v=ue(l.offsetMatrix,H(l.transformOrigin,ds(l.targetMatrix,c)),l.width,l.height);i=v.direction,o=H(v.origin,[v.left-l.left,v.top-l.top]),s=ee(r),u=ee(se(n,n,!0).offsetParent||document.body,!0),t&&(f=ee(t))}return O({targetClientRect:s,containerClientRect:u,moveableClientRect:f,beforeDirection:i,beforeOrigin:o,originalBeforeOrigin:o,target:r},l)}function Le(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function ee(t,r){var e,n=0,a=0,i=0,o=0;if(t===document.body||t===document.documentElement){i=window.innerWidth,o=window.innerHeight;var s=bf();e=[-s[0],-s[1]],n=e[0],a=e[1]}else{var u=t.getBoundingClientRect();n=u.left,a=u.top,i=u.width,o=u.height}var f={left:n,right:n+i,top:a,bottom:a+o,width:i,height:o};return r&&(f.clientLeft=t.clientLeft,f.clientTop=t.clientTop,f.clientWidth=t.clientWidth,f.clientHeight=t.clientHeight,f.scrollWidth=t.scrollWidth,f.scrollHeight=t.scrollHeight,f.overflow=yt(t).overflow!=="visible"),f}function Nn(t){if(!!t){var r=t.getAttribute("data-direction");if(!!r){var e=[0,0];return r.indexOf("w")>-1&&(e[0]=-1),r.indexOf("e")>-1&&(e[0]=1),r.indexOf("n")>-1&&(e[1]=-1),r.indexOf("s")>-1&&(e[1]=1),e}}}function Ln(t,r){return[H(r,t[0]),H(r,t[1]),H(r,t[2]),H(r,t[3])]}function Dt(t){var r=t.left,e=t.top,n=t.pos1,a=t.pos2,i=t.pos3,o=t.pos4;return Ln([n,a,i,o],[r,e])}function Cf(t){return Math.round(t%1===-.5?t-1:t)}function cr(t,r){var e;(e=t[r])===null||e===void 0||e.unset(),t[r]=null}function Y(t,r,e,n){var a=r.datas;a.datas||(a.datas={});var i=O(O({},e),{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,moveable:t,datas:a.datas});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function wt(t,r,e){var n=r.datas,a="isDrag"in e?e.isDrag:r.isDrag;return n.datas||(n.datas={}),O(O({isDrag:a},e),{moveable:t,target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:r.isDouble,datas:n.datas})}function Yn(t,r,e){t._emitter.on(r,e)}function A(t,r,e,n){return t.triggerEvent(r,e,n)}function yt(t,r){return window.getComputedStyle(t,r)}function jr(t,r,e){var n={},a={};return t.filter(function(i){var o=i.name;if(n[o]||!r.some(function(s){return i[s]}))return!1;if(!e&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return n[o]=!0,!0})}function hn(t,r){return t===r||t==null&&r==null}function Rf(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var a=t[n];if(!zr(a))return a}return t[e]}function wf(t,r){var e=[],n=[];return t.forEach(function(a,i){var o=r(a,i,t),s=n.indexOf(o),u=e[s]||[];s===-1&&(n.push(o),e.push(u)),u.push(a)}),e}function Of(t,r){var e=[],n={};return t.forEach(function(a,i){var o=r(a,i,t),s=n[o];s||(s=[],n[o]=s,e.push(s)),s.push(a)}),e}function Pf(t){return t.reduce(function(r,e){return r.concat(e)},[])}function pr(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(e,n){return Math.abs(n)-Math.abs(e)}),t[0]}function vr(t,r,e){return xt(Lt(t,e),kr(r,e),e)}function Vi(t,r){var e,n=t.is3d,a=t.rootMatrix,i=n?4:3;return e=vr(a,[r.distX,r.distY],i),r.distX=e[0],r.distY=e[1],r}function $r(t,r,e,n,a){return X(gt(t,H(e,r),a),n)}function zt(t,r,e){return e?"".concat(t/r*100,"%"):"".concat(t,"px")}function fe(t){return Math.abs(t)<=Rt?0:t}function Tr(t,r){return r.isRequest?r.requestAble==="resizable"||r.requestAble==="scalable"?r.parentDirection:!1:It(r.inputEvent.target,W("direction"))}function Tf(t){var r={};for(var e in t)r[t[e]]=e;return r}function Bf(t,r){var e=t.slice(0,r<0?void 0:r),n=t.slice(0,r<0?void 0:r+1),a=t[r]||"",i=r<0?[]:t.slice(r),o=r<0?[]:t.slice(r+1),s=Qt(e),u=Qt(n),f=Qt([a]),l=Qt(i),c=Qt(o),v=ur(s),d=ur(u),p=ur(l),h=ur(c),g=Z(v,p,4);return{transforms:t,beforeFunctionMatrix:v,beforeFunctionMatrix2:d,targetFunctionMatrix:ur(f),afterFunctionMatrix:p,afterFunctionMatrix2:h,allFunctionMatrix:g,beforeFunctions:s,beforeFunctions2:u,targetFunction:f[0],afterFunctions:l,afterFunctions2:c,beforeFunctionTexts:e,beforeFunctionTexts2:n,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:o}}function zf(t){return!t||!Ft(t)||t instanceof Element?!1:nr(t)||"length"in t}function _e(t,r){return t?Gt(t)?r?document.querySelector(t):t:La(t)?t():"current"in t?t.current:t:null}function Wi(t,r){if(!t)return[];var e=zf(t)?[].slice.call(t):[t];return e.reduce(function(n,a){return Gt(a)&&r?L(L([],n,!0),[].slice.call(document.querySelectorAll(a)),!0):(n.push(_e(a,r)),n)},[])}function If(t,r){var e=[];return t.forEach(function(n){if(!!n){if(Gt(n)){r[n]&&e.push.apply(e,r[n]);return}e.push(n)}}),e}function Gf(t,r,e){var n=ot(t,r)/Math.PI*180;return n=e>=0?n:180-n,n=n>=0?n:360+n,n}function Pa(t,r){var e=t.rootMatrix,n=t.is3d,a=n?4:3,i=Lt(e,a);return n||(i=Wt(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Es(i,r)}function Hi(t,r,e,n,a){var i=t[0],o=t[1],s=0,u=0;if(a&&i&&o){var f=ot([0,0],r),l=ot([0,0],n),c=kt(r),v=Math.cos(f-l)*c;if(!n[0])u=v,s=u*e;else if(!n[1])s=v,u=s/e;else{var d=n[0]*2*i,p=n[1]*2*o,h=kt([d+r[0],p+r[1]])-kt([d,p]),g=ot([0,0],[e,1]);s=Math.cos(g)*h,u=Math.sin(g)*h}}else s=n[0]*r[0],u=n[1]*r[1];return[s,u]}function qi(t,r,e,n){var a,i=e.ratio,o=e.startOffsetWidth,s=e.startOffsetHeight,u=0,f=0,l=n.distX,c=n.distY,v=n.parentDistance,d=n.parentDist,p=n.parentScale,h=n.isPinch,g=e.fixedDirection;if(d)u=d[0],f=d[1],r&&(u?f||(f=u/i):u=f*i);else if(p)u=(p[0]-1)*o,f=(p[1]-1)*s;else if(h)v&&(u=v,f=v*s/o);else{var m=Yt({datas:e,distX:l,distY:c});m=[0,1].map(function(b){var S=Math.abs(t[b]-g[b]);return S!==0&&(S=2/S),m[b]*S}),a=Hi([o,s],m,i,t,r),u=a[0],f=a[1]}return{distWidth:u,distHeight:f}}var Af=Nr("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,r){var e=r.datas,n=r.targets,a=r.angle,i=r.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var f="onPinch".concat(n?"Group":"","Start"),l="drag".concat(n?"Group":"","ControlStart"),c=(s===!0?t.controlAbles:u.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[l]}),v=Y(t,r,{});n&&(v.targets=n);var d=A(t,f,v);e.isPinch=d!==!1,e.ables=c;var p=e.isPinch;return p?(c.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[l]){var g=O(O({},r),{datas:i[h.name],parentRotate:a,isPinch:!0});h[l](t,g)}}),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},p):!1},pinch:function(t,r){var e=r.datas,n=r.scale,a=r.distance,i=r.originalDatas,o=r.inputEvent,s=r.targets,u=r.angle;if(!!e.isPinch){var f=a*(1-1/n),l=Y(t,r,{});s&&(l.targets=s);var c="onPinch".concat(s?"Group":"");A(t,c,l);var v=e.ables,d="drag".concat(s?"Group":"","Control");return v.forEach(function(p){!p[d]||p[d](t,O(O({},r),{datas:i[p.name],inputEvent:o,parentDistance:f,parentRotate:u,isPinch:!0}))}),l}},pinchEnd:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.targets,o=r.originalDatas;if(!!e.isPinch){var s="onPinch".concat(i?"Group":"","End"),u=wt(t,r,{isDrag:n});i&&(u.targets=i),A(t,s,u);var f=e.ables,l="drag".concat(i?"Group":"","ControlEnd");return f.forEach(function(c){!c[l]||c[l](t,O(O({},r),{isDrag:n,datas:o[c.name],inputEvent:a,isPinch:!0}))}),n}},pinchGroupStart:function(t,r){return this.pinchStart(t,O(O({},r),{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,O(O({},r),{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,O(O({},r),{targets:t.props.targets}))}}),kf={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,r){var e=t.props,n=e.resizable,a=e.edge;if(n)return a?bi(t,r):On(t,r)},dragControlCondition:Tr,dragControlStart:function(t,r){var e,n=r.inputEvent,a=r.isPinch,i=r.parentDirection,o=r.datas,s=r.parentFlag,u=i||(a?[0,0]:Nn(n.target)),f=t.state,l=f.target,c=f.width,v=f.height;if(!u||!l)return!1;!a&&ir(t,r),o.datas={},o.direction=u,o.startOffsetWidth=c,o.startOffsetHeight=v,o.prevWidth=0,o.prevHeight=0,e=Df(l),o.startWidth=e[0],o.startHeight=e[1];var d=[Math.max(0,c-o.startWidth),Math.max(0,v-o.startHeight)];if(o.minSize=d,o.maxSize=[1/0,1/0],!s){var p=yt(l),h=p.position,g=p.minWidth,m=p.minHeight,b=p.maxWidth,S=p.maxHeight,E=h==="static"||h==="relative",M=E?l.parentElement:l.offsetParent,y=c,x=v;if(M&&(y=M.clientWidth,x=M.clientHeight,E)){var C=yt(M);y-=parseFloat(C.paddingLeft)||0,x-=parseFloat(C.paddingTop)||0}o.minSize=H([ut(g,y)||0,ut(m,x)||0],d),o.maxSize=H([ut(b,y)||1/0,ut(S,x)||1/0],d)}var D=t.props.transformOrigin||"% %";o.transformOrigin=D&&Gt(D)?D.split(" "):D,o.isWidth=!u[0]&&!u[1]||u[0]||!u[1];function _(P){o.ratio=P&&isFinite(P)?P:0}o.startPositions=Dt(t.state);function w(P){o.fixedDirection=P,o.fixedPosition=dt(o.startPositions,P)}_(c/v),w([-u[0],-u[1]]),o.setFixedDirection=w;var R=Y(t,r,{direction:u,set:function(P){var z=P[0],N=P[1];o.startWidth=z,o.startHeight=N},setMin:function(P){o.minSize=[ut("".concat(P[0]),0)||0,ut("".concat(P[1]),0)||0]},setMax:function(P){var z=[P[0]||1/0,P[1]||1/0];(!Xe(z[0])||isFinite(z[0]))&&(z[0]=ut("".concat(z[0]),0)||1/0),(!Xe(z[1])||isFinite(z[1]))&&(z[1]=ut("".concat(z[1]),0)||1/0),o.maxSize=z},setRatio:_,setFixedDirection:w,setOrigin:function(P){o.transformOrigin=P},dragStart:Et.dragStart(t,new Lr().dragStart([0,0],r))}),T=A(t,"onResizeStart",R);return T!==!1&&(o.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:u}),o.isResize?R:!1},dragControl:function(t,r){var e,n=r.datas,a=r.parentFlag,i=r.isPinch,o=r.parentKeepRatio,s=r.dragClient,u=r.parentDist,f=r.isRequest,l=n.isResize,c=n.transformOrigin,v=n.startWidth,d=n.startHeight,p=n.prevWidth,h=n.prevHeight,g=n.minSize,m=n.maxSize,b=n.ratio,S=n.isWidth,E=n.startOffsetWidth,M=n.startOffsetHeight;if(!l)return;var y=t.props,x=y.resizeFormat,C=y.throttleResize,D=C===void 0?1:C,_=y.parentMoveable,w=n.direction,R=w,T=0,P=0;!w[0]&&!w[1]&&(R=[1,1]);var z=b&&(o!=null?o:y.keepRatio)||!1;function N(){var $=qi(R,z,n,r);T=$.distWidth,P=$.distHeight;var rt=R[0]||z?Math.max(E+T,Rt):E,Q=R[1]||z?Math.max(M+P,Rt):M;return z&&E&&M&&(S?Q=rt/b:rt=Q*b),[rt,Q]}var F=N(),G=F[0],B=F[1];n.setFixedDirection(n.fixedDirection),A(t,"onBeforeResize",Y(t,r,{setFixedDirection:function($){var rt;return n.setFixedDirection($),rt=N(),G=rt[0],B=rt[1],[G,B]},boundingWidth:G,boundingHeight:B,setSize:function($){G=$[0],B=$[1]}},!0));var k=s;s||(!a&&i?k=Ai(t,[0,0]):k=n.fixedPosition);var I=[0,0];i||(I=Ju(t,G,B,w,k,f,n)),u&&(!u[0]&&(I[0]=0),!u[1]&&(I[1]=0));function V(){var $;x&&($=x([G,B]),G=$[0],B=$[1]),G=q(G,D),B=q(B,D)}if(z){R[0]&&R[1]&&I[0]&&I[1]&&(Math.abs(I[0])>Math.abs(I[1])?I[1]=0:I[0]=0);var at=!I[0]&&!I[1];at&&V(),R[0]&&!R[1]||I[0]&&!I[1]||at&&S?(G+=I[0],B=G/b):(!R[0]&&R[1]||!I[0]&&I[1]||at&&!S)&&(B+=I[1],G=B*b)}else G+=I[0],B+=I[1],G=Math.max(0,G),B=Math.max(0,B);e=No([G,B],g,m,b),G=e[0],B=e[1],V(),T=G-E,P=B-M;var pt=[T-p,P-h];n.prevWidth=T,n.prevHeight=P;var it=vf(t,G,B,n.fixedDirection,k,c);if(!(!_&&pt.every(function($){return!$})&&it.every(function($){return!$}))){var nt=Y(t,r,{width:v+T,height:d+P,offsetWidth:Math.round(G),offsetHeight:Math.round(B),boundingWidth:G,boundingHeight:B,direction:w,dist:[T,P],delta:pt,isPinch:!!i,drag:Et.drag(t,pe(r,t.state,it,!!i,!1))});return A(t,"onResize",nt),nt}},dragControlAfter:function(t,r){var e=r.datas,n=e.isResize,a=e.startOffsetWidth,i=e.startOffsetHeight,o=e.prevWidth,s=e.prevHeight;if(!!n){var u=t.state,f=u.width,l=u.height,c=f-(a+o),v=l-(i+s),d=Math.abs(c)>3,p=Math.abs(v)>3;if(d&&(e.startWidth+=c,e.startOffsetWidth+=c,e.prevWidth+=c),p&&(e.startHeight+=v,e.startOffsetHeight+=v,e.prevHeight+=v),d||p)return this.dragControl(t,r)}},dragControlEnd:function(t,r){var e=r.datas;if(!!e.isResize){e.isResize=!1;var n=wt(t,r,{});return A(t,"onResizeEnd",n),n}},dragGroupControlCondition:Tr,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var a=Kt(t,"resizable",r);function i(l,c){var v=e.fixedDirection,d=e.fixedPosition,p=c.datas.startPositions||Dt(l.state),h=dt(p,v),g=xt(dr(-t.rotation/180*Math.PI,3),[h[0]-d[0],h[1]-d[1],1],3),m=g[0],b=g[1];return c.datas.originalX=m,c.datas.originalY=b,c}var o=Vt(t,this,"dragControlStart",r,function(l,c){return i(l,c)}),s=function(l){n.setFixedDirection(l),o.forEach(function(c,v){c.setFixedDirection(l),i(c.moveable,a[v])})};e.setFixedDirection=s;var u=O(O({},n),{targets:t.props.targets,events:o,setFixedDirection:s}),f=A(t,"onResizeGroupStart",u);return e.isResize=f!==!1,e.isResize?n:!1},dragGroupControl:function(t,r){var e=r.datas;if(!!e.isResize){Yn(t,"onBeforeResize",function(v){A(t,"onBeforeResizeGroup",Y(t,r,O(O({},v),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(!!n){var a=n.boundingWidth,i=n.boundingHeight,o=n.dist,s=t.props.keepRatio,u=[a/(a-o[0]),i/(i-o[1])],f=e.fixedPosition,l=Vt(t,this,"dragControl",r,function(v,d){var p=xt(dr(t.rotation/180*Math.PI,3),[d.datas.originalX*u[0],d.datas.originalY*u[1],1],3),h=p[0],g=p[1];return O(O({},d),{parentDist:null,parentScale:u,dragClient:H(f,[h,g]),parentKeepRatio:s})}),c=O({targets:t.props.targets,events:l},n);return A(t,"onResizeGroup",c),c}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(!!n.isResize){this.dragControlEnd(t,r);var a=Vt(t,this,"dragControlEnd",r),i=wt(t,r,{targets:t.props.targets,events:a});return A(t,"onResizeGroupEnd",i),e}},request:function(t){var r={},e=0,n=0,a=t.getRect();return{isControl:!0,requestStart:function(i){return{datas:r,parentDirection:i.direction||[1,1]}},request:function(i){return"offsetWidth"in i?e=i.offsetWidth-a.offsetWidth:"deltaWidth"in i&&(e+=i.deltaWidth),"offsetHeight"in i?n=i.offsetHeight-a.offsetHeight:"deltaHeight"in i&&(n+=i.deltaHeight),{datas:r,parentDist:[e,n],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:r,isDrag:!0}}}}},Ff={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,r){var e=t.props,n=e.resizable,a=e.scalable,i=e.edge;if(!n&&a)return i?bi(t,r):On(t,r)},dragControlCondition:Tr,dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.parentDirection,o=i||(n?[0,0]:Nn(a.target)),s=t.state,u=s.width,f=s.height,l=s.targetTransform,c=s.target,v=s.pos1,d=s.pos2,p=s.pos4;if(!o||!c)return!1;n||ir(t,r),e.datas={},e.transform=l,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=u,e.startOffsetHeight=f,e.startValue=[1,1];var h=Xt(v,d),g=Xt(d,p),m=!o[0]&&!o[1]||o[0]||!o[1];e.scaleWidth=h,e.scaleHeight=g,e.scaleXRatio=h/u,e.scaleYRatio=g/f,ye(r,"scale"),e.isWidth=m;function b(y){e.ratio=y&&isFinite(y)?y:0}e.startPositions=Dt(t.state);function S(y){e.fixedDirection=y,e.fixedPosition=dt(e.startPositions,y)}e.setFixedDirection=S,b(Xt(v,d)/Xt(d,p)),S([-o[0],-o[1]]);var E=Y(t,r,O(O({direction:o,set:function(y){e.startValue=y},setRatio:b,setFixedDirection:S},xe(r)),{dragStart:Et.dragStart(t,new Lr().dragStart([0,0],r))})),M=A(t,"onScaleStart",E);return M!==!1&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),e.isScale?E:!1},dragControl:function(t,r){be(r,"scale");var e=r.datas,n=r.parentKeepRatio,a=r.parentFlag,i=r.isPinch,o=r.dragClient,s=r.isRequest,u=e.prevDist,f=e.direction,l=e.startOffsetWidth,c=e.startOffsetHeight,v=e.isScale,d=e.startValue,p=e.isWidth,h=e.ratio;if(!v)return!1;var g=t.props,m=g.throttleScale,b=g.parentMoveable,S=f;!f[0]&&!f[1]&&(S=[1,1]);var E=h&&(n!=null?n:g.keepRatio)||!1,M=t.state;function y(){var I=qi(S,E,e,r),V=I.distWidth,at=I.distHeight,pt=(l+V)/l,it=(c+at)/c;return pt=S[0]||E?pt*d[0]:d[0],it=S[1]||E?it*d[1]:d[1],pt===0&&(pt=(u[0]>0?1:-1)*qr),it===0&&(it=(u[1]>0?1:-1)*qr),[pt,it]}var x=y();if(!i&&t.props.groupable){var C=M.snapRenderInfo||{},D=C.direction;nr(D)&&(D[0]||D[1])&&(M.snapRenderInfo={direction:f,request:r.isRequest})}A(t,"onBeforeScale",Y(t,r,{scale:x,setFixedDirection:function(I){return e.setFixedDirection(I),x=y(),x},setScale:function(I){x=I}},!0));var _=[x[0]/d[0],x[1]/d[1]],w=o,R=[0,0];if(o||(!a&&i?w=Ai(t,[0,0]):w=e.fixedPosition),i||(R=Qu(t,_,f,s,e)),E){S[0]&&S[1]&&R[0]&&R[1]&&(Math.abs(R[0]*l)>Math.abs(R[1]*c)?R[1]=0:R[0]=0);var T=!R[0]&&!R[1];if(T&&(p?_[0]=q(_[0]*d[0],m)/d[0]:_[1]=q(_[1]*d[1],m)/d[1]),S[0]&&!S[1]||R[0]&&!R[1]||T&&p){_[0]+=R[0];var P=l*_[0]*d[0]/h;_[1]=P/c/d[1]}else if(!S[0]&&S[1]||!R[0]&&R[1]||T&&!p){_[1]+=R[1];var z=c*_[1]*d[1]*h;_[0]=z/l/d[0]}}else _[0]+=R[0],_[1]+=R[1],R[0]||(_[0]=q(_[0]*d[0],m)/d[0]),R[1]||(_[1]=q(_[1]*d[1],m)/d[1]);_[0]===0&&(_[0]=(u[0]>0?1:-1)*qr),_[1]===0&&(_[1]=(u[1]>0?1:-1)*qr);var N=[_[0]/u[0],_[1]/u[1]];x=df(_,d);var F=lf(t,_,e.fixedDirection,w,e),G=X(F,e.prevInverseDist||[0,0]);if(e.prevDist=_,e.prevInverseDist=F,x[0]===u[0]&&x[1]===u[1]&&G.every(function(I){return!I})&&!b)return!1;var B=Se(e,"scale(".concat(x.join(", "),")"),"scale(".concat(_.join(", "),")")),k=Y(t,r,O({offsetWidth:l,offsetHeight:c,direction:f,scale:x,dist:_,delta:N,isPinch:!!i},Bi(t,B,G,i,r)));return A(t,"onScale",k),k},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return e.isScale?(e.isScale=!1,A(t,"onScaleEnd",wt(t,r,{})),n):!1},dragGroupControlCondition:Tr,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var a=Kt(t,"resizable",r);function i(l,c){var v=e.fixedDirection,d=e.fixedPosition,p=c.datas.startPositions||Dt(l.state),h=dt(p,v),g=xt(dr(-t.rotation/180*Math.PI,3),[h[0]-d[0],h[1]-d[1],1],3),m=g[0],b=g[1];return c.datas.originalX=m,c.datas.originalY=b,c}e.moveableScale=t.scale;var o=Vt(t,this,"dragControlStart",r,function(l,c){return i(l,c)}),s=function(l){n.setFixedDirection(l),o.forEach(function(c,v){c.setFixedDirection(l),i(c.moveable,a[v])})};e.setFixedDirection=s;var u=O(O({},n),{targets:t.props.targets,events:o,setFixedDirection:s}),f=A(t,"onScaleGroupStart",u);return e.isScale=f!==!1,e.isScale?u:!1},dragGroupControl:function(t,r){var e=r.datas;if(!!e.isScale){Yn(t,"onBeforeScale",function(c){A(t,"onBeforeScaleGroup",Y(t,r,O(O({},c),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(!!n){var a=e.moveableScale;t.scale=[n.scale[0]*a[0],n.scale[1]*a[1]];var i=t.props.keepRatio,o=n.dist,s=n.scale,u=e.fixedPosition,f=Vt(t,this,"dragControl",r,function(c,v){var d=xt(dr(t.rotation/180*Math.PI,3),[v.datas.originalX*o[0],v.datas.originalY*o[1],1],3),p=d[0],h=d[1];return O(O({},v),{parentDist:null,parentScale:s,parentKeepRatio:i,dragClient:H(u,[p,h])})}),l=O({targets:t.props.targets,events:f},n);return A(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(!!n.isScale){this.dragControlEnd(t,r);var a=Vt(t,this,"dragControlEnd",r),i=wt(t,r,{targets:t.props.targets,events:a});return A(t,"onScaleGroupEnd",i),e}},request:function(){var t={},r=0,e=0;return{isControl:!0,requestStart:function(n){return{datas:t,parentDirection:n.direction||[1,1]}},request:function(n){return r+=n.deltaWidth,e+=n.deltaHeight,{datas:t,parentDist:[r,e],parentKeepRatio:n.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ht(t,r){return t.map(function(e,n){return zo(e,r[n],1,2)})}function Ta(t,r,e){var n=ot(t,r),a=ot(t,e),i=a-n;return i>=0?i:i+2*Math.PI}function Nf(t,r){var e=Ta(t[0],t[1],t[2]),n=Ta(r[0],r[1],r[2]),a=Math.PI;return!(e>=a&&n<=a||e<=a&&n>=a)}var Lf={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,r){var e=t.props,n=e.resizable,a=e.scalable,i=e.warpable,o=e.zoom;if(n||a||!i)return[];var s=t.state,u=s.pos1,f=s.pos2,l=s.pos3,c=s.pos4,v=Ht(u,f),d=Ht(f,u),p=Ht(u,l),h=Ht(l,u),g=Ht(l,c),m=Ht(c,l),b=Ht(f,c),S=Ht(c,f);return L([r.createElement("div",{className:W("line"),key:"middeLine1",style:Mr(v,g,o)}),r.createElement("div",{className:W("line"),key:"middeLine2",style:Mr(d,m,o)}),r.createElement("div",{className:W("line"),key:"middeLine3",style:Mr(p,b,o)}),r.createElement("div",{className:W("line"),key:"middeLine4",style:Mr(h,S,o)})],On(t,r),!0)},dragControlCondition:function(t,r){return r.isRequest?!1:It(r.inputEvent.target,W("direction"))},dragControlStart:function(t,r){var e=r.datas,n=r.inputEvent,a=t.props.target,i=n.target,o=Nn(i);if(!o||!a)return!1;var s=t.state,u=s.transformOrigin,f=s.is3d,l=s.targetTransform,c=s.targetMatrix,v=s.width,d=s.height,p=s.left,h=s.top;e.datas={},e.targetTransform=l,e.warpTargetMatrix=f?c:Wt(c,3,4),e.targetInverseMatrix=ei(Lt(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=p,e.top=h,e.poses=[[0,0],[v,0],[0,d],[v,d]].map(function(b){return X(b,u)}),e.nextPoses=e.poses.map(function(b){var S=b[0],E=b[1];return xt(e.warpTargetMatrix,[S,E,0,1],4)}),e.startValue=et(4),e.prevMatrix=et(4),e.absolutePoses=Dt(s),e.posIndexes=Pi(o),ir(t,r),ye(r,"matrix3d"),s.snapRenderInfo={request:r.isRequest,direction:o};var g=Y(t,r,O({set:function(b){e.startValue=b}},xe(r))),m=A(t,"onWarpStart",g);return m!==!1&&(e.isWarp=!0),e.isWarp},dragControl:function(t,r){var e=r.datas,n=r.isRequest,a=r.distX,i=r.distY,o=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,f=e.startValue,l=e.poses,c=e.posIndexes,v=e.absolutePoses;if(!u)return!1;if(be(r,"matrix3d"),gr(t,"warpable")){var d=c.map(function(D){return v[D]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=me(t,n,{horizontal:d.map(function(D){return D[1]+i}),vertical:d.map(function(D){return D[0]+a})}),h=p.horizontal,g=p.vertical;i-=h.offset,a-=g.offset}var m=Yt({datas:e,distX:a,distY:i},!0),b=e.nextPoses.slice();if(c.forEach(function(D){b[D]=H(b[D],m)}),!lu.every(function(D){return Nf(D.map(function(_){return l[_]}),D.map(function(_){return b[_]}))}))return!1;var S=Cn(l[0],l[2],l[1],l[3],b[0],b[2],b[1],b[3]);if(!S.length)return!1;var E=Z(o,S,4),M=wi(e,E,!0),y=Z(Lt(s,4),M,4);e.prevMatrix=M;var x=Z(f,M,4),C=Se(e,"matrix3d(".concat(x.join(", "),")"),"matrix3d(".concat(M.join(", "),")"));return An(r,C),A(t,"onWarp",Y(t,r,{delta:y,matrix:x,dist:M,multiply:Z,transform:C})),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return e.isWarp?(e.isWarp=!1,A(t,"onWarpEnd",wt(t,r,{})),n):!1}},Yf=W("area-pieces"),Ur=W("area-piece"),ji=W("avoid");function Ye(t){var r=t.areaElement;if(!!r){var e=t.state,n=e.width,a=e.height;Vo(r,ji),r.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function Ba(t){return t.createElement("div",{key:"area_pieces",className:Yf},t.createElement("div",{className:Ur}),t.createElement("div",{className:Ur}),t.createElement("div",{className:Ur}),t.createElement("div",{className:Ur}))}var $i={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,r){var e=t.props,n=e.target,a=e.dragArea,i=e.groupable,o=e.passDragArea,s=t.state,u=s.width,f=s.height,l=s.renderPoses,c=o?W("area","pass"):W("area");if(i)return[r.createElement("div",{key:"area",ref:At(t,"areaElement"),className:c}),Ba(r)];if(!n||!a)return[];var v=Cn([0,0],[u,0],[0,f],[u,f],l[0],l[1],l[2],l[3]),d=v.length?Me(v,!0):"none";return[r.createElement("div",{key:"area",ref:At(t,"areaElement"),className:c,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:d}}),Ba(r)]},dragStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=r.inputEvent;if(!i)return!1;e.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,f=s.renderPoses,l=s.rootMatrix,c=s.is3d,v=u.left,d=u.top,p=Pt(f),h=p.left,g=p.top,m=p.width,b=p.height,S=c?4:3,E=vr(l,[n-v,a-d],S),M=E[0],y=E[1];M-=h,y-=g;var x=[{left:h,top:g,width:m,height:y-10},{left:h,top:g,width:M-10,height:b},{left:h,top:g+y+10,width:m,height:b-y-10},{left:h+M+10,top:g,width:m-M-10,height:b}],C=[].slice.call(o.nextElementSibling.children);x.forEach(function(D,_){C[_].style.cssText="left: ".concat(D.left,"px;top: ").concat(D.top,"px; width: ").concat(D.width,"px; height: ").concat(D.height,"px;")}),Xo(o,ji),s.disableNativeEvent=!0},drag:function(t,r){var e=r.datas,n=r.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,Ye(t))},dragEnd:function(t,r){this.enableNativeEvent(t);var e=r.inputEvent,n=r.datas;if(!e)return!1;n.isDragArea||Ye(t)},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){return this.dragEnd(t,r)},unset:function(t){Ye(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var r=t.state;r.disableNativeEvent&&Sn(function(){r.disableNativeEvent=!1})}},Xf=Nr("origin",{render:function(t,r){var e=t.props.zoom,n=t.state,a=n.beforeOrigin,i=n.rotation;return[r.createElement("div",{className:W("control","origin"),style:Li(i,e,a),key:"beforeOrigin"})]}});function Vf(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var Wf={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,r){var e=t.props,n=e.scrollContainer,a=n===void 0?t.getContainer():n,i=new Fs,o=_e(a,!0);r.datas.dragScroll=i;var s=r.isControl?"controlGesto":"targetGesto",u=r.targets;i.on("scroll",function(f){var l=f.container,c=f.direction,v=Y(t,r,{scrollContainer:l,direction:c}),d=u?"onScrollGroup":"onScroll";u&&(v.targets=u),A(t,d,v)}).on("move",function(f){var l=f.offsetX,c=f.offsetY;t[s].scrollBy(l,c,r.inputEvent,!1)}),i.dragStart(r,{container:o})},checkScroll:function(t,r){var e=r.datas.dragScroll;if(!!e){var n=t.props,a=n.scrollContainer,i=a===void 0?t.getContainer():a,o=n.scrollThreshold,s=o===void 0?0:o,u=n.getScrollPosition,f=u===void 0?Vf:u;return e.drag(r,{container:i,threshold:s,getScrollPosition:function(l){return f({scrollContainer:l.container,direction:l.direction})}}),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,O(O({},r),{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,O(O({},r),{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,O(O({},r),{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,O(O({},r),{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,O(O({},r),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,r){return this.drag(t,O(O({},r),{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,O(O({},r),{targets:t.props.targets}))}},Ui={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},Hf=Nr("padding",{render:function(t,r){var e=t.props;if(e.dragArea)return[];var n=e.padding||{},a=n.left,i=a===void 0?0:a,o=n.top,s=o===void 0?0:o,u=n.right,f=u===void 0?0:u,l=n.bottom,c=l===void 0?0:l,v=t.state,d=v.renderPoses,p=v.pos1,h=v.pos2,g=v.pos3,m=v.pos4,b=[p,h,g,m],S=[];return i>0&&S.push([0,2]),s>0&&S.push([0,1]),f>0&&S.push([1,3]),c>0&&S.push([2,3]),S.map(function(E,M){var y=E[0],x=E[1],C=b[y],D=b[x],_=d[y],w=d[x],R=Cn([0,0],[100,0],[0,100],[100,100],C,D,_,w);if(!!R.length)return r.createElement("div",{key:"padding".concat(M),className:W("padding"),style:{transform:Me(R,!0)}})})}}),za=["nw","ne","se","sw"];function Kr(t,r){var e=t[0]+t[1],n=e>r?r/e:1;return t[0]*=n,t[1]=r-t[1]*n,t}var qf=[1,2,5,6],jf=[0,3,4,7],tr=[1,-1,-1,1],rr=[1,1,-1,-1];function Xn(t,r,e,n,a,i,o,s,u){i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=n),u===void 0&&(u=a);var f=[],l=!1,c=t.map(function(v,d){var p=r[d],h=p.horizontal,g=p.vertical;if(g&&!l&&(l=!0,f.push("/")),l){var m=Math.max(0,g===1?v[1]-o:u-v[1]);return f.push(zt(m,a,e)),m}else{var m=Math.max(0,h===1?v[0]-i:s-v[0]);return f.push(zt(m,n,e)),m}});return{styles:f,raws:c}}function Ki(t){for(var r=[0,0],e=[0,0],n=t.length,a=0;a<n;++a){var i=t[a];!i.sub||(i.horizontal&&(r[1]===0&&(r[0]=a),r[1]=a-r[0]+1,e[0]=a+1),i.vertical&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1))}return{horizontalRange:r,verticalRange:e}}function Zi(t,r,e,n,a,i){var o,s,u,f;i===void 0&&(i=[0,0]);var l=t.indexOf("/"),c=(l>-1?t.slice(0,l):t).length,v=t.slice(0,c),d=t.slice(c+1),p=v[0],h=p===void 0?"0px":p,g=v[1],m=g===void 0?h:g,b=v[2],S=b===void 0?h:b,E=v[3],M=E===void 0?m:E,y=d[0],x=y===void 0?h:y,C=d[1],D=C===void 0?x:C,_=d[2],w=_===void 0?x:_,R=d[3],T=R===void 0?D:R,P=[h,m,S,M].map(function(k){return ut(k,r)}),z=[x,D,w,T].map(function(k){return ut(k,e)}),N=P.slice(),F=z.slice();o=Kr([N[0],N[1]],r),N[0]=o[0],N[1]=o[1],s=Kr([N[3],N[2]],r),N[3]=s[0],N[2]=s[1],u=Kr([F[0],F[3]],e),F[0]=u[0],F[3]=u[1],f=Kr([F[1],F[2]],e),F[1]=f[0],F[2]=f[1];var G=N.slice(0,Math.max(i[0],v.length)),B=F.slice(0,Math.max(i[1],d.length));return L(L([],G.map(function(k,I){var V=za[I];return{horizontal:tr[I],vertical:0,pos:[n+k,a+(rr[I]===-1?e:0)],sub:!0,raw:P[I],direction:V}}),!0),B.map(function(k,I){var V=za[I];return{horizontal:0,vertical:rr[I],pos:[n+(tr[I]===-1?r:0),a+k],sub:!0,raw:z[I],direction:V}}),!0)}function Ji(t,r,e,n,a){a===void 0&&(a=r.length);var i=Ki(t.slice(n)),o=i.horizontalRange,s=i.verticalRange,u=e-n,f=0;if(u===0)f=a;else if(u>0&&u<o[1])f=o[1]-u;else if(u>=s[0])f=s[0]+s[1]-u;else return;t.splice(e,f),r.splice(e,f)}function Qi(t,r,e,n,a,i,o,s,u,f,l){f===void 0&&(f=0),l===void 0&&(l=0);var c=Ki(t.slice(e)),v=c.horizontalRange,d=c.verticalRange;if(n>-1)for(var p=tr[n]===1?i-f:s-i,h=v[1];h<=n;++h){var g=rr[h]===1?l:u,m=0;if(n===h?m=i:h===0?m=f+p:tr[h]===-1&&(m=s-(r[e][0]-f)),t.splice(e+h,0,{horizontal:tr[h],vertical:0,pos:[m,g]}),r.splice(e+h,0,[m,g]),h===0)break}else if(a>-1){var b=rr[a]===1?o-l:u-o;if(v[1]===0&&d[1]===0){var S=[f+b,l];t.push({horizontal:tr[0],vertical:0,pos:S}),r.push(S)}for(var E=d[0],h=d[1];h<=a;++h){var m=tr[h]===1?f:s,g=0;if(a===h?g=o:h===0?g=l+b:rr[h]===1?g=r[e+E][1]:rr[h]===-1&&(g=u-(r[e+E][1]-l)),t.push({horizontal:0,vertical:rr[h],pos:[m,g]}),r.push([m,g]),h===0)break}}}function to(t,r){r===void 0&&(r=t.map(function(a){return a.raw}));var e=t.map(function(a,i){return a.horizontal?r[i]:null}).filter(function(a){return a!=null}),n=t.map(function(a,i){return a.vertical?r[i]:null}).filter(function(a){return a!=null});return{horizontals:e,verticals:n}}var $f=[[0,-1,"n"],[1,0,"e"]],Uf=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Vn(t,r,e){var n=t.props.clipRelative,a=t.state,i=a.width,o=a.height,s=r,u=s.type,f=s.poses,l=u==="rect",c=u==="circle";if(u==="polygon")return e.map(function(y){return"".concat(zt(y[0],i,n)," ").concat(zt(y[1],o,n))});if(l||u==="inset"){var v=e[1][1],d=e[3][0],p=e[7][0],h=e[5][1];if(l)return[v,d,h,p].map(function(y){return"".concat(y,"px")});var g=[v,i-d,o-h,p].map(function(y,x){return zt(y,x%2?i:o,n)});if(e.length>8){var m=X(e[4],e[0]),b=m[0],S=m[1];g.push.apply(g,L(["round"],Xn(e.slice(8),f.slice(8),n,b,S,p,v,d,h).styles,!1))}return g}else if(c||u==="ellipse"){var E=e[0],M=zt(Math.abs(e[1][1]-E[1]),c?Math.sqrt((i*i+o*o)/2):o,n),g=c?[M]:[zt(Math.abs(e[2][0]-E[0]),i,n),M];return g.push("at",zt(E[0],i,n),zt(E[1],o,n)),g}}function le(t,r,e,n){var a=[n,(n+r)/2,r],i=[t,(t+e)/2,e];return Uf.map(function(o){var s=o[0],u=o[1],f=o[2],l=a[s+1],c=i[u+1];return{vertical:Math.abs(u),horizontal:Math.abs(s),direction:f,pos:[l,c]}})}function ro(t){var r=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(n){var a=n.pos;r[0]=Math.min(r[0],a[0]),r[1]=Math.max(r[1],a[0]),e[0]=Math.min(e[0],a[1]),e[1]=Math.max(e[1],a[1])}),[Math.abs(r[1]-r[0]),Math.abs(e[1]-e[0])]}function Kf(t,r,e,n,a){var i=t[r],o=i.direction,s=i.sub,u=t.map(function(){return[0,0]}),f=o?o.split(""):[];if(n&&r<8){var l=f.filter(function(T){return T==="w"||T==="e"}),c=f.filter(function(T){return T==="n"||T==="s"}),v=l[0],d=c[0];u[r]=e;var p=ro(t),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&a){var b=(r+4)%8,S=t[b].pos,E=[0,0];o.indexOf("w")>-1?E[0]=-1:o.indexOf("e")>-1&&(E[0]=1),o.indexOf("n")>-1?E[1]=-1:o.indexOf("s")>-1&&(E[1]=1);var M=Hi([h,g],e,m,E,!0),y=h+M[0],x=g+M[1],C=S[1],D=S[1],_=S[0],w=S[0];E[0]===-1?_=w-y:E[0]===1?w=_+y:(_=_-y/2,w=w+y/2),E[1]===-1?C=D-x:(E[1]===1||(C=D-x/2),D=C+x);var R=le(C,w,D,_);t.forEach(function(T,P){u[P][0]=R[P].pos[0]-T.pos[0],u[P][1]=R[P].pos[1]-T.pos[1]})}else t.forEach(function(T,P){var z=T.direction;!z||(z.indexOf(v)>-1&&(u[P][0]=e[0]),z.indexOf(d)>-1&&(u[P][1]=e[1]))}),v&&(u[1][0]=e[0]/2,u[5][0]=e[0]/2),d&&(u[3][1]=e[1]/2,u[7][1]=e[1]/2)}else o&&!s?f.forEach(function(T){var P=T==="n"||T==="s";t.forEach(function(z,N){var F=z.direction,G=z.horizontal,B=z.vertical;!F||F.indexOf(T)===-1||(u[N]=[P||!G?0:e[0],!P||!B?0:e[1]])})}):u[r]=e;return u}function Ia(t,r,e,n,a){var i,o,s,u,f,l,c,v=a;if(!v){var d=yt(t),p=d.clipPath;v=p!=="none"?p:d.clip}if(!((!v||v==="none"||v==="auto")&&(v=n,!v))){var h=Va(v),g=h.prefix,m=g===void 0?v:g,b=h.value,S=b===void 0?"":b,E=m==="circle",M=" ";if(m==="polygon"){var y=er(S||"0% 0%, 100% 0%, 100% 100%, 0% 100%");M=",";var x=y.map(function(lt){var st=lt.split(" "),K=st[0],Tt=st[1];return{vertical:1,horizontal:1,pos:[ut(K,r),ut(Tt,e)]}});return{type:m,clipText:v,poses:x,splitter:M}}else if(E||m==="ellipse"){var C="",D="",_=0,w=0,y=Ut(S);if(E){var R="";i=y[0],R=i===void 0?"50%":i,o=y[2],C=o===void 0?"50%":o,s=y[3],D=s===void 0?"50%":s,_=ut(R,Math.sqrt((r*r+e*e)/2)),w=_}else{var T="",P="";u=y[0],T=u===void 0?"50%":u,f=y[1],P=f===void 0?"50%":f,l=y[3],C=l===void 0?"50%":l,c=y[4],D=c===void 0?"50%":c,_=ut(T,r),w=ut(P,e)}var z=[ut(C,r),ut(D,e)],x=L([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],$f.slice(0,E?1:2).map(function(K){return{vertical:Math.abs(K[1]),horizontal:K[0],direction:K[2],sub:!0,pos:[z[0]+K[0]*_,z[1]+K[1]*w]}}),!0);return{type:m,clipText:v,radiusX:_,radiusY:w,left:z[0]-_,top:z[1]-w,poses:x,splitter:M}}else if(m==="inset"){var y=Ut(S||"0 0 0 0"),N=y.indexOf("round"),F=(N>-1?y.slice(0,N):y).length,G=y.slice(F+1),B=y.slice(0,F),k=B[0],I=B[1],V=I===void 0?k:I,at=B[2],pt=at===void 0?k:at,it=B[3],nt=it===void 0?V:it,$=[k,pt].map(function(K){return ut(K,e)}),rt=$[0],Q=$[1],bt=[nt,V].map(function(K){return ut(K,r)}),ht=bt[0],Ct=bt[1],mt=r-Ct,tt=e-Q,U=Zi(G,mt-ht,tt-rt,ht,rt),x=L(L([],le(rt,mt,tt,ht),!0),U,!0);return{type:"inset",clipText:v,poses:x,top:rt,left:ht,right:mt,bottom:tt,radius:G,splitter:M}}else if(m==="rect"){var y=er(S||"0px, ".concat(r,"px, ").concat(e,"px, 0px"));M=",";var ft=y.map(function(or){var Yr=Ir(or).value;return Yr}),rt=ft[0],Ct=ft[1],Q=ft[2],ht=ft[3],x=le(rt,Ct,Q,ht);return{type:"rect",clipText:v,poses:x,top:rt,right:Ct,bottom:Q,left:ht,values:y,splitter:M}}}}function Zf(t,r){var e=Ri(t,r),n=e[0],a=e[1],i=r.datas,o=i.clipPath,s=i.clipIndex,u=o,f=u.type,l=u.poses,c=u.splitter,v=l.map(function(m){return m.pos});if(f==="polygon")v.splice(s,0,[n,a]);else if(f==="inset"){var d=qf.indexOf(s),p=jf.indexOf(s),h=l.length;if(Qi(l,v,8,d,p,n,a,v[4][0],v[4][1],v[0][0],v[0][1]),h===l.length)return}else return;var g=Vn(t,o,v);A(t,"onClip",Y(t,r,{clipEventType:"added",clipType:f,poses:v,clipStyles:g,clipStyle:"".concat(f,"(").concat(g.join(c),")"),distX:0,distY:0}))}function Jf(t,r){var e=r.datas,n=e.clipPath,a=e.clipIndex,i=n,o=i.type,s=i.poses,u=i.splitter,f=s.map(function(v){return v.pos}),l=f.length;if(o==="polygon")s.splice(a,1),f.splice(a,1);else if(o==="inset"){if(a<8||(Ji(s,f,a,8,l),l===s.length))return}else return;var c=Vn(t,n,f);A(t,"onClip",Y(t,r,{clipEventType:"removed",clipType:o,poses:f,clipStyles:c,clipStyle:"".concat(o,"(").concat(c.join(u),")"),distX:0,distY:0}))}var Qf={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,r){var e=t.props,n=e.customClipPath,a=e.defaultClipPath,i=e.clipArea,o=e.zoom,s=t.state,u=s.target,f=s.width,l=s.height,c=s.allMatrix,v=s.is3d,d=s.left,p=s.top,h=s.pos1,g=s.pos2,m=s.pos3,b=s.pos4,S=s.clipPathState,E=s.snapBoundInfos,M=s.rotation;if(!u)return[];var y=Ia(u,f,l,a||"inset",S||n);if(!y)return[];var x=v?4:3,C=y.type,D=y.poses,_=D.map(function(tt){var U=gt(c,tt.pos,x);return[U[0]-d,U[1]-p]}),w=[],R=[],T=C==="rect",P=C==="inset",z=C==="polygon";if(T||P||z){var N=P?_.slice(0,8):_;R=N.map(function(tt,U){var ft=U===0?N[N.length-1]:N[U-1],lt=ot(ft,tt),st=Ni(ft,tt);return r.createElement("div",{key:"clipLine".concat(U),className:W("line","clip-line","snap-control"),"data-clip-index":U,style:{width:"".concat(st,"px"),transform:"translate(".concat(ft[0],"px, ").concat(ft[1],"px) rotate(").concat(lt,"rad) scaleY(").concat(o,")")}})})}if(w=_.map(function(tt,U){return r.createElement("div",{key:"clipControl".concat(U),className:W("control","clip-control","snap-control"),"data-clip-index":U,style:{transform:"translate(".concat(tt[0],"px, ").concat(tt[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})}),P&&w.push.apply(w,_.slice(8).map(function(tt,U){return r.createElement("div",{key:"clipRadiusControl".concat(U),className:W("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+U,style:{transform:"translate(".concat(tt[0],"px, ").concat(tt[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})})),C==="circle"||C==="ellipse"){var F=y.left,G=y.top,B=y.radiusX,k=y.radiusY,I=X(gt(c,[F,G],x),gt(c,[0,0],x)),V=I[0],at=I[1],pt="none";if(!i){for(var it=Math.max(10,B/5,k/5),nt=[],$=0;$<=it;++$){var rt=Math.PI*2/it*$;nt.push([B+(B-o)*Math.cos(rt),k+(k-o)*Math.sin(rt)])}nt.push([B,-2]),nt.push([-2,-2]),nt.push([-2,k*2+2]),nt.push([B*2+2,k*2+2]),nt.push([B*2+2,-2]),nt.push([B,-2]),pt="polygon(".concat(nt.map(function(tt){return"".concat(tt[0],"px ").concat(tt[1],"px")}).join(", "),")")}w.push(r.createElement("div",{key:"clipEllipse",className:W("clip-ellipse","snap-control"),style:{width:"".concat(B*2,"px"),height:"".concat(k*2,"px"),clipPath:pt,transform:"translate(".concat(-d+V,"px, ").concat(-p+at,"px) ").concat(Me(c))}}))}if(i){var Q=Pt(L([h,g,m,b],_,!0)),bt=Q.width,ht=Q.height,Ct=Q.left,mt=Q.top;if(z||T||P){var nt=P?_.slice(0,8):_;w.push(r.createElement("div",{key:"clipArea",className:W("clip-area","snap-control"),style:{width:"".concat(bt,"px"),height:"".concat(ht,"px"),transform:"translate(".concat(Ct,"px, ").concat(mt,"px)"),clipPath:"polygon(".concat(nt.map(function(U){return"".concat(U[0]-Ct,"px ").concat(U[1]-mt,"px")}).join(", "),")")}}))}}return E&&["vertical","horizontal"].forEach(function(tt){var U=E[tt],ft=tt==="horizontal";U.isSnap&&R.push.apply(R,U.snap.posInfos.map(function(lt,st){var K=lt.pos,Tt=X(gt(c,ft?[0,K]:[K,0],x),[d,p]),br=X(gt(c,ft?[f,K]:[K,l],x),[d,p]);return lr(r,"",Tt,br,o,"clip".concat(tt,"snap").concat(st),"guideline")})),U.isBound&&R.push.apply(R,U.bounds.map(function(lt,st){var K=lt.pos,Tt=X(gt(c,ft?[0,K]:[K,0],x),[d,p]),br=X(gt(c,ft?[f,K]:[K,l],x),[d,p]);return lr(r,"",Tt,br,o,"clip".concat(tt,"bounds").concat(st),"guideline","bounds","bold")}))}),L(L([],w,!0),R,!0)},dragControlCondition:function(t,r){return r.inputEvent&&(r.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,r){var e=t.props,n=e.dragWithClip,a=n===void 0?!0:n;return a?!1:this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,O(O({},r),{isDragTarget:!0}))},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var e=t.state,n=t.props,a=n.defaultClipPath,i=n.customClipPath,o=e.target,s=e.width,u=e.height,f=r.inputEvent?r.inputEvent.target:null,l=f&&f.getAttribute("class")||"",c=r.datas,v=Ia(o,s,u,a||"inset",i);if(!v)return!1;var d=v.clipText,p=v.type,h=v.poses,g=A(t,"onClipStart",Y(t,r,{clipType:p,clipStyle:d,poses:h.map(function(m){return m.pos})}));return g===!1?(c.isClipStart=!1,!1):(c.isControl=l&&l.indexOf("clip-control")>-1,c.isLine=l.indexOf("clip-line")>-1,c.isArea=l.indexOf("clip-area")>-1||l.indexOf("clip-ellipse")>-1,c.clipIndex=f?parseInt(f.getAttribute("data-clip-index"),10):-1,c.clipPath=v,c.isClipStart=!0,e.clipPathState=d,ir(t,r),!0)},dragControl:function(t,r){var e,n=r.datas,a=r.originalDatas,i=r.isDragTarget;if(!n.isClipStart)return!1;var o=n,s=o.isControl,u=o.isLine,f=o.isArea,l=o.clipIndex,c=o.clipPath;if(!c)return!1;var v=t.props.keepRatio,d=0,p=0,h=a.draggable,g=Yt(r);i&&h?(e=h.prevBeforeDist,d=e[0],p=e[1]):(d=g[0],p=g[1]);var m=[d,p],b=t.props,S=t.state,E=S.width,M=S.height,y=!f&&!s&&!u,x=c.type,C=c.poses,D=c.splitter,_=C.map(function(J){return J.pos});y&&(d=-d,p=-p);var w=!s||C[l].direction==="nesw",R=x==="inset"||x==="rect",T=C.map(function(){return[0,0]});if(s&&!w){var P=C[l],z=P.horizontal,N=P.vertical,F=[d*Math.abs(z),p*Math.abs(N)];T=Kf(C,l,F,R,v)}else w&&(T=_.map(function(){return[d,p]}));var G=_.map(function(J,St){return H(J,T[St])}),B=L([],G,!0);S.snapBoundInfos=null;var k=c.type==="circle",I=c.type==="ellipse";if(k||I){var V=Pt(G),at=Math.abs(V.bottom-V.top),pt=Math.abs(I?V.right-V.left:at),it=G[0][1]+at,nt=G[0][0]-pt,$=G[0][0]+pt;k&&(B.push([$,V.bottom]),T.push([1,0])),B.push([V.left,it]),T.push([0,1]),B.push([nt,V.bottom]),T.push([1,0])}var rt=Si((b.clipHorizontalGuidelines||[]).map(function(J){return ut("".concat(J),M)}),(b.clipVerticalGuidelines||[]).map(function(J){return ut("".concat(J),E)}),E,M),Q=[],bt=[];if(k||I)Q=[B[4][0],B[2][0]],bt=[B[1][1],B[3][1]];else if(R){var ht=[B[0],B[2],B[4],B[6]],Ct=[T[0],T[2],T[4],T[6]];Q=ht.filter(function(J,St){return Ct[St][0]}).map(function(J){return J[0]}),bt=ht.filter(function(J,St){return Ct[St][1]}).map(function(J){return J[1]})}else Q=B.filter(function(J,St){return T[St][0]}).map(function(J){return J[0]}),bt=B.filter(function(J,St){return T[St][1]}).map(function(J){return J[1]});var mt=[0,0],tt=Ma(rt,b.clipTargetBounds&&{left:0,top:0,right:E,bottom:M},Q,bt,5),U=tt.horizontal,ft=tt.vertical,lt=U.offset,st=ft.offset;if(U.isBound&&(mt[1]+=lt),ft.isBound&&(mt[0]+=st),(I||k)&&T[0][0]===0&&T[0][1]===0){var V=Pt(G),K=V.bottom-V.top,Tt=I?V.right-V.left:K,br=ft.isBound?Math.abs(st):ft.snapIndex===0?-st:st,lo=U.isBound?Math.abs(lt):U.snapIndex===0?-lt:lt;Tt-=br,K-=lo,k&&(K=xi(ft,U)>0?K:Tt,Tt=K);var or=B[0];B[1][1]=or[1]-K,B[2][0]=or[0]+Tt,B[3][1]=or[1]+K,B[4][0]=or[0]-Tt}else if(R&&v&&s){var Yr=ro(C),Un=Yr[0],Kn=Yr[1],Zn=Un&&Kn?Un/Kn:0,co=C[l],Xr=co.direction||"",De=B[1][1],it=B[5][1],nt=B[7][0],$=B[3][0];lt<=st?lt=st/Zn:st=lt*Zn,Xr.indexOf("w")>-1?nt-=st:Xr.indexOf("e")>-1?$-=st:(nt+=st/2,$-=st/2),Xr.indexOf("n")>-1?De-=lt:Xr.indexOf("s")>-1?it-=lt:(De+=lt/2,it-=lt/2);var vo=le(De,$,it,nt);B.forEach(function(ra,mo){var Re;Re=vo[mo].pos,ra[0]=Re[0],ra[1]=Re[1]})}else B.forEach(function(J,St){var ta=T[St];ta[0]&&(J[0]-=st),ta[1]&&(J[1]-=lt)});var Jn=Vn(t,c,G),Qn="".concat(x,"(").concat(Jn.join(D),")");if(S.clipPathState=Qn,k||I)Q=[B[4][0],B[2][0]],bt=[B[1][1],B[3][1]];else if(R){var ht=[B[0],B[2],B[4],B[6]];Q=ht.map(function(St){return St[0]}),bt=ht.map(function(St){return St[1]})}else Q=B.map(function(J){return J[0]}),bt=B.map(function(J){return J[1]});if(S.snapBoundInfos=Ma(rt,b.clipTargetBounds&&{left:0,top:0,right:E,bottom:M},Q,bt,1),h){var po=S.is3d,ho=S.allMatrix,go=po?4:3,Ce=mt;i&&(Ce=[m[0]+mt[0]-g[0],m[1]+mt[1]-g[1]]),h.deltaOffset=Z(ho,[Ce[0],Ce[1],0,0],go)}return A(t,"onClip",Y(t,r,{clipEventType:"changed",clipType:x,poses:G,clipStyle:Qn,clipStyles:Jn,distX:d,distY:p})),!0},dragControlEnd:function(t,r){this.unset(t);var e=r.isDrag,n=r.datas,a=r.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return o?(A(t,"onClipEnd",wt(t,r,{})),a&&(s?Jf(t,r):i&&Zf(t,r)),a||e):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},tl={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,r){return r.isRequest?r.requestAble==="originDraggable":It(r.inputEvent.target,W("origin"))},dragControlStart:function(t,r){var e=r.datas;ir(t,r);var n=Y(t,r,{dragStart:Et.dragStart(t,new Lr().dragStart([0,0],r))}),a=A(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,a===!1?(e.isDragOrigin=!1,!1):n},dragControl:function(t,r){var e=r.datas,n=r.isPinch,a=r.isRequest;if(!e.isDragOrigin)return!1;var i=Yt(r),o=i[0],s=i[1],u=t.state,f=u.width,l=u.height,c=u.offsetMatrix,v=u.targetMatrix,d=u.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=d?4:3,m=[o,s];if(a){var b=r.distOrigin;(b[0]||b[1])&&(m=b)}var S=H(e.startOrigin,m),E=H(e.startTargetOrigin,m),M=X(m,e.prevOrigin),y=Ee(c,v,S,g),x=t.getRect(),C=Pt(mr(y,f,l,g)),D=[x.left-C.left,x.top-C.top];e.prevOrigin=m;var _=[zt(E[0],f,h),zt(E[1],l,h)].join(" "),w=Y(t,r,{width:f,height:l,origin:S,dist:m,delta:M,transformOrigin:_,drag:Et.drag(t,pe(r,t.state,D,!!n,!1))});return A(t,"onDragOrigin",w),w},dragControlEnd:function(t,r){var e=r.datas;return e.isDragOrigin?(A(t,"onDragOriginEnd",wt(t,r,{})),!0):!1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);return!!e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);return e?(t.transformOrigin=e.transformOrigin,!0):!1},request:function(t){var r={},e=t.getRect(),n=0,a=0,i=e.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?n=s.x-e.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?a=s.y-e.top:"deltaY"in s&&(a+=s.deltaY)),{datas:r,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function rl(t,r,e,n,a,i,o){var s=to(t),u=s.horizontals,f=s.verticals,l=u.length,c=f.length,v=-1,d=-1;e===0?l===0?v=0:l===1&&(v=1):e===3&&(l<=2?v=2:l<=3&&(v=3)),e===2?c===0?d=0:c<4&&(d=3):e===1&&(c<=1?d=1:c<=2&&(d=2)),Qi(t,r,0,v,d,n,a,i,o)}function Ga(t,r,e,n,a){n===void 0&&(n=[0,0]);var i,o=[];if(a)i=a;else{var s=yt(t);i=s&&s.borderRadius||""}return!i||!a&&i==="0px"?o=[]:o=Ut(i),Zi(o,r,e,0,0,n)}function Aa(t,r,e,n,a,i){var o=t.state,s=o.width,u=o.height,f=Xn(i,a,t.props.roundRelative,s,u),l=f.raws,c=f.styles,v=to(a,l),d=v.horizontals,p=v.verticals,h=c.join(" ");o.borderRadiusState=h,A(t,"onRound",Y(t,r,{horizontals:d,verticals:p,borderRadius:h,width:s,height:u,delta:n,dist:e}))}var el={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
}`,`:host[data-able-roundable] .line.direction {
    cursor: pointer;
}`],render:function(t,r){var e=t.state,n=e.target,a=e.width,i=e.height,o=e.allMatrix,s=e.is3d,u=e.left,f=e.top,l=e.borderRadiusState,c=t.props,v=c.minRoundControls,d=v===void 0?[0,0]:v,p=c.maxRoundControls,h=p===void 0?[4,4]:p,g=c.zoom;if(!n)return null;var m=s?4:3,b=Ga(n,a,i,d,l);if(!b)return null;var S=0,E=0;return b.map(function(M,y){E+=Math.abs(M.horizontal),S+=Math.abs(M.vertical);var x=X(gt(o,M.pos,m),[u,f]),C=M.vertical?S<=h[1]:E<=h[0];return r.createElement("div",{key:"borderRadiusControl".concat(y),className:W("control","border-radius"),"data-radius-index":y,style:{display:C?"block":"none",transform:"translate(".concat(x[0],"px, ").concat(x[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,r){if(!r.inputEvent||r.isRequest)return!1;var e=r.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragControlStart:function(t,r){var e=r.inputEvent,n=r.datas,a=e.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=o?parseInt(a.getAttribute("data-radius-index"),10):-1,f=s?parseInt(a.getAttribute("data-line-index"),10):-1;if(!o&&!s)return!1;var l=A(t,"onRoundStart",Y(t,r,{}));if(l===!1)return!1;n.lineIndex=f,n.controlIndex=u,n.isControl=o,n.isLine=s,ir(t,r);var c=t.props,v=c.roundRelative,d=c.minRoundControls,p=d===void 0?[0,0]:d,h=t.state,g=h.target,m=h.width,b=h.height;n.isRound=!0,n.prevDist=[0,0];var S=Ga(g,m,b,p)||[];return n.controlPoses=S,h.borderRadiusState=Xn(S.map(function(E){return E.pos}),S,v,m,b).styles.join(" "),!0},dragControl:function(t,r){var e=r.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var n=e.controlIndex,a=e.controlPoses,i=Yt(r),o=i[0],s=i[1],u=[o,s],f=X(u,e.prevDist),l=t.props.maxRoundControls,c=l===void 0?[4,4]:l,v=t.state,d=v.width,p=v.height,h=a[n],g=h.vertical,m=h.horizontal,b=a.map(function(E){var M=E.horizontal,y=E.vertical,x=[M*m*u[0],y*g*u[1]];if(M){if(c[0]===1)return x;if(c[0]<4&&M!==m)return x}else{if(c[1]===0)return x[1]=y*m*u[0]/d*p,x;if(g){if(c[1]===1)return x;if(c[1]<4&&y!==g)return x}}return[0,0]});b[n]=u;var S=a.map(function(E,M){return H(E.pos,b[M])});return e.prevDist=[o,s],Aa(t,r,u,f,a,S),!0},dragControlEnd:function(t,r){var e=t.state;e.borderRadiusState="";var n=r.datas,a=r.isDouble;if(!n.isRound)return!1;var i=e.width,o=e.height,s=n.isControl,u=n.controlIndex,f=n.isLine,l=n.lineIndex,c=n.controlPoses,v=c.map(function(S){return S.pos}),d=v.length,p=t.props.roundClickable,h=p===void 0?!0:p;if(a&&h){if(s)Ji(c,v,u,0);else if(f){var g=Ri(t,r),m=g[0],b=g[1];rl(c,v,l,m,b,i,o)}d!==c.length&&Aa(t,r,[0,0],[0,0],c,v)}return A(t,"onRoundEnd",wt(t,r,{})),e.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}};function nl(t,r){var e=r?"matrix3d(".concat(et(4)):"matrix(".concat(et(3),")");return t===e||t==="matrix(1,0,0,1,0,0)"}var eo={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,r){var e=t.state,n=e.is3d,a=e.target,i=e.targetMatrix,o=a==null?void 0:a.style.transform,s=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(ni(i,!0),")"),u=!o||o==="none"?s:o;r.datas.startTransforms=nl(u,n)?[]:Ut(u)},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,r){return Y(t,r,{setTransform:function(e){r.datas.startTransforms=nr(e)?e:Ut(e)},isPinch:!!r.isPinch})},fillDragParams:function(t,r){return Y(t,r,{isPinch:!!r.isPinch})},dragStart:function(t,r){this.setTransform(t,r),A(t,"onBeforeRenderStart",this.fillDragStartParams(t,r))},drag:function(t,r){this.resetTransform(r),A(t,"onBeforeRender",Y(t,r,{isPinch:!!r.isPinch}))},dragEnd:function(t,r){A(t,"onBeforeRenderEnd",Y(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag}))},dragGroupStart:function(t,r){var e=this;this.dragStart(t,r);var n=Kt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.setTransform(u,o),e.fillDragStartParams(u,o)});A(t,"onBeforeRenderGroupStart",Y(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,r){var e=this;this.drag(t,r);var n=Kt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.resetTransform(o),e.fillDragParams(u,o)});A(t,"onBeforeRenderGroup",Y(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,r){this.dragEnd(t,r),A(t,"onBeforeRenderGroupEnd",Y(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)}},no={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,r){A(t,"onRenderStart",Y(t,r,{isPinch:!!r.isPinch}))},drag:function(t,r){A(t,"onRender",this.fillDragParams(t,r))},dragAfter:function(t,r){if(r.resultCount)return this.drag(t,r)},dragEnd:function(t,r){A(t,"onRenderEnd",this.fillDragEndParams(t,r))},dragGroupStart:function(t,r){A(t,"onRenderGroupStart",Y(t,r,{isPinch:!!r.isPinch,targets:t.props.targets}))},dragGroup:function(t,r){var e=this,n=Kt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.fillDragParams(u,o)});A(t,"onRenderGroup",Y(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,transform:Ra(r),events:i}))},dragGroupEnd:function(t,r){var e=this,n=Kt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.fillDragEndParams(u,o)});A(t,"onRenderGroupEnd",Y(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets,events:i}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlAfter:function(t,r){return this.dragAfter(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)},fillDragParams:function(t,r){return Y(t,r,{isPinch:!!r.isPinch,transform:Ra(r)})},fillDragEndParams:function(t,r){return Y(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag})}};function Dr(t,r,e,n,a,i,o){var s=a==="Start",u=t.state.target,f=i.isRequest;if(!u||s&&n.indexOf("Control")>-1&&!f&&t.areaElement===i.inputEvent.target)return!1;var l="".concat(e).concat(n).concat(a),c="".concat(e).concat(n,"Condition"),v=a==="End",d=a==="After",p=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(a,!0,!1),a===""&&!f&&Vi(t.state,i);var h=L([],t[r],!0);if(f){var g=i.requestAble;h.some(function(D){return D.name===g})||h.push.apply(h,t.props.ables.filter(function(D){return D.name===g}))}if(!h.length)return!1;var m=L(L([eo],h,!0),[no],!1).filter(function(D){return D[l]}),b=i.datas;p&&m.forEach(function(D){D.unset&&D.unset(t)});var S=i.inputEvent,E;v&&S&&(E=document.elementFromPoint(i.clientX,i.clientY)||S.target);var M=0,y=m.filter(function(D){var _=D.name,w=b[_]||(b[_]={});if(s&&(w.isEventStart=!D[c]||D[c](t,i)),w.isEventStart){var R=D[l](t,O(O({},i),{resultCount:M,datas:w,originalDatas:b,inputTarget:E}));return t._emitter.off(),s&&R===!1&&(w.isEventStart=!1),M+=R?1:0,R}return!1}),x=y.length,C=!1;return s&&m.length&&!x&&(C=m.filter(function(D){var _=D.name,w=b[_];return w.isEventStart?D.dragRelation==="strong"?(w.isEventStart=!1,!1):!0:!1}).length===0),(v||C)&&(t.state.gesto=null,t.moveables&&t.moveables.forEach(function(D){D.state.gesto=null})),p&&C&&m.forEach(function(D){D.unset&&D.unset(t)}),s&&!f&&x&&(i==null||i.preventDefault()),t.isUnmounted||C?!1:((!s&&x&&!o||v)&&(t.updateRect(v?a:"",!0,!1),t.forceUpdate()),!s&&!v&&!d&&x&&!o&&Dr(t,r,e,n,a+"After",i),!0)}function ao(t,r,e){var n=t.controlBox.getElement(),a=[];a.push(n),(!t.props.dragArea||t.props.dragTarget)&&a.push(r);var i=function(o){var s=o.inputEvent.target,u=t.areaElement;return s===u||!t.isMoveableElement(s)&&!t.controlBox.getElement().contains(s)||It(s,"moveable-area")||It(s,"moveable-padding")};return Wn(t,a,"targetAbles",e,{dragStart:i,pinchStart:i})}function Wn(t,r,e,n,a){a===void 0&&(a={});var i=t.props,o=i.pinchOutside,s=i.pinchThreshold,u={preventDefault:!1,container:window,pinchThreshold:s,pinchOutside:o},f=new Hs(r,u);return["drag","pinch"].forEach(function(l){["Start","","End"].forEach(function(c){f.on("".concat(l).concat(c),function(v){var d=v.eventType;if(a[d]&&!a[d](v)){v.stop();return}var p=Dr(t,e,l,n,c,v);p||v.stop()})})}),f}var al=function(){function t(e,n,a){var i=this;this.target=e,this.moveable=n,this.eventName=a,this.ables=[],this._onEvent=function(o){var s=i.eventName,u=i.moveable;u.state.disableNativeEvent||i.ables.forEach(function(f){f[s](u,{inputEvent:o})})},e.addEventListener(a.toLowerCase(),this._onEvent)}var r=t.prototype;return r.setAbles=function(e){this.ables=e},r.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}(),hr=function(t){Fr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=O({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},pn(null)),n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new nu,n._prevTarget=null,n._prevDragArea=!1,n._observer=null,n._observerId=0,n.onPreventClick=function(a){a.stopPropagation(),Mt(window,"click",n.onPreventClick,!0)},n.checkUpdateRect=function(){if(!n.isDragging()){var a=n.props.parentMoveable;if(a){a.checkUpdateRect();return}ko(n._observerId),n._observerId=Sn(function(){n.isDragging()||n.updateRect()})}},n}var e=r.prototype;return e.render=function(){var n=this.props,a=this.state,i=n.parentPosition,o=n.className,s=n.target,u=n.zoom,f=n.cspNonce,l=n.translateZ,c=n.cssStyled,v=n.portalContainer;this.checkUpdate(),this.updateRenderPoses();var d=i||{left:0,top:0},p=d.left,h=d.top,g=a.left,m=a.top,b=a.target,S=a.direction,E=a.hasFixed,M=n.targets,y=(M&&M.length||s)&&b,x=this.isDragging(),C={};return this.getEnabledAbles().forEach(function(D){C["data-able-".concat(D.name.toLowerCase())]=!0}),Ot(c,O({cspNonce:f,ref:At(this,"controlBox"),className:"".concat(W("control-box",S===-1?"reverse":"",x?"dragging":"")," ").concat(o)},C,{onClick:this.onPreventClick,portalContainer:v,style:{position:E?"fixed":"absolute",display:y?"block":"none",transform:"translate3d(".concat(g-p,"px, ").concat(m-h,"px, ").concat(l,")"),"--zoom":u,"--zoompx":"".concat(u,"px")}}),this.renderAbles(),this._renderLines())},e.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var n=this.props,a=n.parentMoveable,i=n.container,o=n.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),!i&&!a&&!o&&this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},e.componentDidUpdate=function(n){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(n)},e.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),cr(this,"targetGesto"),cr(this,"controlGesto");var n=this.events;for(var a in n){var i=n[a];i&&i.destroy()}},e.getContainer=function(){var n=this.props,a=n.parentMoveable,i=n.wrapperMoveable,o=n.container;return o||i&&i.getContainer()||a&&a.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(n){return n&&(n.getAttribute("class")||"").indexOf(Rn)>-1},e.dragStart=function(n){var a=this.targetGesto;return a&&!a.isFlag()&&a.triggerDragStart(n),this},e.hitTest=function(n){var a=this.state,i=a.target,o=a.pos1,s=a.pos2,u=a.pos3,f=a.pos4,l=a.targetClientRect;if(!i)return 0;var c;if(n instanceof Element){var v=n.getBoundingClientRect();c={left:v.left,top:v.top,width:v.width,height:v.height}}else c=O({width:0,height:0},n);var d=c.left,p=c.top,h=c.width,g=c.height,m=ca([o,s,f,u],l),b=Os(m,[[d,p],[d+h,p],[d+h,p+g],[d,p+g]]),S=si(m);return!b||!S?0:Math.min(100,b/S*100)},e.isInside=function(n,a){var i=this.state,o=i.target,s=i.pos1,u=i.pos2,f=i.pos3,l=i.pos4,c=i.targetClientRect;return o?Ze([n,a],ca([s,u,l,f],c)):!1},e.updateRect=function(n,a,i){i===void 0&&(i=!0);var o=this.props,s=o.parentMoveable,u=this.state,f=u.target||this.props.target,l=this.getContainer(),c=s?s.props.rootContainer:o.rootContainer;this.updateState(pn(this.controlBox&&this.controlBox.getElement(),f,l,l,c||l),s?!1:i)},e.isDragging=function(){return(this.targetGesto?this.targetGesto.isFlag():!1)||(this.controlGesto?this.controlGesto.isFlag():!1)},e.updateTarget=function(n){this.updateRect(n,!0)},e.getRect=function(){var n=this.state,a=Dt(this.state),i=a[0],o=a[1],s=a[2],u=a[3],f=Pt(a),l=n.width,c=n.height,v=f.width,d=f.height,p=f.left,h=f.top,g=[n.left,n.top],m=H(g,n.origin),b=H(g,n.beforeOrigin),S=n.transformOrigin;return{width:v,height:d,left:p,top:h,pos1:i,pos2:o,pos3:s,pos4:u,offsetWidth:l,offsetHeight:c,beforeOrigin:b,origin:m,transformOrigin:S,rotation:this.getRotation()}},e.getManager=function(){return this},e.getRotation=function(){var n=this.state,a=n.pos1,i=n.pos2,o=n.direction;return Gf(a,i,o)},e.request=function(n,a,i){a===void 0&&(a={});var o=this.props,s=o.ables,u=o.groupable,f=s.filter(function(g){return g.name===n})[0];if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var l=this,c=f.request(this),v=i||a.isInstant,d=c.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(c.isControl?"Control":""),h={request:function(g){return Dr(l,d,"drag",p,"",O(O({},c.request(g)),{requestAble:n,isRequest:!0}),v),this},requestEnd:function(){return Dr(l,d,"drag",p,"End",O(O({},c.requestEnd()),{requestAble:n,isRequest:!0}),v),this}};return Dr(l,d,"drag",p,"Start",O(O({},c.requestStart(a)),{requestAble:n,isRequest:!0}),v),v?h.request(a).requestEnd():h},e.destroy=function(){this.componentWillUnmount()},e.updateRenderPoses=function(){var n=this.state,a=this.props,i=n.originalBeforeOrigin,o=n.transformOrigin,s=n.allMatrix,u=n.is3d,f=n.pos1,l=n.pos2,c=n.pos3,v=n.pos4,d=n.left,p=n.top,h=a.padding||{},g=h.left,m=g===void 0?0:g,b=h.top,S=b===void 0?0:b,E=h.bottom,M=E===void 0?0:E,y=h.right,x=y===void 0?0:y,C=u?4:3,D=a.groupable?i:H(i,[d,p]);n.renderPoses=[H(f,$r(s,[-m,-S],o,D,C)),H(l,$r(s,[x,-S],o,D,C)),H(c,$r(s,[-m,M],o,D,C)),H(v,$r(s,[x,M],o,D,C))]},e.checkUpdate=function(){var n=this.props,a=n.target,i=n.container,o=n.parentMoveable,s=this.state,u=s.target,f=s.container;if(!(!u&&!a)){this.updateAbles();var l=!hn(u,a)||!hn(f,i);if(!!l){var c=i||this.controlBox;c&&this.unsetAbles(),this.updateState({target:a,container:i}),!o&&c&&this.updateRect("End",!1,!1)}}},e.triggerEvent=function(n,a){this._emitter.trigger(n,a);var i=this.props[n];return i&&i(a)},e.useCSS=function(n,a){var i=this.props.customStyledMap,o=n+a;return i[o]||(i[o]=di(n,a)),i[o]},e.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(a){a.unset&&a.unset(n)})},e.updateAbles=function(n,a){n===void 0&&(n=this.props.ables),a===void 0&&(a="");var i=this.props,o=i.triggerAblesSimultaneously,s=n.filter(function(d){return d&&(d.always&&i[d.name]!==!1||i[d.name])}),u="drag".concat(a,"Start"),f="pinch".concat(a,"Start"),l="drag".concat(a,"ControlStart"),c=jr(s,[u,f],o),v=jr(s,[l],o);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=v},e.updateState=function(n,a){if(a){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var o in n)i[o]=n[o]}},e.getEnabledAbles=function(){var n=this.props,a=n.ables;return a.filter(function(i){return i&&n[i.name]})},e.renderAbles=function(){var n=this,a=this.props,i=a.triggerAblesSimultaneously,o={createElement:Ot};return Of(Pf(jr(this.getEnabledAbles(),["render"],i).map(function(s){var u=s.render;return u(n,o)||[]})).filter(function(s){return s}),function(s){var u=s.key;return u}).map(function(s){return s[0]})},e.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e._updateObserver=function(n){var a,i=this.props,o=i.target;if(!window.ResizeObserver||!o||!i.useResizeObserver){(a=this._observer)===null||a===void 0||a.disconnect();return}if(!(n.target===o&&this._observer)){var s=new ResizeObserver(this.checkUpdateRect);s.observe(o,{box:"border-box"}),this._observer=s}},e._updateEvents=function(){var n=this.controlBox.getElement(),a=this.targetAbles.length,i=this.controlAbles.length,o=this.props,s=o.dragTarget||o.target,u=!a&&this.targetGesto||this._isTargetChanged(!0);u&&(cr(this,"targetGesto"),this.updateState({gesto:null})),i||cr(this,"controlGesto"),s&&a&&!this.targetGesto&&(this.targetGesto=ao(this,s,"")),!this.controlGesto&&i&&(this.controlGesto=Wn(this,n,"controlAbles","Control"))},e._updateTargets=function(){var n=this.props;this._prevTarget=n.dragTarget||n.target,this._prevDragArea=n.dragArea},e._renderLines=function(){var n=this.props,a=n.edge,i=n.zoom,o=n.hideDefaultLines;if(o)return[];var s=this.state.renderPoses,u={createElement:Ot};return[lr(u,a?"n":"",s[0],s[1],i,0),lr(u,a?"e":"",s[1],s[3],i,1),lr(u,a?"w":"",s[0],s[2],i,2),lr(u,a?"s":"",s[2],s[3],i,3)]},e._isTargetChanged=function(n){var a=this.props,i=a.dragTarget||a.target,o=this._prevTarget,s=this._prevDragArea,u=a.dragArea,f=!u&&o!==i,l=(n||u)&&s!==u;return f||l},e._updateNativeEvents=function(){var n=this,a=this.props,i=a.dragArea?this.areaElement:this.state.target,o=this.events,s=Wa(o);if(this._isTargetChanged())for(var u in o){var f=o[u];f&&f.destroy(),o[u]=null}if(!!i){var l=this.enabledAbles;s.forEach(function(c){var v=jr(l,[c]),d=v.length>0,p=o[c];if(!d){p&&(p.destroy(),o[c]=null);return}p||(p=new al(i,n,c),o[c]=p),p.setAbles(v)})}},r.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},r}(Mn),Hn={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,r){var e=t.props.targets||[];t.moveables=[];var n=t.state,a=n.left,i=n.top,o={left:a,top:i},s=t.props;return e.map(function(u,f){return r.createElement(hr,{key:"moveable"+f,ref:ka(t,"moveables",f),target:u,origin:!1,cssStyled:s.cssStyled,customStyledMap:s.customStyledMap,useResizeObserver:s.useResizeObserver,parentMoveable:t,parentPosition:o})})}},il=Nr("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,r){r.isRequest||Bt(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,r){this.dragStart(t,r)},dragGroupStart:function(t,r){this.dragStart(t,r),r.datas.inputTarget=r.inputEvent&&r.inputEvent.target},dragEnd:function(t,r){this.endEvent(t);var e=t.state.target,n=r.inputEvent,a=r.inputTarget,i=t.isMoveableElement(a),o=!i&&t.controlBox.getElement().contains(a);if((!r.isDrag||o)&&this.unset(t),!(!n||!a||r.isDrag||t.isMoveableElement(a)||o)){var s=e.contains(a);A(t,"onClick",Y(t,r,{isDouble:r.isDouble,inputTarget:a,isTarget:e===a,containsTarget:s}))}},dragGroupEnd:function(t,r){this.endEvent(t);var e=r.inputEvent,n=r.inputTarget;if(!(!e||!n||r.isDrag||t.isMoveableElement(n)||r.datas.inputTarget===n)){var a=t.props.targets,i=a.indexOf(n),o=i>-1,s=!1;i===-1&&(i=Nt(a,function(u){return u.contains(n)}),s=i>-1),A(t,"onClickGroup",Y(t,r,{isDouble:r.isDouble,targets:a,inputTarget:n,targetIndex:i,isTarget:o,containsTarget:s}))}},dragControlEnd:function(t,r){this.dragEnd(t,r)},dragGroupControlEnd:function(t,r){this.dragEnd(t,r)},endEvent:function(t){var r=this;Sn(function(){r.unset(t)})},unset:function(t){Mt(window,"click",t.onPreventClick,!0)}});function sr(t){var r=t.originalDatas.draggable;return r||(t.originalDatas.draggable={},r=t.originalDatas.draggable),O(O({},t),{datas:r})}var ol=Nr("edgeDraggable",{dragControlCondition:function(t,r){if(!t.props.edgeDraggable||!r.inputEvent)return!1;var e=r.inputEvent.target;return It(e,W("direction"))&&It(e,W("line"))},dragControlStart:function(t,r){return Et.dragStart(t,sr(r))},dragControl:function(t,r){return Et.drag(t,sr(r))},dragControlEnd:function(t,r){return Et.dragEnd(t,sr(r))},dragGroupControlCondition:function(t,r){if(!t.props.edgeDraggable||!r.inputEvent)return!1;var e=r.inputEvent.target;return It(e,W("direction"))&&It(e,W("line"))},dragGroupControlStart:function(t,r){return Et.dragGroupStart(t,sr(r))},dragGroupControl:function(t,r){return Et.dragGroup(t,sr(r))},dragGroupControlEnd:function(t,r){return Et.dragGroupEnd(t,sr(r))},unset:function(t){return Et.unset(t)}}),io={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},qn=[eo,Ui,rf,Af,Et,ol,hu,kf,Ff,Lf,Wf,Hf,Xf,tl,Qf,el,Hn,io,il,$i,no],sl=qn.reduce(function(t,r){return O(O({},t),"events"in r?r.events:{})},{}),ul=qn.reduce(function(t,r){return O(O({},t),r.props)},{}),fl=Tf(sl),ll=Object.keys(fl),cl=Object.keys(ul);function Zr(t,r){return Math.max.apply(Math,t.map(function(e){var n=e[0],a=e[1],i=e[2],o=e[3];return Math.max(n[r],a[r],i[r],o[r])}))}function Jr(t,r){return Math.min.apply(Math,t.map(function(e){var n=e[0],a=e[1],i=e[2],o=e[3];return Math.min(n[r],a[r],i[r],o[r])}))}function vl(t,r){if(!t.length)return[0,0,0,0];var e=t.map(function(h){var g=h.state;return Dt(g)}),n=xr,a=xr,i=0,o=0,s=q(r,Rt);if(s%90){var u=s/180*Math.PI,f=Math.tan(u),l=-1/f,c=[pa,xr],v=[pa,xr];e.forEach(function(h){h.forEach(function(g){var m=g[1]-f*g[0],b=g[1]-l*g[0];c[0]=Math.max(c[0],m),c[1]=Math.min(c[1],m),v[0]=Math.max(v[0],b),v[1]=Math.min(v[1],b)})}),c.forEach(function(h){v.forEach(function(g){var m=(g-h)/(f-l),b=f*m+h;n=Math.min(n,m),a=Math.min(a,b)})});var d=e.map(function(h){var g=h[0],m=h[1],b=h[2],S=h[3];return[jt(g,-u),jt(m,-u),jt(b,-u),jt(S,-u)]});i=Zr(d,0)-Jr(d,0),o=Zr(d,1)-Jr(d,1)}else if(n=Jr(e,0),a=Jr(e,1),i=Zr(e,0)-n,o=Zr(e,1)-a,s%180){var p=i;i=o,o=p}return[n,a,i,o]}var dl=function(t){Fr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new ys,n.moveables=[],n.transformOrigin="50% 50%",n}var e=r.prototype;return e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(n,a,i){if(i===void 0&&(i=!0),!!this.controlBox){this.moveables.forEach(function(T){T.updateRect(n,!1,!1)});var o=this.state,s=this.props,u=o.target||s.target;(!a||n!==""&&s.updateGroup)&&(this.rotation=s.defaultGroupRotate,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var f=this.rotation,l=this.scale,c=vl(this.moveables,f),v=c[0],d=c[1],p=c[2],h=c[3],g="rotate(".concat(f,"deg) scale(").concat(l[0]>=0?1:-1,", ").concat(l[1]>=0?1:-1,")");u.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(p,"px; height:").concat(h,"px;")+"transform:".concat(g),o.width=p,o.height=h;var m=this.getContainer(),b=pn(this.controlBox.getElement(),u,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||m),S=[b.left,b.top],E=Dt(b),M=E[0],y=E[1],x=E[2],C=E[3],D=de([M,y,x,C]),_=[D.minX,D.minY];b.pos1=X(M,_),b.pos2=X(y,_),b.pos3=X(x,_),b.pos4=X(C,_),b.left=v-b.left+_[0],b.top=d-b.top+_[1],b.origin=X(H(S,b.origin),_),b.beforeOrigin=X(H(S,b.beforeOrigin),_),b.originalBeforeOrigin=H(S,b.originalBeforeOrigin);var w=b.targetClientRect,R=l[0]*l[1]>0?1:-1;w.top+=b.top-o.top,w.left+=b.left-o.left,u.style.transform="translate(".concat(-_[0],"px, ").concat(-_[1],"px) ").concat(g),this.updateState(O(O({},b),{direction:R,beforeDirection:R}),i)}},e.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.triggerEvent=function(n,a,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,a);this._emitter.trigger(n,a)},e.updateAbles=function(){t.prototype.updateAbles.call(this,L(L([],this.props.ables,!0),[Hn],!1),"Group")},e._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},e._updateEvents=function(){var n=this.state,a=this.props,i=this._prevTarget,o=a.dragTarget||this.areaElement;i!==o&&(cr(this,"targetGesto"),cr(this,"controlGesto"),n.target=null),n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=ao(this,o,"Group")),this.controlGesto||(this.controlGesto=Wn(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var s=!hn(n.container,a.container);s&&(n.container=a.container);var u=this.differ.update(a.targets),f=u.added,l=u.changed,c=u.removed;(s||f.length||l.length||c.length)&&this.updateRect()},e._updateObserver=function(){},r.defaultProps=O(O({},hr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),r}(hr),pl=function(t){Fr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}var e=r.prototype;return e.render=function(){var n=this,a=this.props,i=a.cspNonce,o=a.cssStyled,s=a.targets;return Ot(o,{cspNonce:i,ref:At(this,"controlBox"),className:W("control-box")},s.map(function(u,f){return Ot(hr,O({key:"moveable"+f,ref:ka(n,"moveables",f)},n.props,{target:u,wrapperMoveable:n}))}))},e.componentDidUpdate=function(){},e.updateRect=function(n,a,i){i===void 0&&(i=!0),this.moveables.forEach(function(o){o.updateRect(n,a,i)})},e.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},e.dragStart=function(){return this},e.hitTest=function(){return 0},e.isInside=function(){return!1},e.isDragging=function(){return!1},e.updateRenderPoses=function(){},e.checkUpdate=function(){},e.triggerEvent=function(){},e.updateAbles=function(){},e._updateEvents=function(){},e._updateObserver=function(){},r}(hr),hl=function(t){Fr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n}var e=r.prototype;return r.makeStyled=function(){var n={},a=this.getTotalAbles();a.forEach(function(o){var s=o.css;!s||s.forEach(function(u){n[u]=!0})});var i=Wa(n).join(`
`);this.defaultStyled=di("div",So(Rn,fu+i))},r.getTotalAbles=function(){return L([Ui,Hn,io,$i],this.defaultAbles,!0)},e.render=function(){var n=this.constructor;n.defaultStyled||n.makeStyled();var a=this.props,i=a.ables,o=a.props,s=au(a,["ables","props"]),u=this._updateRefs(!0),f=If(u,this.selectorMap),l=f.length>1,c=n.getTotalAbles(),v=L(L([],c,!0),i||[],!0),d=O(O(O({},s),o||{}),{ables:v,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});return l?s.individualGroupable?Ot(pl,O({key:"individual-group",ref:At(this,"moveable")},d,{target:null,targets:f})):Ot(dl,O({key:"group",ref:At(this,"moveable")},d,{target:null,targets:f})):Ot(hr,O({key:"single",ref:At(this,"moveable")},d,{target:f[0]}))},e.componentDidMount=function(){this._updateRefs()},e.componentDidUpdate=function(){this._updateRefs()},e.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.getManager=function(){return this.moveable},e._updateRefs=function(n){var a=this.refTargets,i=Wi(this.props.target||this.props.targets),o=typeof document!="undefined",s=a.length!==i.length||a.some(function(l,c){var v=i[c];return!l&&!v?!1:l!==v}),u=this.selectorMap,f={};return this.refTargets.forEach(function(l){if(Gt(l)){var c=u[l];c?f[l]=u[l]:o&&(s=!0,f[l]=[].slice.call(document.querySelectorAll(l)))}}),this.refTargets=i,this.selectorMap=f,!n&&s&&this.forceUpdate(),i},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,iu([Eo(mi)],r.prototype,"moveable",void 0),r}(Mn),gl=function(t){Fr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultAbles=qn,r}(hl),ml=gl;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gn=function(t,r){return gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},gn(t,r)};function jn(t,r){gn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Br=function(){return Br=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Br.apply(this,arguments)};function bl(t,r,e,n){var a=arguments.length,i=a<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);return a>3&&i&&Object.defineProperty(r,e,i),i}var Sl=function(t){jn(r,t);function r(n){var a=t.call(this,n)||this;return a.state={},a.state=a.props,a}var e=r.prototype;return e.render=function(){return es(Ot(ml,Br({ref:At(this,"moveable")},this.state)),this.state.parentElement)},r}(yn),ce=cl,oo=mi,so=ll;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mn=function(){return mn=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},mn.apply(this,arguments)};function El(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var xl=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(Ft(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(!e)this._events={};else if(Ft(e))for(var a in e)this.off(a);else if(!n)this._events[e]=[];else{var i=this._events[e];if(i){var o=Nt(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}return this},r.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},r.emit=function(e,n){var a=this;n===void 0&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,El(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},r.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[];var o=i[e];o.push(mn({listener:n},a))},t}(),yl=xl,Ml=function(t){jn(r,t);function r(n,a){a===void 0&&(a={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var o=Br({},a),s={};so.forEach(function(f){s[Ao("on ".concat(f))]=function(l){return i.trigger(f,l)}}),fa(Ot(Sl,Br({ref:At(i,"innerMoveable"),parentElement:n},o,s)),i.tempElement);var u=o.target;return nr(u)&&u.length>1&&i.updateRect(),i}var e=r.prototype;return e.setState=function(n,a){this.innerMoveable.setState(n,a)},e.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},e.dragStart=function(n){var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n)},e.destroy=function(){fa(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},r=bl([ea(oo,function(n,a){n[a]||(n[a]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=this.getMoveable();if(!(!s||!s[a]))return s[a].apply(s,i)})}),ea(ce,function(n,a){Object.defineProperty(n,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var o;this.setState((o={},o[a]=i,o))},enumerable:!0,configurable:!0})})],r),r}(yl),_l=function(t){jn(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(Ml),Cr=function(){return Cr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Cr.apply(this,arguments)},uo={};oo.forEach(function(t){uo[t]=function(){for(var r,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(r=this.$_moveable)[t].apply(r,e)}});var fo={};ce.forEach(function(t){fo[t]=function(r){this.$_moveable[t]=r}});var $n={name:"moveable",methods:uo,props:ce,watch:fo,mounted:function(){var t=this,r={},e=this.$props;ce.forEach(function(o){var s=e[o];zr(s)||(r[o]=e[o])});var n=this.$refs,a=n.moveableElement,i=new _l(a,Cr(Cr({},r),{portalContainer:a}));so.forEach(function(o){i.on(o,function(s){t.$emit(o,Cr({},s))})}),this.$_moveable=i},beforeUnmount:function(){this.$_moveable.destroy()}};const Dl={ref:"moveableElement"};function Cl(t,r,e,n,a,i){return j.openBlock(),j.createElementBlock("div",Dl,null,512)}$n.render=Cl;$n.__file="src/Moveable.vue";function Rl(t,r){const{findNode:e}=Qr.useVueFlow(),n=e(t);return n.data||(n.data={translate:[0,0],rotate:0,style:{},dimensions:{width:NaN,height:NaN}}),n.data.style||(n.data.style={}),n.data.rotate||(n.data.rotate=0),n.data.translate||(n.data.translate=[0,0]),n.data.dimensions||(n.data.dimensions={width:NaN,height:NaN}),{onResizeStart:f=>{f.setOrigin(["%","%"]),f.dragStart&&f.dragStart.set(n.data.translate)},onResize:f=>{n.data.translate=f.drag.beforeTranslate,n.data.dimensions={width:f.width,height:f.height},f.target.style.width=`${f.width}px`,f.target.style.height=`${f.height}px`,f.target.style.transform=`translate(${n.data.translate[0]}px, ${n.data.translate[1]}px) rotate(${n.data.rotate}deg)`,r("resize",{width:f.width,height:f.height})},onResizeEnd:f=>{const l=n.computedPosition;f.target.style.transform=`rotate(${n.data.rotate}deg)`,n.position={x:l.x+n.data.translate[0],y:l.y+n.data.translate[1]},n.data.translate=[0,0],r("updateNodeInternals")},onRotateStart:f=>{f.set(n.data.rotate)},onRotate:f=>{n.data.rotate=f.beforeRotate,f.target.style.transform=`translate(${n.data.translate[0]}px, ${n.data.translate[1]}px) rotate(${n.data.rotate}deg)`,r("updateNodeInternals"),r("rotate",n.data.rotate)}}}const wl=["data-moveable-id"],Ol={inheritAttrs:!1},Pl=j.defineComponent({...Ol,__name:"ResizeRotateNode",props:{id:null,label:null,targetPosition:null,sourcePosition:null,resizable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!0},data:null,moveableProps:{default:()=>({})}},emits:["updateNodeInternals","resize","rotate"],setup(t,{emit:r}){const e=t,{findNode:n,onPaneClick:a,onNodeClick:i,onNodeDragStart:o,snapGrid:s,snapToGrid:u}=Qr.useVueFlow(),f=j.ref(),l=j.ref(!1),{onRotateStart:c,onRotate:v,onResizeStart:d,onResize:p,onResizeEnd:h}=Rl(e.id,r),g=m=>{l.value=m!=null?m:!l.value};return i(({node:m})=>{g(m.id===e.id)}),o(({node:m})=>{g(m.id===e.id)}),a(()=>g(!1)),j.onBeforeMount(()=>{const m=n(e.id);m.dragHandle=`[data-moveable-id='${e.id}']`;const b=m.style;m.style=()=>({...b,pointerEvents:"none",cursor:"default"})}),(m,b)=>{var S,E;return j.openBlock(),j.createElementBlock(j.Fragment,null,[j.createElementVNode("div",{ref_key:"el",ref:f,style:j.normalizeStyle([{cursor:"grab","pointer-events":"all"},{...t.data.style,cursor:l.value?"grab":"auto",zIndex:l.value?1e3:0,width:(S=t.data.dimensions)!=null&&S.width?`${t.data.dimensions.width}px`:void 0,height:(E=t.data.dimensions)!=null&&E.height?`${t.data.dimensions.height}px`:void 0,transform:`translate(${t.data.translate[0]}px, ${t.data.translate[1]}px) rotate(${t.data.rotate}deg)`}]),"data-moveable-id":e.id},[j.createVNode(j.unref(Qr.Handle),{type:"target",position:e.targetPosition},null,8,["position"]),j.renderSlot(m.$slots,"default",{},()=>[j.createTextVNode(j.toDisplayString(e.label),1)]),j.createVNode(j.unref(Qr.Handle),{type:"source",position:e.sourcePosition},null,8,["position"])],12,wl),j.createVNode(j.unref($n),j.mergeProps(e.moveableProps,{"class-name":"nodrag",style:{"pointer-events":"all"},target:l.value?f.value:void 0,resizable:t.resizable,rotatable:t.rotatable,snappable:j.unref(u),"snap-element":j.unref(u),"snap-gap":j.unref(u),"snap-directions":j.unref(u),"snap-digit":j.unref(s)[0],"snap-treshold":j.unref(s)[0],"snap-grid-width":j.unref(s)[0],"snap-grid-height":j.unref(s)[1],padding:{left:0,top:0,right:0,bottom:0},origin:!1,"start-drag-rotate":0,"throttle-drag-rotate":0,"throttle-resize":1,"render-directions":["nw","n","ne","w","e","sw","s","se"],zoom:1,onResizeStart:j.unref(d),onResize:j.unref(p),onResizeEnd:j.unref(h),onRotateStart:j.unref(c),onRotate:j.unref(v)}),null,16,["target","resizable","rotatable","snappable","snap-element","snap-gap","snap-directions","snap-digit","snap-treshold","snap-grid-width","snap-grid-height","onResizeStart","onResize","onResizeEnd","onRotateStart","onRotate"])],64)}}});exports.ResizeRotateNode=Pl;
